<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>IoticAgent.third.amqp API documentation</title>
    <meta name="description" content="Low-level AMQP client for Python (fork of amqplib)" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #05B;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 1px dashed #CCCCCC;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #E95420;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.AMQPError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.AMQPNotImplementedError">AMQPNotImplementedError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.AMQPNotImplementedError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.AccessRefused">AccessRefused</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.AccessRefused.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.Channel">Channel</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.__init__">__init__</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_ack">basic_ack</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_cancel">basic_cancel</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_consume">basic_consume</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_get">basic_get</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_publish">basic_publish</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_publish_confirm">basic_publish_confirm</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_qos">basic_qos</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_recover">basic_recover</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_recover_async">basic_recover_async</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.basic_reject">basic_reject</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.close">close</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.confirm_select">confirm_select</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.dispatch_method">dispatch_method</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.exchange_bind">exchange_bind</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.exchange_declare">exchange_declare</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.exchange_delete">exchange_delete</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.exchange_unbind">exchange_unbind</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.flow">flow</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.queue_bind">queue_bind</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.queue_declare">queue_declare</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.queue_delete">queue_delete</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.queue_purge">queue_purge</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.queue_unbind">queue_unbind</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.tx_commit">tx_commit</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.tx_rollback">tx_rollback</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.tx_select">tx_select</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Channel.wait">wait</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ChannelError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ChannelNotOpen">ChannelNotOpen</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ChannelNotOpen.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.Connection">Connection</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.__init__">__init__</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.Transport">Transport</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.channel">channel</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.close">close</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.dispatch_method">dispatch_method</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.drain_events">drain_events</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.heartbeat_tick">heartbeat_tick</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.is_alive">is_alive</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.read_timeout">read_timeout</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.send_heartbeat">send_heartbeat</a></li>
    <li class="mono"><a href="#IoticAgent.third.amqp.Connection.wait">wait</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ConnectionError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ConnectionForced">ConnectionForced</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ConnectionForced.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ConsumerCancelled">ConsumerCancelled</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ConsumerCancelled.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ContentTooLarge">ContentTooLarge</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ContentTooLarge.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.FrameError">FrameError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.FrameError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.FrameSyntaxError">FrameSyntaxError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.FrameSyntaxError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.InternalError">InternalError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.InternalError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.InvalidCommand">InvalidCommand</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.InvalidCommand.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.InvalidPath">InvalidPath</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.InvalidPath.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.IrrecoverableChannelError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.Message">Message</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.Message.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.NoConsumers">NoConsumers</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.NoConsumers.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.NotAllowed">NotAllowed</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.NotAllowed.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.NotFound">NotFound</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.NotFound.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.PreconditionFailed">PreconditionFailed</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.PreconditionFailed.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.RecoverableChannelError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.RecoverableConnectionError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ResourceError">ResourceError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ResourceError.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.ResourceLocked">ResourceLocked</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.ResourceLocked.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.third.amqp.UnexpectedFrame">UnexpectedFrame</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.third.amqp.UnexpectedFrame.__init__">__init__</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">IoticAgent.third.amqp</span> module</h1>
  <p>Low-level AMQP client for Python (fork of amqplib)</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp" class="source">
    <div class="codehilite"><pre><span class="sd">&quot;&quot;&quot;Low-level AMQP client for Python (fork of amqplib)&quot;&quot;&quot;</span>
<span class="c1"># Copyright (C) 2007-2008 Barry Pederson &lt;bp@barryp.org&gt;</span>
<span class="c1">#</span>
<span class="c1"># This library is free software; you can redistribute it and/or</span>
<span class="c1"># modify it under the terms of the GNU Lesser General Public</span>
<span class="c1"># License as published by the Free Software Foundation; either</span>
<span class="c1"># version 2.1 of the License, or (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This library is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="c1"># Lesser General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public</span>
<span class="c1"># License along with this library; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="n">VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">VERSION</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">VERSION</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Barry Pederson&#39;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s1">&#39;Ask Solem&#39;</span>
<span class="n">__contact__</span> <span class="o">=</span> <span class="s1">&#39;pyamqp@celeryproject.org&#39;</span>
<span class="n">__homepage__</span> <span class="o">=</span> <span class="s1">&#39;http://github.com/celery/py-amqp&#39;</span>
<span class="n">__docformat__</span> <span class="o">=</span> <span class="s1">&#39;restructuredtext&#39;</span>

<span class="c1"># -eof meta-</span>

<span class="c1">#</span>
<span class="c1"># Pull in the public items from the various sub-modules</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">.basic_message</span> <span class="kn">import</span> <span class="n">Message</span>      <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">.channel</span> <span class="kn">import</span> <span class="n">Channel</span>            <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">.connection</span> <span class="kn">import</span> <span class="n">Connection</span>      <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">.exceptions</span> <span class="kn">import</span> <span class="p">(</span>               <span class="c1"># noqa</span>
    <span class="n">AMQPError</span><span class="p">,</span>
    <span class="n">ConnectionError</span><span class="p">,</span>
    <span class="n">RecoverableConnectionError</span><span class="p">,</span>
    <span class="n">IrrecoverableConnectionError</span><span class="p">,</span>
    <span class="n">ChannelError</span><span class="p">,</span>
    <span class="n">RecoverableChannelError</span><span class="p">,</span>
    <span class="n">IrrecoverableChannelError</span><span class="p">,</span>
    <span class="n">ConsumerCancelled</span><span class="p">,</span>
    <span class="n">ContentTooLarge</span><span class="p">,</span>
    <span class="n">NoConsumers</span><span class="p">,</span>
    <span class="n">ConnectionForced</span><span class="p">,</span>
    <span class="n">InvalidPath</span><span class="p">,</span>
    <span class="n">AccessRefused</span><span class="p">,</span>
    <span class="n">NotFound</span><span class="p">,</span>
    <span class="n">ResourceLocked</span><span class="p">,</span>
    <span class="n">PreconditionFailed</span><span class="p">,</span>
    <span class="n">FrameError</span><span class="p">,</span>
    <span class="n">FrameSyntaxError</span><span class="p">,</span>
    <span class="n">InvalidCommand</span><span class="p">,</span>
    <span class="n">ChannelNotOpen</span><span class="p">,</span>
    <span class="n">UnexpectedFrame</span><span class="p">,</span>
    <span class="n">ResourceError</span><span class="p">,</span>
    <span class="n">NotAllowed</span><span class="p">,</span>
    <span class="n">AMQPNotImplementedError</span><span class="p">,</span>
    <span class="n">InternalError</span><span class="p">,</span>
    <span class="n">error_for_code</span><span class="p">,</span>
    <span class="n">__all__</span> <span class="k">as</span> <span class="n">_all_exceptions</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">promise</span>  <span class="c1"># noqa</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Connection&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Channel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Message&#39;</span><span class="p">,</span>
<span class="p">]</span> <span class="o">+</span> <span class="n">_all_exceptions</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.AMQPError" class="name">class <span class="ident">AMQPError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AMQPError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AMQPError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">AMQPError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                           <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;{0.method}: ({0.reply_code}) {0.reply_text}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="ow">or</span> <span class="s1">&#39;&lt;AMQPError: unknown error&gt;&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.AMQPError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AMQPError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AMQPError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.message" class="name">var <span class="ident">message</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.method" class="name">var <span class="ident">method</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.method_name" class="name">var <span class="ident">method_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.method_sig" class="name">var <span class="ident">method_sig</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.reply_code" class="name">var <span class="ident">reply_code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPError.reply_text" class="name">var <span class="ident">reply_text</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.AMQPNotImplementedError" class="name">class <span class="ident">AMQPNotImplementedError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AMQPNotImplementedError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AMQPNotImplementedError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">AMQPNotImplementedError</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">540</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.AMQPNotImplementedError">AMQPNotImplementedError</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPNotImplementedError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPNotImplementedError.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.AMQPNotImplementedError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AMQPNotImplementedError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AMQPNotImplementedError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AMQPNotImplementedError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.AccessRefused" class="name">class <span class="ident">AccessRefused</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AccessRefused', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AccessRefused" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">AccessRefused</span><span class="p">(</span><span class="n">IrrecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">403</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.AccessRefused">AccessRefused</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AccessRefused.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.AccessRefused.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.AccessRefused.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.AccessRefused.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.AccessRefused.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.AccessRefused.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.Channel" class="name">class <span class="ident">Channel</span></p>
      
  
    <div class="desc"><p>Work with channels</p>
<p>The channel class provides methods for a client to establish a
virtual connection - a channel - to a server and for both peers to
operate the virtual connection thereafter.</p>
<p>GRAMMAR::</p>
<div class="codehilite"><pre>channel             = open-channel *use-channel close-channel
open-channel        = C:OPEN S:OPEN-OK
use-channel         = C:FLOW S:FLOW-OK
                    / S:FLOW C:FLOW-OK
                    / functional-class
close-channel       = C:CLOSE S:CLOSE-OK
                    / S:CLOSE C:CLOSE-OK
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">Channel</span><span class="p">(</span><span class="n">AbstractChannel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Work with channels</span>

<span class="sd">    The channel class provides methods for a client to establish a</span>
<span class="sd">    virtual connection - a channel - to a server and for both peers to</span>
<span class="sd">    operate the virtual connection thereafter.</span>

<span class="sd">    GRAMMAR::</span>

<span class="sd">        channel             = open-channel *use-channel close-channel</span>
<span class="sd">        open-channel        = C:OPEN S:OPEN-OK</span>
<span class="sd">        use-channel         = C:FLOW S:FLOW-OK</span>
<span class="sd">                            / S:FLOW C:FLOW-OK</span>
<span class="sd">                            / functional-class</span>
<span class="sd">        close-channel       = C:CLOSE S:CLOSE-OK</span>
<span class="sd">                            / S:CLOSE C:CLOSE-OK</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">channel_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_encode_decode</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a channel bound to a connection and using the specified</span>
<span class="sd">        numeric channel_id, and open on the server.</span>

<span class="sd">        The &#39;auto_encode_decode&#39; parameter (defaults to True), indicates</span>
<span class="sd">        whether the library should attempt to encode/decode the body</span>
<span class="sd">        of Messages to/from a Unicode string. The &#39;content_encoding&#39; property</span>
<span class="sd">        of the message is used if set, otherwise encoding default to utf-8. If</span>
<span class="sd">        decode raises an Exception, the message body is left as plain bytes. If</span>
<span class="sd">        the input is not unicode, it is also left as-is.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel_id</span><span class="p">:</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">_claim_channel_id</span><span class="p">(</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">channel_id</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">_get_free_channel_id</span><span class="p">()</span>

        <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;using channel_id: </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Channel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c1"># Flow control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">returned_messages</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="o">=</span> <span class="n">auto_encode_decode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># set first time basic_publish_confirm is called</span>
        <span class="c1"># and publisher confirms are enabled for this channel.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">confirm_publish</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">basic_publish</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basic_publish_confirm</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_x_open</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_do_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tear down this object, after we&#39;ve agreed to close</span>
<span class="sd">        with the server.&quot;&quot;&quot;</span>
        <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Closed channel #</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">channel_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_id</span><span class="p">,</span> <span class="bp">None</span>
        <span class="n">connection</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="p">,</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">connection</span><span class="p">:</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">channel_id</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">_avail_channel_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_do_revive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_open</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Request a channel close</span>

<span class="sd">        This method indicates that the sender wants to close the</span>
<span class="sd">        channel. This may be due to internal conditions (e.g. a forced</span>
<span class="sd">        shut-down) or due to an error handling a specific method, i.e.</span>
<span class="sd">        an exception.  When a close is due to an exception, the sender</span>
<span class="sd">        provides the class and method id of the method which caused</span>
<span class="sd">        the exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            After sending this method any received method except</span>
<span class="sd">            Channel.Close-OK MUST be discarded.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer sending this method MAY use a counter or timeout</span>
<span class="sd">            to detect failure of the other peer to respond correctly</span>
<span class="sd">            with Channel.Close-OK..</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reply_code: short</span>

<span class="sd">                The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">                RFC 011.</span>

<span class="sd">            reply_text: shortstr</span>

<span class="sd">                The localised reply text.  This text can be logged as an</span>
<span class="sd">                aid to resolving issues.</span>

<span class="sd">            class_id: short</span>

<span class="sd">                failing method class</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the class of the method.</span>

<span class="sd">            method_id: short</span>

<span class="sd">                failing method ID</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the ID of the method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">reply_code</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">reply_text</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># class_id</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># method_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span>  <span class="c1"># Channel.close</span>
                <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span>  <span class="c1"># Channel.close_ok</span>
            <span class="p">])</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># no point in waiting anymore</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="c1"># lack of communication should not prevent tidy-up</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Request a channel close</span>

<span class="sd">        This method indicates that the sender wants to close the</span>
<span class="sd">        channel. This may be due to internal conditions (e.g. a forced</span>
<span class="sd">        shut-down) or due to an error handling a specific method, i.e.</span>
<span class="sd">        an exception.  When a close is due to an exception, the sender</span>
<span class="sd">        provides the class and method id of the method which caused</span>
<span class="sd">        the exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            After sending this method any received method except</span>
<span class="sd">            Channel.Close-OK MUST be discarded.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer sending this method MAY use a counter or timeout</span>
<span class="sd">            to detect failure of the other peer to respond correctly</span>
<span class="sd">            with Channel.Close-OK..</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reply_code: short</span>

<span class="sd">                The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">                RFC 011.</span>

<span class="sd">            reply_text: shortstr</span>

<span class="sd">                The localised reply text.  This text can be logged as an</span>
<span class="sd">                aid to resolving issues.</span>

<span class="sd">            class_id: short</span>

<span class="sd">                failing method class</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the class of the method.</span>

<span class="sd">            method_id: short</span>

<span class="sd">                failing method ID</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the ID of the method.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">reply_code</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>
        <span class="n">reply_text</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">class_id</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>
        <span class="n">method_id</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">41</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_revive</span><span class="p">()</span>

        <span class="k">raise</span> <span class="n">error_for_code</span><span class="p">(</span>
            <span class="n">reply_code</span><span class="p">,</span> <span class="n">reply_text</span><span class="p">,</span> <span class="p">(</span><span class="n">class_id</span><span class="p">,</span> <span class="n">method_id</span><span class="p">),</span> <span class="n">ChannelError</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_close_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a channel close</span>

<span class="sd">        This method confirms a Channel.Close method and tells the</span>
<span class="sd">        recipient that it is safe to release resources for the channel</span>
<span class="sd">        and close the socket.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A peer that detects a socket closure without having</span>
<span class="sd">            received a Channel.Close-Ok handshake method SHOULD log</span>
<span class="sd">            the error.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable/disable flow from peer</span>

<span class="sd">        This method asks the peer to pause or restart the flow of</span>
<span class="sd">        content data. This is a simple flow-control mechanism that a</span>
<span class="sd">        peer can use to avoid oveflowing its queues or otherwise</span>
<span class="sd">        finding itself receiving more messages than it can process.</span>
<span class="sd">        Note that this method is not intended for window control.  The</span>
<span class="sd">        peer that receives a request to stop sending content should</span>
<span class="sd">        finish sending the current content, if any, and then wait</span>
<span class="sd">        until it receives a Flow restart method.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When a new channel is opened, it is active.  Some</span>
<span class="sd">            applications assume that channels are inactive until</span>
<span class="sd">            started.  To emulate this behaviour a client MAY open the</span>
<span class="sd">            channel, then pause it.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When sending content data in multiple frames, a peer</span>
<span class="sd">            SHOULD monitor the channel for incoming methods and</span>
<span class="sd">            respond to a Channel.Flow as rapidly as possible.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A peer MAY use the Channel.Flow method to throttle</span>
<span class="sd">            incoming content data for internal reasons, for example,</span>
<span class="sd">            when exchangeing data over a slower connection.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer that requests a Channel.Flow method MAY</span>
<span class="sd">            disconnect and/or ban a peer that does not respect the</span>
<span class="sd">            request.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            active: boolean</span>

<span class="sd">                start/stop content frames</span>

<span class="sd">                If True, the peer starts sending content frames.  If</span>
<span class="sd">                False, the peer stops sending content frames.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">active</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.flow_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable/disable flow from peer</span>

<span class="sd">        This method asks the peer to pause or restart the flow of</span>
<span class="sd">        content data. This is a simple flow-control mechanism that a</span>
<span class="sd">        peer can use to avoid oveflowing its queues or otherwise</span>
<span class="sd">        finding itself receiving more messages than it can process.</span>
<span class="sd">        Note that this method is not intended for window control.  The</span>
<span class="sd">        peer that receives a request to stop sending content should</span>
<span class="sd">        finish sending the current content, if any, and then wait</span>
<span class="sd">        until it receives a Flow restart method.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When a new channel is opened, it is active.  Some</span>
<span class="sd">            applications assume that channels are inactive until</span>
<span class="sd">            started.  To emulate this behaviour a client MAY open the</span>
<span class="sd">            channel, then pause it.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When sending content data in multiple frames, a peer</span>
<span class="sd">            SHOULD monitor the channel for incoming methods and</span>
<span class="sd">            respond to a Channel.Flow as rapidly as possible.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A peer MAY use the Channel.Flow method to throttle</span>
<span class="sd">            incoming content data for internal reasons, for example,</span>
<span class="sd">            when exchangeing data over a slower connection.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer that requests a Channel.Flow method MAY</span>
<span class="sd">            disconnect and/or ban a peer that does not respect the</span>
<span class="sd">            request.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            active: boolean</span>

<span class="sd">                start/stop content frames</span>

<span class="sd">                If True, the peer starts sending content frames.  If</span>
<span class="sd">                False, the peer stops sending content frames.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_flow_ok</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_x_flow_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a flow method</span>

<span class="sd">        Confirms to the peer that a flow command was received and</span>
<span class="sd">        processed.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            active: boolean</span>

<span class="sd">                current flow setting</span>

<span class="sd">                Confirms the setting of the processed flow method:</span>
<span class="sd">                True means the peer will start sending or continue</span>
<span class="sd">                to send content frames; False means it will not.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">active</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_flow_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a flow method</span>

<span class="sd">        Confirms to the peer that a flow command was received and</span>
<span class="sd">        processed.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            active: boolean</span>

<span class="sd">                current flow setting</span>

<span class="sd">                Confirms the setting of the processed flow method:</span>
<span class="sd">                True means the peer will start sending or continue</span>
<span class="sd">                to send content frames; False means it will not.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_x_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open a channel for use</span>

<span class="sd">        This method opens a virtual connection (a channel).</span>

<span class="sd">        RULE:</span>

<span class="sd">            This method MUST NOT be called when the channel is already</span>
<span class="sd">            open.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            out_of_band: shortstr (DEPRECATED)</span>

<span class="sd">                out-of-band settings</span>

<span class="sd">                Configures out-of-band transfers on this channel.  The</span>
<span class="sd">                syntax and meaning of this field will be formally</span>
<span class="sd">                defined at a later date.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># out_of_band: deprecated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.open_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_open_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Signal that the channel is ready</span>

<span class="sd">        This method signals to the client that the channel is ready</span>
<span class="sd">        for use.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Channel open&#39;</span><span class="p">)</span>

    <span class="c1">#############</span>
    <span class="c1">#</span>
    <span class="c1">#  Exchange</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># work with exchanges</span>
    <span class="c1">#</span>
    <span class="c1"># Exchanges match and distribute messages across queues.</span>
    <span class="c1"># Exchanges can be configured in the server or created at runtime.</span>
    <span class="c1">#</span>
    <span class="c1"># GRAMMAR::</span>
    <span class="c1">#</span>
    <span class="c1">#     exchange            = C:DECLARE  S:DECLARE-OK</span>
    <span class="c1">#                         / C:DELETE   S:DELETE-OK</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MUST implement the direct and fanout exchange</span>
    <span class="c1">#     types, and predeclare the corresponding exchanges named</span>
    <span class="c1">#     amq.direct and amq.fanout in each virtual host. The server</span>
    <span class="c1">#     MUST also predeclare a direct exchange to act as the default</span>
    <span class="c1">#     exchange for content Publish methods and for default queue</span>
    <span class="c1">#     bindings.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server SHOULD implement the topic exchange type, and</span>
    <span class="c1">#     predeclare the corresponding exchange named amq.topic in</span>
    <span class="c1">#     each virtual host.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MAY implement the system exchange type, and</span>
    <span class="c1">#     predeclare the corresponding exchanges named amq.system in</span>
    <span class="c1">#     each virtual host. If the client attempts to bind a queue to</span>
    <span class="c1">#     the system exchange, the server MUST raise a connection</span>
    <span class="c1">#     exception with reply code 507 (not allowed).</span>
    <span class="c1">#</span>

    <span class="k">def</span> <span class="nf">exchange_declare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">passive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">durable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                         <span class="n">auto_delete</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Declare exchange, create if needed</span>

<span class="sd">        This method creates an exchange if it does not already exist,</span>
<span class="sd">        and if the exchange exists, verifies that it is of the correct</span>
<span class="sd">        and expected class.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD support a minimum of 16 exchanges per</span>
<span class="sd">            virtual host and ideally, impose no limit except as</span>
<span class="sd">            defined by available resources.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            exchange: shortstr</span>

<span class="sd">                RULE:</span>

<span class="sd">                    Exchange names starting with &quot;amq.&quot; are reserved</span>
<span class="sd">                    for predeclared and standardised exchanges.  If</span>
<span class="sd">                    the client attempts to create an exchange starting</span>
<span class="sd">                    with &quot;amq.&quot;, the server MUST raise a channel</span>
<span class="sd">                    exception with reply code 403 (access refused).</span>

<span class="sd">            type: shortstr</span>

<span class="sd">                exchange type</span>

<span class="sd">                Each exchange belongs to one of a set of exchange</span>
<span class="sd">                types implemented by the server.  The exchange types</span>
<span class="sd">                define the functionality of the exchange - i.e. how</span>
<span class="sd">                messages are routed through it.  It is not valid or</span>
<span class="sd">                meaningful to attempt to change the type of an</span>
<span class="sd">                existing exchange.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the exchange already exists with a different</span>
<span class="sd">                    type, the server MUST raise a connection exception</span>
<span class="sd">                    with a reply code 507 (not allowed).</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the server does not support the requested</span>
<span class="sd">                    exchange type it MUST raise a connection exception</span>
<span class="sd">                    with a reply code 503 (command invalid).</span>

<span class="sd">            passive: boolean</span>

<span class="sd">                do not create exchange</span>

<span class="sd">                If set, the server will not create the exchange.  The</span>
<span class="sd">                client can use this to check whether an exchange</span>
<span class="sd">                exists without modifying the server state.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If set, and the exchange does not already exist,</span>
<span class="sd">                    the server MUST raise a channel exception with</span>
<span class="sd">                    reply code 404 (not found).</span>

<span class="sd">            durable: boolean</span>

<span class="sd">                request a durable exchange</span>

<span class="sd">                If set when creating a new exchange, the exchange will</span>
<span class="sd">                be marked as durable.  Durable exchanges remain active</span>
<span class="sd">                when a server restarts. Non-durable exchanges</span>
<span class="sd">                (transient exchanges) are purged if/when a server</span>
<span class="sd">                restarts.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST support both durable and transient</span>
<span class="sd">                    exchanges.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST ignore the durable field if the</span>
<span class="sd">                    exchange already exists.</span>

<span class="sd">            auto_delete: boolean</span>

<span class="sd">                auto-delete when unused</span>

<span class="sd">                If set, the exchange is deleted when all queues have</span>
<span class="sd">                finished using it.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server SHOULD allow for a reasonable delay</span>
<span class="sd">                    between the point when it determines that an</span>
<span class="sd">                    exchange is not being used (or no longer used),</span>
<span class="sd">                    and the point when it deletes the exchange.  At</span>
<span class="sd">                    the least it must allow a client to create an</span>
<span class="sd">                    exchange and then bind a queue to it, with a small</span>
<span class="sd">                    but non-zero delay between these two actions.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST ignore the auto-delete field if</span>
<span class="sd">                    the exchange already exists.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">            arguments: table</span>

<span class="sd">                arguments for declaration</span>

<span class="sd">                A set of arguments for the declaration. The syntax and</span>
<span class="sd">                semantics of these arguments depends on the server</span>
<span class="sd">                implementation.  This field is ignored if passive is</span>
<span class="sd">                True.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">passive</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">durable</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">auto_delete</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>  <span class="c1"># internal: deprecated</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">auto_delete</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span><span class="n">VDeprecationWarning</span><span class="p">(</span><span class="n">EXCHANGE_AUTODELETE_DEPRECATED</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.exchange_declare_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_exchange_declare_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirms an exchange declaration</span>

<span class="sd">        This method confirms a Declare method and confirms the name of</span>
<span class="sd">        the exchange, essential for automatically-named exchanges.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">exchange_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">if_unused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete an exchange</span>

<span class="sd">        This method deletes an exchange.  When an exchange is deleted</span>
<span class="sd">        all queue bindings on the exchange are cancelled.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            exchange: shortstr</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The exchange MUST exist. Attempting to delete a</span>
<span class="sd">                    non-existing exchange causes a channel exception.</span>

<span class="sd">            if_unused: boolean</span>

<span class="sd">                delete only if unused</span>

<span class="sd">                If set, the server will only delete the exchange if it</span>
<span class="sd">                has no queue bindings. If the exchange has queue</span>
<span class="sd">                bindings the server does not delete it but raises a</span>
<span class="sd">                channel exception instead.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If set, the server SHOULD delete the exchange but</span>
<span class="sd">                    only if it has no queue bindings.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If set, the server SHOULD raise a channel</span>
<span class="sd">                    exception if the exchange is in use.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_unused</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.exchange_delete_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_exchange_delete_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm deletion of an exchange</span>

<span class="sd">        This method confirms the deletion of an exchange.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">exchange_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                      <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method binds an exchange to an exchange.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A server MUST allow and ignore duplicate bindings - that</span>
<span class="sd">            is, two or more bind methods for a specific exchanges,</span>
<span class="sd">            with identical arguments - without treating these as an</span>
<span class="sd">            error.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A server MUST allow cycles of exchange bindings to be</span>
<span class="sd">            created including allowing an exchange to be bound to</span>
<span class="sd">            itself.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A server MUST not deliver the same message more than once</span>
<span class="sd">            to a destination exchange, even if the topology of</span>
<span class="sd">            exchanges and bindings results in multiple (even infinite)</span>
<span class="sd">            routes to that exchange.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reserved-1: short</span>

<span class="sd">            destination: shortstr</span>

<span class="sd">                Specifies the name of the destination exchange to</span>
<span class="sd">                bind.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    A client MUST NOT be allowed to bind a non-</span>
<span class="sd">                    existent destination exchange.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to</span>
<span class="sd">                    mean the default exchange.</span>

<span class="sd">            source: shortstr</span>

<span class="sd">                Specifies the name of the source exchange to bind.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    A client MUST NOT be allowed to bind a non-</span>
<span class="sd">                    existent source exchange.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to</span>
<span class="sd">                    mean the default exchange.</span>

<span class="sd">            routing-key: shortstr</span>

<span class="sd">                Specifies the routing key for the binding. The routing</span>
<span class="sd">                key is used for routing messages depending on the</span>
<span class="sd">                exchange configuration. Not all exchanges use a</span>
<span class="sd">                routing key - refer to the specific exchange</span>
<span class="sd">                documentation.</span>

<span class="sd">            no-wait: bit</span>

<span class="sd">            arguments: table</span>

<span class="sd">                A set of arguments for the binding. The syntax and</span>
<span class="sd">                semantics of these arguments depends on the exchange</span>
<span class="sd">                class.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.exchange_bind_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">exchange_unbind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                        <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method unbinds an exchange from an exchange.</span>

<span class="sd">        RULE:</span>

<span class="sd">            If a unbind fails, the server MUST raise a connection</span>
<span class="sd">            exception.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reserved-1: short</span>

<span class="sd">            destination: shortstr</span>

<span class="sd">                Specifies the name of the destination exchange to</span>
<span class="sd">                unbind.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client MUST NOT attempt to unbind an exchange</span>
<span class="sd">                    that does not exist from an exchange.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to</span>
<span class="sd">                    mean the default exchange.</span>

<span class="sd">            source: shortstr</span>

<span class="sd">                Specifies the name of the source exchange to unbind.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client MUST NOT attempt to unbind an exchange</span>
<span class="sd">                    from an exchange that does not exist.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to</span>
<span class="sd">                    mean the default exchange.</span>

<span class="sd">            routing-key: shortstr</span>

<span class="sd">                Specifies the routing key of the binding to unbind.</span>

<span class="sd">            no-wait: bit</span>

<span class="sd">            arguments: table</span>

<span class="sd">                Specifies the arguments of the binding to unbind.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Channel.exchange_unbind_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_exchange_bind_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm bind successful</span>

<span class="sd">        This method confirms that the bind was successful.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_exchange_unbind_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm unbind successful</span>

<span class="sd">        This method confirms that the unbind was successful.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1">#############</span>
    <span class="c1">#</span>
    <span class="c1">#  Queue</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># work with queues</span>
    <span class="c1">#</span>
    <span class="c1"># Queues store and forward messages.  Queues can be configured in</span>
    <span class="c1"># the server or created at runtime.  Queues must be attached to at</span>
    <span class="c1"># least one exchange in order to receive messages from publishers.</span>
    <span class="c1">#</span>
    <span class="c1"># GRAMMAR::</span>
    <span class="c1">#</span>
    <span class="c1">#     queue               = C:DECLARE  S:DECLARE-OK</span>
    <span class="c1">#                         / C:BIND     S:BIND-OK</span>
    <span class="c1">#                         / C:PURGE    S:PURGE-OK</span>
    <span class="c1">#                         / C:DELETE   S:DELETE-OK</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     A server MUST allow any content class to be sent to any</span>
    <span class="c1">#     queue, in any mix, and queue and delivery these content</span>
    <span class="c1">#     classes independently. Note that all methods that fetch</span>
    <span class="c1">#     content off queues are specific to a given content class.</span>
    <span class="c1">#</span>

    <span class="k">def</span> <span class="nf">queue_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                   <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Bind queue to an exchange</span>

<span class="sd">        This method binds a queue to an exchange.  Until a queue is</span>
<span class="sd">        bound it will not receive any messages.  In a classic</span>
<span class="sd">        messaging model, store-and-forward queues are bound to a dest</span>
<span class="sd">        exchange and subscription queues are bound to a dest_wild</span>
<span class="sd">        exchange.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A server MUST allow ignore duplicate bindings - that is,</span>
<span class="sd">            two or more bind methods for a specific queue, with</span>
<span class="sd">            identical arguments - without treating these as an error.</span>

<span class="sd">        RULE:</span>

<span class="sd">            If a bind fails, the server MUST raise a connection</span>
<span class="sd">            exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MUST NOT allow a durable queue to bind to a</span>
<span class="sd">            transient exchange. If the client attempts this the server</span>
<span class="sd">            MUST raise a channel exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            Bindings for durable queues are automatically durable and</span>
<span class="sd">            the server SHOULD restore such bindings after a server</span>
<span class="sd">            restart.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD support at least 4 bindings per queue,</span>
<span class="sd">            and ideally, impose no limit except as defined by</span>
<span class="sd">            available resources.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to bind.  If the queue</span>
<span class="sd">                name is empty, refers to the current queue for the</span>
<span class="sd">                channel, which is the last declared queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the client did not previously declare a queue,</span>
<span class="sd">                    and the queue name in this method is empty, the</span>
<span class="sd">                    server MUST raise a connection exception with</span>
<span class="sd">                    reply code 530 (not allowed).</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the queue does not exist the server MUST raise</span>
<span class="sd">                    a channel exception with reply code 404 (not</span>
<span class="sd">                    found).</span>

<span class="sd">            exchange: shortstr</span>

<span class="sd">                The name of the exchange to bind to.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the exchange does not exist the server MUST</span>
<span class="sd">                    raise a channel exception with reply code 404 (not</span>
<span class="sd">                    found).</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                message routing key</span>

<span class="sd">                Specifies the routing key for the binding.  The</span>
<span class="sd">                routing key is used for routing messages depending on</span>
<span class="sd">                the exchange configuration. Not all exchanges use a</span>
<span class="sd">                routing key - refer to the specific exchange</span>
<span class="sd">                documentation.  If the routing key is empty and the</span>
<span class="sd">                queue name is empty, the routing key will be the</span>
<span class="sd">                current queue for the channel, which is the last</span>
<span class="sd">                declared queue.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">            arguments: table</span>

<span class="sd">                arguments for binding</span>

<span class="sd">                A set of arguments for the binding.  The syntax and</span>
<span class="sd">                semantics of these arguments depends on the exchange</span>
<span class="sd">                class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.queue_bind_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_queue_bind_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm bind successful</span>

<span class="sd">        This method confirms that the bind was successful.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">queue_unbind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unbind a queue from an exchange</span>

<span class="sd">        This method unbinds a queue from an exchange.</span>

<span class="sd">        RULE:</span>

<span class="sd">            If a unbind fails, the server MUST raise a connection exception.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to unbind.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client MUST either specify a queue name or have</span>
<span class="sd">                    previously declared a queue on the same channel</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client MUST NOT attempt to unbind a queue that</span>
<span class="sd">                    does not exist.</span>

<span class="sd">            exchange: shortstr</span>

<span class="sd">                The name of the exchange to unbind from.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client MUST NOT attempt to unbind a queue from an</span>
<span class="sd">                    exchange that does not exist.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to mean</span>
<span class="sd">                    the default exchange.</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                routing key of binding</span>

<span class="sd">                Specifies the routing key of the binding to unbind.</span>

<span class="sd">            arguments: table</span>

<span class="sd">                arguments of binding</span>

<span class="sd">                Specifies the arguments of the binding to unbind.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Channel.queue_unbind_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_queue_unbind_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm unbind successful</span>

<span class="sd">        This method confirms that the unbind was successful.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">queue_declare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">passive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">durable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">exclusive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto_delete</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Declare queue, create if needed</span>

<span class="sd">        This method creates or checks a queue.  When creating a new</span>
<span class="sd">        queue the client can specify various properties that control</span>
<span class="sd">        the durability of the queue and its contents, and the level of</span>
<span class="sd">        sharing for the queue.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MUST create a default binding for a newly-</span>
<span class="sd">            created queue to the default exchange, which is an</span>
<span class="sd">            exchange of type &#39;direct&#39;.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD support a minimum of 256 queues per</span>
<span class="sd">            virtual host and ideally, impose no limit except as</span>
<span class="sd">            defined by available resources.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The queue name MAY be empty, in which case the</span>
<span class="sd">                    server MUST create a new queue with a unique</span>
<span class="sd">                    generated name and return this to the client in</span>
<span class="sd">                    the Declare-Ok method.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    Queue names starting with &quot;amq.&quot; are reserved for</span>
<span class="sd">                    predeclared and standardised server queues.  If</span>
<span class="sd">                    the queue name starts with &quot;amq.&quot; and the passive</span>
<span class="sd">                    option is False, the server MUST raise a connection</span>
<span class="sd">                    exception with reply code 403 (access refused).</span>

<span class="sd">            passive: boolean</span>

<span class="sd">                do not create queue</span>

<span class="sd">                If set, the server will not create the queue.  The</span>
<span class="sd">                client can use this to check whether a queue exists</span>
<span class="sd">                without modifying the server state.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If set, and the queue does not already exist, the</span>
<span class="sd">                    server MUST respond with a reply code 404 (not</span>
<span class="sd">                    found) and raise a channel exception.</span>

<span class="sd">            durable: boolean</span>

<span class="sd">                request a durable queue</span>

<span class="sd">                If set when creating a new queue, the queue will be</span>
<span class="sd">                marked as durable.  Durable queues remain active when</span>
<span class="sd">                a server restarts. Non-durable queues (transient</span>
<span class="sd">                queues) are purged if/when a server restarts.  Note</span>
<span class="sd">                that durable queues do not necessarily hold persistent</span>
<span class="sd">                messages, although it does not make sense to send</span>
<span class="sd">                persistent messages to a transient queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST recreate the durable queue after a</span>
<span class="sd">                    restart.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST support both durable and transient</span>
<span class="sd">                    queues.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST ignore the durable field if the</span>
<span class="sd">                    queue already exists.</span>

<span class="sd">            exclusive: boolean</span>

<span class="sd">                request an exclusive queue</span>

<span class="sd">                Exclusive queues may only be consumed from by the</span>
<span class="sd">                current connection. Setting the &#39;exclusive&#39; flag</span>
<span class="sd">                always implies &#39;auto-delete&#39;.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST support both exclusive (private)</span>
<span class="sd">                    and non-exclusive (shared) queues.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST raise a channel exception if</span>
<span class="sd">                    &#39;exclusive&#39; is specified and the queue already</span>
<span class="sd">                    exists and is owned by a different connection.</span>

<span class="sd">            auto_delete: boolean</span>

<span class="sd">                auto-delete queue when unused</span>

<span class="sd">                If set, the queue is deleted when all consumers have</span>
<span class="sd">                finished using it. Last consumer can be cancelled</span>
<span class="sd">                either explicitly or because its channel is closed. If</span>
<span class="sd">                there was no consumer ever on the queue, it won&#39;t be</span>
<span class="sd">                deleted.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server SHOULD allow for a reasonable delay</span>
<span class="sd">                    between the point when it determines that a queue</span>
<span class="sd">                    is not being used (or no longer used), and the</span>
<span class="sd">                    point when it deletes the queue.  At the least it</span>
<span class="sd">                    must allow a client to create a queue and then</span>
<span class="sd">                    create a consumer to read from it, with a small</span>
<span class="sd">                    but non-zero delay between these two actions.  The</span>
<span class="sd">                    server should equally allow for clients that may</span>
<span class="sd">                    be disconnected prematurely, and wish to re-</span>
<span class="sd">                    consume from the same queue without losing</span>
<span class="sd">                    messages.  We would recommend a configurable</span>
<span class="sd">                    timeout, with a suitable default value being one</span>
<span class="sd">                    minute.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST ignore the auto-delete field if</span>
<span class="sd">                    the queue already exists.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">            arguments: table</span>

<span class="sd">                arguments for declaration</span>

<span class="sd">                A set of arguments for the declaration. The syntax and</span>
<span class="sd">                semantics of these arguments depends on the server</span>
<span class="sd">                implementation.  This field is ignored if passive is</span>
<span class="sd">                True.</span>

<span class="sd">        Returns a tuple containing 3 items:</span>
<span class="sd">            the name of the queue (essential for automatically-named queues)</span>
<span class="sd">            message count</span>
<span class="sd">            consumer count</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">passive</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">durable</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">exclusive</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">auto_delete</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.queue_declare_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_queue_declare_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirms a queue definition</span>

<span class="sd">        This method confirms a Declare method and confirms the name of</span>
<span class="sd">        the queue, essential for automatically-named queues.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Reports the name of the queue. If the server generated</span>
<span class="sd">                a queue name, this field contains that name.</span>

<span class="sd">            message_count: long</span>

<span class="sd">                number of messages in queue</span>

<span class="sd">                Reports the number of messages in the queue, which</span>
<span class="sd">                will be zero for newly-created queues.</span>

<span class="sd">            consumer_count: long</span>

<span class="sd">                number of consumers</span>

<span class="sd">                Reports the number of active consumers for the queue.</span>
<span class="sd">                Note that consumers can suspend activity</span>
<span class="sd">                (Channel.Flow) in which case they do not appear in</span>
<span class="sd">                this count.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">queue_declare_ok_t</span><span class="p">(</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">(),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">(),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">queue_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="n">if_unused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">if_empty</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a queue</span>

<span class="sd">        This method deletes a queue.  When a queue is deleted any</span>
<span class="sd">        pending messages are sent to a dead-letter queue if this is</span>
<span class="sd">        defined in the server configuration, and all consumers on the</span>
<span class="sd">        queue are cancelled.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD use a dead-letter queue to hold messages</span>
<span class="sd">            that were pending on a deleted queue, and MAY provide</span>
<span class="sd">            facilities for a system administrator to move these</span>
<span class="sd">            messages back to an active queue.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to delete. If the</span>
<span class="sd">                queue name is empty, refers to the current queue for</span>
<span class="sd">                the channel, which is the last declared queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the client did not previously declare a queue,</span>
<span class="sd">                    and the queue name in this method is empty, the</span>
<span class="sd">                    server MUST raise a connection exception with</span>
<span class="sd">                    reply code 530 (not allowed).</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The queue must exist. Attempting to delete a non-</span>
<span class="sd">                    existing queue causes a channel exception.</span>

<span class="sd">            if_unused: boolean</span>

<span class="sd">                delete only if unused</span>

<span class="sd">                If set, the server will only delete the queue if it</span>
<span class="sd">                has no consumers. If the queue has consumers the</span>
<span class="sd">                server does does not delete it but raises a channel</span>
<span class="sd">                exception instead.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST respect the if-unused flag when</span>
<span class="sd">                    deleting a queue.</span>

<span class="sd">            if_empty: boolean</span>

<span class="sd">                delete only if empty</span>

<span class="sd">                If set, the server will only delete the queue if it</span>
<span class="sd">                has no messages. If the queue is not empty the server</span>
<span class="sd">                raises a channel exception.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_unused</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_empty</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span>  <span class="c1"># Channel.queue_delete_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_queue_delete_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm deletion of a queue</span>

<span class="sd">        This method confirms the deletion of a queue.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            message_count: long</span>

<span class="sd">                number of messages purged</span>

<span class="sd">                Reports the number of messages purged.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">queue_purge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Purge a queue</span>

<span class="sd">        This method removes all messages from a queue.  It does not</span>
<span class="sd">        cancel consumers.  Purged messages are deleted without any</span>
<span class="sd">        formal &quot;undo&quot; mechanism.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A call to purge MUST result in an empty queue.</span>

<span class="sd">        RULE:</span>

<span class="sd">            On transacted channels the server MUST not purge messages</span>
<span class="sd">            that have already been sent to a client but not yet</span>
<span class="sd">            acknowledged.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MAY implement a purge queue or log that allows</span>
<span class="sd">            system administrators to recover accidentally-purged</span>
<span class="sd">            messages.  The server SHOULD NOT keep purged messages in</span>
<span class="sd">            the same storage spaces as the live messages since the</span>
<span class="sd">            volumes of purged messages may get very large.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to purge.  If the</span>
<span class="sd">                queue name is empty, refers to the current queue for</span>
<span class="sd">                the channel, which is the last declared queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the client did not previously declare a queue,</span>
<span class="sd">                    and the queue name in this method is empty, the</span>
<span class="sd">                    server MUST raise a connection exception with</span>
<span class="sd">                    reply code 530 (not allowed).</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The queue must exist. Attempting to purge a non-</span>
<span class="sd">                    existing queue causes a channel exception.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">        if nowait is False, returns a message_count</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.queue_purge_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_queue_purge_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirms a queue purge</span>

<span class="sd">        This method confirms the purge of a queue.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            message_count: long</span>

<span class="sd">                number of messages purged</span>

<span class="sd">                Reports the number of messages purged.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">()</span>

    <span class="c1">#############</span>
    <span class="c1">#</span>
    <span class="c1">#  Basic</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># work with basic content</span>
    <span class="c1">#</span>
    <span class="c1"># The Basic class provides methods that support an industry-</span>
    <span class="c1"># standard messaging model.</span>
    <span class="c1">#</span>
    <span class="c1"># GRAMMAR::</span>
    <span class="c1">#</span>
    <span class="c1">#     basic               = C:QOS S:QOS-OK</span>
    <span class="c1">#                         / C:CONSUME S:CONSUME-OK</span>
    <span class="c1">#                         / C:CANCEL S:CANCEL-OK</span>
    <span class="c1">#                         / C:PUBLISH content</span>
    <span class="c1">#                         / S:RETURN content</span>
    <span class="c1">#                         / S:DELIVER content</span>
    <span class="c1">#                         / C:GET ( S:GET-OK content / S:GET-EMPTY )</span>
    <span class="c1">#                         / C:ACK</span>
    <span class="c1">#                         / C:REJECT</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server SHOULD respect the persistent property of basic</span>
    <span class="c1">#     messages and SHOULD make a best-effort to hold persistent</span>
    <span class="c1">#     basic messages on a reliable storage mechanism.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MUST NOT discard a persistent basic message in</span>
    <span class="c1">#     case of a queue overflow. The server MAY use the</span>
    <span class="c1">#     Channel.Flow method to slow or stop a basic message</span>
    <span class="c1">#     publisher when necessary.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MAY overflow non-persistent basic messages to</span>
    <span class="c1">#     persistent storage and MAY discard or dead-letter non-</span>
    <span class="c1">#     persistent basic messages on a priority basis if the queue</span>
    <span class="c1">#     size exceeds some configured limit.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MUST implement at least 2 priority levels for</span>
    <span class="c1">#     basic messages, where priorities 0-4 and 5-9 are treated as</span>
    <span class="c1">#     two distinct levels. The server MAY implement up to 10</span>
    <span class="c1">#     priority levels.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MUST deliver messages of the same priority in</span>
    <span class="c1">#     order irrespective of their individual persistence.</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     The server MUST support both automatic and explicit</span>
    <span class="c1">#     acknowledgements on Basic content.</span>
    <span class="c1">#</span>

    <span class="k">def</span> <span class="nf">basic_ack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Acknowledge one or more messages</span>

<span class="sd">        This method acknowledges one or more messages delivered via</span>
<span class="sd">        the Deliver or Get-Ok methods.  The client can ask to confirm</span>
<span class="sd">        a single message or a set of messages up to and including a</span>
<span class="sd">        specific message.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            delivery_tag: longlong</span>

<span class="sd">                server-assigned delivery tag</span>

<span class="sd">                The server-assigned and channel-specific delivery tag</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The delivery tag is valid only within the channel</span>
<span class="sd">                    from which the message was received.  I.e. a client</span>
<span class="sd">                    MUST NOT receive a message on one channel and then</span>
<span class="sd">                    acknowledge it on another.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST NOT use a zero value for delivery</span>
<span class="sd">                    tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                    messages so far received&quot;.</span>

<span class="sd">            multiple: boolean</span>

<span class="sd">                acknowledge multiple messages</span>

<span class="sd">                If set to True, the delivery tag is treated as &quot;up to</span>
<span class="sd">                and including&quot;, so that the client can acknowledge</span>
<span class="sd">                multiple messages with a single method.  If set to</span>
<span class="sd">                False, the delivery tag refers to a single message.</span>
<span class="sd">                If the multiple field is True, and the delivery tag</span>
<span class="sd">                is zero, tells the server to acknowledge all</span>
<span class="sd">                outstanding mesages.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST validate that a non-zero delivery-</span>
<span class="sd">                    tag refers to an delivered message, and raise a</span>
<span class="sd">                    channel exception if this is not the case.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_longlong</span><span class="p">(</span><span class="n">delivery_tag</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">multiple</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">basic_cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">consumer_tag</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;End a queue consumer</span>

<span class="sd">        This method cancels a consumer. This does not affect already</span>
<span class="sd">        delivered messages, but it does mean the server will not send</span>
<span class="sd">        any more messages for that consumer.  The client may receive</span>
<span class="sd">        an abitrary number of messages in between sending the cancel</span>
<span class="sd">        method and receiving the cancel-ok reply.</span>

<span class="sd">        RULE:</span>

<span class="sd">            If the queue no longer exists when the client sends a</span>
<span class="sd">            cancel command, or the consumer has been cancelled for</span>
<span class="sd">            other reasons, this command has no effect.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            consumer_tag: shortstr</span>

<span class="sd">                consumer tag</span>

<span class="sd">                Identifier for the consumer, valid within the current</span>
<span class="sd">                connection.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The consumer tag is valid only within the channel</span>
<span class="sd">                    from which the consumer was created. I.e. a client</span>
<span class="sd">                    MUST NOT create a consumer in one channel and then</span>
<span class="sd">                    use it in another.</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.basic_cancel_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_basic_cancel_notify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Consumer cancelled by server.</span>

<span class="sd">        Most likely the queue was deleted.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">consumer_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_cancel</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
            <span class="n">callback</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConsumerCancelled</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">,</span> <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_basic_cancel_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a cancelled consumer</span>

<span class="sd">        This method confirms that the cancellation was completed.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            consumer_tag: shortstr</span>

<span class="sd">                consumer tag</span>

<span class="sd">                Identifier for the consumer, valid within the current</span>
<span class="sd">                connection.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The consumer tag is valid only within the channel</span>
<span class="sd">                    from which the consumer was created. I.e. a client</span>
<span class="sd">                    MUST NOT create a consumer in one channel and then</span>
<span class="sd">                    use it in another.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">consumer_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_cancel</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">consumer_tag</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">basic_consume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">consumer_tag</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">no_local</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">no_ack</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">exclusive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on_cancel</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Start a queue consumer</span>

<span class="sd">        This method asks the server to start a &quot;consumer&quot;, which is a</span>
<span class="sd">        transient request for messages from a specific queue.</span>
<span class="sd">        Consumers last as long as the channel they were created on, or</span>
<span class="sd">        until the client cancels them.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD support at least 16 consumers per queue,</span>
<span class="sd">            unless the queue was declared as private, and ideally,</span>
<span class="sd">            impose no limit except as defined by available resources.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to consume from.  If</span>
<span class="sd">                the queue name is null, refers to the current queue</span>
<span class="sd">                for the channel, which is the last declared queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the client did not previously declare a queue,</span>
<span class="sd">                    and the queue name in this method is empty, the</span>
<span class="sd">                    server MUST raise a connection exception with</span>
<span class="sd">                    reply code 530 (not allowed).</span>

<span class="sd">            consumer_tag: shortstr</span>

<span class="sd">                Specifies the identifier for the consumer. The</span>
<span class="sd">                consumer tag is local to a connection, so two clients</span>
<span class="sd">                can use the same consumer tags. If this field is empty</span>
<span class="sd">                the server will generate a unique tag.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The tag MUST NOT refer to an existing consumer. If</span>
<span class="sd">                    the client attempts to create two consumers with</span>
<span class="sd">                    the same non-empty tag the server MUST raise a</span>
<span class="sd">                    connection exception with reply code 530 (not</span>
<span class="sd">                    allowed).</span>

<span class="sd">            no_local: boolean</span>

<span class="sd">                do not deliver own messages</span>

<span class="sd">                If the no-local field is set the server will not send</span>
<span class="sd">                messages to the client that published them.</span>

<span class="sd">            no_ack: boolean</span>

<span class="sd">                no acknowledgement needed</span>

<span class="sd">                If this field is set the server does not expect</span>
<span class="sd">                acknowledgments for messages.  That is, when a message</span>
<span class="sd">                is delivered to the client the server automatically and</span>
<span class="sd">                silently acknowledges it on behalf of the client.  This</span>
<span class="sd">                functionality increases performance but at the cost of</span>
<span class="sd">                reliability.  Messages can get lost if a client dies</span>
<span class="sd">                before it can deliver them to the application.</span>

<span class="sd">            exclusive: boolean</span>

<span class="sd">                request exclusive access</span>

<span class="sd">                Request exclusive consumer access, meaning only this</span>
<span class="sd">                consumer can access the queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the server cannot grant exclusive access to the</span>
<span class="sd">                    queue when asked, - because there are other</span>
<span class="sd">                    consumers active - it MUST raise a channel</span>
<span class="sd">                    exception with return code 403 (access refused).</span>

<span class="sd">            nowait: boolean</span>

<span class="sd">                do not send a reply method</span>

<span class="sd">                If set, the server will not respond to the method. The</span>
<span class="sd">                client should not wait for a reply method.  If the</span>
<span class="sd">                server could not complete the method it will raise a</span>
<span class="sd">                channel or connection exception.</span>

<span class="sd">            callback: Python callable</span>

<span class="sd">                function/method called with each delivered message</span>

<span class="sd">                For each message delivered by the broker, the</span>
<span class="sd">                callable will be called with a Message object</span>
<span class="sd">                as the single argument.  If no callable is specified,</span>
<span class="sd">                messages are quietly discarded, no_ack should probably</span>
<span class="sd">                be set to True in that case.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_local</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_ack</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">exclusive</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span> <span class="ow">or</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="n">consumer_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.basic_consume_ok</span>
            <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">[</span><span class="n">consumer_tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>

        <span class="k">if</span> <span class="n">on_cancel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span><span class="p">[</span><span class="n">consumer_tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">on_cancel</span>
        <span class="k">if</span> <span class="n">no_ack</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">consumer_tag</span>

    <span class="k">def</span> <span class="nf">_basic_consume_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a new consumer</span>

<span class="sd">        The server provides the client with a consumer tag, which is</span>
<span class="sd">        used by the client for methods called on the consumer at a</span>
<span class="sd">        later stage.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            consumer_tag: shortstr</span>

<span class="sd">                Holds the consumer tag specified by the client or</span>
<span class="sd">                provided by the server.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_basic_deliver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Notify the client of a consumer message</span>

<span class="sd">        This method delivers a message to the client, via a consumer.</span>
<span class="sd">        In the asynchronous message delivery model, the client starts</span>
<span class="sd">        a consumer using the Consume method, then the server responds</span>
<span class="sd">        with Deliver methods as and when messages arrive for that</span>
<span class="sd">        consumer.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD track the number of times a message has</span>
<span class="sd">            been delivered to clients and when a message is</span>
<span class="sd">            redelivered a certain number of times - e.g. 5 times -</span>
<span class="sd">            without being acknowledged, the server SHOULD consider the</span>
<span class="sd">            message to be unprocessable (possibly causing client</span>
<span class="sd">            applications to abort), and move the message to a dead</span>
<span class="sd">            letter queue.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            consumer_tag: shortstr</span>

<span class="sd">                consumer tag</span>

<span class="sd">                Identifier for the consumer, valid within the current</span>
<span class="sd">                connection.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The consumer tag is valid only within the channel</span>
<span class="sd">                    from which the consumer was created. I.e. a client</span>
<span class="sd">                    MUST NOT create a consumer in one channel and then</span>
<span class="sd">                    use it in another.</span>

<span class="sd">            delivery_tag: longlong</span>

<span class="sd">                server-assigned delivery tag</span>

<span class="sd">                The server-assigned and channel-specific delivery tag</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The delivery tag is valid only within the channel</span>
<span class="sd">                    from which the message was received.  I.e. a client</span>
<span class="sd">                    MUST NOT receive a message on one channel and then</span>
<span class="sd">                    acknowledge it on another.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST NOT use a zero value for delivery</span>
<span class="sd">                    tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                    messages so far received&quot;.</span>

<span class="sd">            redelivered: boolean</span>

<span class="sd">                message is being redelivered</span>

<span class="sd">                This indicates that the message has been previously</span>
<span class="sd">                delivered to this or another client.</span>

<span class="sd">            exchange: shortstr</span>

<span class="sd">                Specifies the name of the exchange that the message</span>
<span class="sd">                was originally published to.</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                Message routing key</span>

<span class="sd">                Specifies the routing key name specified when the</span>
<span class="sd">                message was published.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">consumer_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">delivery_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longlong</span><span class="p">()</span>
        <span class="n">redelivered</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="n">exchange</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">routing_key</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">delivery_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;consumer_tag&#39;</span><span class="p">:</span> <span class="n">consumer_tag</span><span class="p">,</span>
            <span class="s1">&#39;delivery_tag&#39;</span><span class="p">:</span> <span class="n">delivery_tag</span><span class="p">,</span>
            <span class="s1">&#39;redelivered&#39;</span><span class="p">:</span> <span class="n">redelivered</span><span class="p">,</span>
            <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
            <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="n">routing_key</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">[</span><span class="n">consumer_tag</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fun</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">basic_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">no_ack</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Direct access to a queue</span>

<span class="sd">        This method provides a direct access to the messages in a</span>
<span class="sd">        queue using a synchronous dialogue that is designed for</span>
<span class="sd">        specific types of application where synchronous functionality</span>
<span class="sd">        is more important than performance.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            queue: shortstr</span>

<span class="sd">                Specifies the name of the queue to consume from.  If</span>
<span class="sd">                the queue name is null, refers to the current queue</span>
<span class="sd">                for the channel, which is the last declared queue.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the client did not previously declare a queue,</span>
<span class="sd">                    and the queue name in this method is empty, the</span>
<span class="sd">                    server MUST raise a connection exception with</span>
<span class="sd">                    reply code 530 (not allowed).</span>

<span class="sd">            no_ack: boolean</span>

<span class="sd">                no acknowledgement needed</span>

<span class="sd">                If this field is set the server does not expect</span>
<span class="sd">                acknowledgments for messages.  That is, when a message</span>
<span class="sd">                is delivered to the client the server automatically and</span>
<span class="sd">                silently acknowledges it on behalf of the client.  This</span>
<span class="sd">                functionality increases performance but at the cost of</span>
<span class="sd">                reliability.  Messages can get lost if a client dies</span>
<span class="sd">                before it can deliver them to the application.</span>

<span class="sd">        Non-blocking, returns a message object, or None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_ack</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">),</span>  <span class="c1"># Channel.basic_get_ok</span>
            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">72</span><span class="p">),</span>  <span class="c1"># Channel.basic_get_empty</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_basic_get_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Indicate no messages available</span>

<span class="sd">        This method tells the client that the queue has no messages</span>
<span class="sd">        available for the client.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            cluster_id: shortstr</span>

<span class="sd">                Cluster id</span>

<span class="sd">                For use by cluster applications, should not be used by</span>
<span class="sd">                client applications.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cluster_id</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>  <span class="c1"># noqa</span>

    <span class="k">def</span> <span class="nf">_basic_get_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Provide client with a message</span>

<span class="sd">        This method delivers a message to the client following a get</span>
<span class="sd">        method.  A message delivered by &#39;get-ok&#39; must be acknowledged</span>
<span class="sd">        unless the no-ack option was set in the get method.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            delivery_tag: longlong</span>

<span class="sd">                server-assigned delivery tag</span>

<span class="sd">                The server-assigned and channel-specific delivery tag</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The delivery tag is valid only within the channel</span>
<span class="sd">                    from which the message was received.  I.e. a client</span>
<span class="sd">                    MUST NOT receive a message on one channel and then</span>
<span class="sd">                    acknowledge it on another.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST NOT use a zero value for delivery</span>
<span class="sd">                    tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                    messages so far received&quot;.</span>

<span class="sd">            redelivered: boolean</span>

<span class="sd">                message is being redelivered</span>

<span class="sd">                This indicates that the message has been previously</span>
<span class="sd">                delivered to this or another client.</span>

<span class="sd">            exchange: shortstr</span>

<span class="sd">                Specifies the name of the exchange that the message</span>
<span class="sd">                was originally published to.  If empty, the message</span>
<span class="sd">                was published to the default exchange.</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                Message routing key</span>

<span class="sd">                Specifies the routing key name specified when the</span>
<span class="sd">                message was published.</span>

<span class="sd">            message_count: long</span>

<span class="sd">                number of messages pending</span>

<span class="sd">                This field reports the number of messages pending on</span>
<span class="sd">                the queue, excluding the message being delivered.</span>
<span class="sd">                Note that this figure is indicative, not reliable, and</span>
<span class="sd">                can change arbitrarily as messages are added to the</span>
<span class="sd">                queue and removed by other clients.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delivery_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longlong</span><span class="p">()</span>
        <span class="n">redelivered</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="n">exchange</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">routing_key</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">message_count</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">()</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">delivery_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;delivery_tag&#39;</span><span class="p">:</span> <span class="n">delivery_tag</span><span class="p">,</span>
            <span class="s1">&#39;redelivered&#39;</span><span class="p">:</span> <span class="n">redelivered</span><span class="p">,</span>
            <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="n">exchange</span><span class="p">,</span>
            <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="n">routing_key</span><span class="p">,</span>
            <span class="s1">&#39;message_count&#39;</span><span class="p">:</span> <span class="n">message_count</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">msg</span>

    <span class="k">def</span> <span class="nf">_basic_publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                       <span class="n">mandatory</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Publish a message</span>

<span class="sd">        This method publishes a message to a specific exchange. The</span>
<span class="sd">        message will be routed to queues as defined by the exchange</span>
<span class="sd">        configuration and distributed to any active consumers when the</span>
<span class="sd">        transaction, if any, is committed.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            exchange: shortstr</span>

<span class="sd">                Specifies the name of the exchange to publish to.  The</span>
<span class="sd">                exchange name can be empty, meaning the default</span>
<span class="sd">                exchange.  If the exchange name is specified, and that</span>
<span class="sd">                exchange does not exist, the server will raise a</span>
<span class="sd">                channel exception.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST accept a blank exchange name to</span>
<span class="sd">                    mean the default exchange.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The exchange MAY refuse basic content in which</span>
<span class="sd">                    case it MUST raise a channel exception with reply</span>
<span class="sd">                    code 540 (not implemented).</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                Message routing key</span>

<span class="sd">                Specifies the routing key for the message.  The</span>
<span class="sd">                routing key is used for routing messages depending on</span>
<span class="sd">                the exchange configuration.</span>

<span class="sd">            mandatory: boolean</span>

<span class="sd">                indicate mandatory routing</span>

<span class="sd">                This flag tells the server how to react if the message</span>
<span class="sd">                cannot be routed to a queue.  If this flag is True, the</span>
<span class="sd">                server will return an unroutable message with a Return</span>
<span class="sd">                method.  If this flag is False, the server silently</span>
<span class="sd">                drops the message.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server SHOULD implement the mandatory flag.</span>

<span class="sd">            immediate: boolean</span>

<span class="sd">                request immediate delivery</span>

<span class="sd">                This flag tells the server how to react if the message</span>
<span class="sd">                cannot be routed to a queue consumer immediately.  If</span>
<span class="sd">                this flag is set, the server will return an</span>
<span class="sd">                undeliverable message with a Return method. If this</span>
<span class="sd">                flag is zero, the server will queue the message, but</span>
<span class="sd">                with no guarantee that it will ever be consumed.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server SHOULD implement the immediate flag.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">mandatory</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">immediate</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="n">basic_publish</span> <span class="o">=</span> <span class="n">_basic_publish</span>

    <span class="k">def</span> <span class="nf">basic_publish_confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm_select</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basic_publish</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Basic.Ack / Basic.Nack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">([(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">120</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">basic_qos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefetch_size</span><span class="p">,</span> <span class="n">prefetch_count</span><span class="p">,</span> <span class="n">a_global</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Specify quality of service</span>

<span class="sd">        This method requests a specific quality of service.  The QoS</span>
<span class="sd">        can be specified for the current channel or for all channels</span>
<span class="sd">        on the connection.  The particular properties and semantics of</span>
<span class="sd">        a qos method always depend on the content class semantics.</span>
<span class="sd">        Though the qos method could in principle apply to both peers,</span>
<span class="sd">        it is currently meaningful only for the server.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            prefetch_size: long</span>

<span class="sd">                prefetch window in octets</span>

<span class="sd">                The client can request that messages be sent in</span>
<span class="sd">                advance so that when the client finishes processing a</span>
<span class="sd">                message, the following message is already held</span>
<span class="sd">                locally, rather than needing to be sent down the</span>
<span class="sd">                channel.  Prefetching gives a performance improvement.</span>
<span class="sd">                This field specifies the prefetch window size in</span>
<span class="sd">                octets.  The server will send a message in advance if</span>
<span class="sd">                it is equal to or smaller in size than the available</span>
<span class="sd">                prefetch size (and also falls into other prefetch</span>
<span class="sd">                limits). May be set to zero, meaning &quot;no specific</span>
<span class="sd">                limit&quot;, although other prefetch limits may still</span>
<span class="sd">                apply. The prefetch-size is ignored if the no-ack</span>
<span class="sd">                option is set.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST ignore this setting when the</span>
<span class="sd">                    client is not processing any messages - i.e. the</span>
<span class="sd">                    prefetch size does not limit the transfer of</span>
<span class="sd">                    single messages to a client, only the sending in</span>
<span class="sd">                    advance of more messages while the client still</span>
<span class="sd">                    has one or more unacknowledged messages.</span>

<span class="sd">            prefetch_count: short</span>

<span class="sd">                prefetch window in messages</span>

<span class="sd">                Specifies a prefetch window in terms of whole</span>
<span class="sd">                messages.  This field may be used in combination with</span>
<span class="sd">                the prefetch-size field; a message will only be sent</span>
<span class="sd">                in advance if both prefetch windows (and those at the</span>
<span class="sd">                channel and connection level) allow it. The prefetch-</span>
<span class="sd">                count is ignored if the no-ack option is set.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MAY send less data in advance than</span>
<span class="sd">                    allowed by the client&#39;s specified prefetch windows</span>
<span class="sd">                    but it MUST NOT send more.</span>

<span class="sd">            a_global: boolean</span>

<span class="sd">                apply to entire connection</span>

<span class="sd">                By default the QoS settings apply to the current</span>
<span class="sd">                channel only.  If this field is set, they are applied</span>
<span class="sd">                to the entire connection.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_long</span><span class="p">(</span><span class="n">prefetch_size</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">prefetch_count</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">a_global</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.basic_qos_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_basic_qos_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm the requested qos</span>

<span class="sd">        This method tells the client that the requested QoS levels</span>
<span class="sd">        could be handled by the server.  The requested QoS applies to</span>
<span class="sd">        all active consumers until a new QoS is defined.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">basic_recover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requeue</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Redeliver unacknowledged messages</span>

<span class="sd">        This method asks the broker to redeliver all unacknowledged</span>
<span class="sd">        messages on a specified channel. Zero or more messages may be</span>
<span class="sd">        redelivered.  This method is only allowed on non-transacted</span>
<span class="sd">        channels.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MUST set the redelivered flag on all messages</span>
<span class="sd">            that are resent.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MUST raise a channel exception if this is</span>
<span class="sd">            called on a transacted channel.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            requeue: boolean</span>

<span class="sd">                requeue the message</span>

<span class="sd">                If this field is False, the message will be redelivered</span>
<span class="sd">                to the original recipient.  If this field is True, the</span>
<span class="sd">                server will attempt to requeue the message,</span>
<span class="sd">                potentially then delivering it to an alternative</span>
<span class="sd">                subscriber.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">basic_recover_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requeue</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_basic_recover_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;In 0-9-1 the deprecated recover solicits a response.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">basic_reject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">requeue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reject an incoming message</span>

<span class="sd">        This method allows a client to reject a message.  It can be</span>
<span class="sd">        used to interrupt and cancel large incoming messages, or</span>
<span class="sd">        return untreatable messages to their original queue.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD be capable of accepting and process the</span>
<span class="sd">            Reject method while sending message content with a Deliver</span>
<span class="sd">            or Get-Ok method.  I.e. the server should read and process</span>
<span class="sd">            incoming methods while sending output frames.  To cancel a</span>
<span class="sd">            partially-send content, the server sends a content body</span>
<span class="sd">            frame of size 1 (i.e. with no data except the frame-end</span>
<span class="sd">            octet).</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server SHOULD interpret this method as meaning that</span>
<span class="sd">            the client is unable to process the message at this time.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A client MUST NOT use this method as a means of selecting</span>
<span class="sd">            messages to process.  A rejected message MAY be discarded</span>
<span class="sd">            or dead-lettered, not necessarily passed to another</span>
<span class="sd">            client.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            delivery_tag: longlong</span>

<span class="sd">                server-assigned delivery tag</span>

<span class="sd">                The server-assigned and channel-specific delivery tag</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The delivery tag is valid only within the channel</span>
<span class="sd">                    from which the message was received.  I.e. a client</span>
<span class="sd">                    MUST NOT receive a message on one channel and then</span>
<span class="sd">                    acknowledge it on another.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST NOT use a zero value for delivery</span>
<span class="sd">                    tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                    messages so far received&quot;.</span>

<span class="sd">            requeue: boolean</span>

<span class="sd">                requeue the message</span>

<span class="sd">                If this field is False, the message will be discarded.</span>
<span class="sd">                If this field is True, the server will attempt to</span>
<span class="sd">                requeue the message.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MUST NOT deliver the message to the</span>
<span class="sd">                    same client within the context of the current</span>
<span class="sd">                    channel.  The recommended strategy is to attempt</span>
<span class="sd">                    to deliver the message to an alternative consumer,</span>
<span class="sd">                    and if that is not possible, to move the message</span>
<span class="sd">                    to a dead-letter queue.  The server MAY use more</span>
<span class="sd">                    sophisticated tracking to hold the message on the</span>
<span class="sd">                    queue and redeliver it to the same client at a</span>
<span class="sd">                    later stage.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_longlong</span><span class="p">(</span><span class="n">delivery_tag</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_basic_return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a failed message</span>

<span class="sd">        This method returns an undeliverable message that was</span>
<span class="sd">        published with the &quot;immediate&quot; flag set, or an unroutable</span>
<span class="sd">        message published with the &quot;mandatory&quot; flag set. The reply</span>
<span class="sd">        code and text provide information about the reason that the</span>
<span class="sd">        message was undeliverable.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reply_code: short</span>

<span class="sd">                The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">                RFC 011.</span>

<span class="sd">            reply_text: shortstr</span>

<span class="sd">                The localised reply text.  This text can be logged as an</span>
<span class="sd">                aid to resolving issues.</span>

<span class="sd">            exchange: shortstr</span>

<span class="sd">                Specifies the name of the exchange that the message</span>
<span class="sd">                was originally published to.</span>

<span class="sd">            routing_key: shortstr</span>

<span class="sd">                Message routing key</span>

<span class="sd">                Specifies the routing key name specified when the</span>
<span class="sd">                message was published.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">returned_messages</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">basic_return_t</span><span class="p">(</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">(),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">(),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">(),</span>
            <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">(),</span>
            <span class="n">msg</span><span class="p">,</span>
        <span class="p">))</span>

    <span class="c1">#############</span>
    <span class="c1">#</span>
    <span class="c1">#  Tx</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># work with standard transactions</span>
    <span class="c1">#</span>
    <span class="c1"># Standard transactions provide so-called &quot;1.5 phase commit&quot;.  We</span>
    <span class="c1"># can ensure that work is never lost, but there is a chance of</span>
    <span class="c1"># confirmations being lost, so that messages may be resent.</span>
    <span class="c1"># Applications that use standard transactions must be able to</span>
    <span class="c1"># detect and ignore duplicate messages.</span>
    <span class="c1">#</span>
    <span class="c1"># GRAMMAR::</span>
    <span class="c1">#</span>
    <span class="c1">#     tx                  = C:SELECT S:SELECT-OK</span>
    <span class="c1">#                         / C:COMMIT S:COMMIT-OK</span>
    <span class="c1">#                         / C:ROLLBACK S:ROLLBACK-OK</span>
    <span class="c1">#</span>
    <span class="c1"># RULE:</span>
    <span class="c1">#</span>
    <span class="c1">#     An client using standard transactions SHOULD be able to</span>
    <span class="c1">#     track all messages received within a reasonable period, and</span>
    <span class="c1">#     thus detect and reject duplicates of the same message. It</span>
    <span class="c1">#     SHOULD NOT pass these to the application layer.</span>
    <span class="c1">#</span>
    <span class="c1">#</span>

    <span class="k">def</span> <span class="nf">tx_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commit the current transaction</span>

<span class="sd">        This method commits all messages published and acknowledged in</span>
<span class="sd">        the current transaction.  A new transaction starts immediately</span>
<span class="sd">        after a commit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.tx_commit_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_tx_commit_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a successful commit</span>

<span class="sd">        This method confirms to the client that the commit succeeded.</span>
<span class="sd">        Note that if a commit fails, the server raises a channel</span>
<span class="sd">        exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">tx_rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Abandon the current transaction</span>

<span class="sd">        This method abandons all messages published and acknowledged</span>
<span class="sd">        in the current transaction.  A new transaction starts</span>
<span class="sd">        immediately after a rollback.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.tx_rollback_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_tx_rollback_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a successful rollback</span>

<span class="sd">        This method confirms to the client that the rollback</span>
<span class="sd">        succeeded. Note that if an rollback fails, the server raises a</span>
<span class="sd">        channel exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">tx_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select standard transaction mode</span>

<span class="sd">        This method sets the channel to use standard transactions.</span>
<span class="sd">        The client must use this method at least once on a channel</span>
<span class="sd">        before using the Commit or Rollback methods.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.tx_select_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_tx_select_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm transaction mode</span>

<span class="sd">        This method confirms to the client that the channel was</span>
<span class="sd">        successfully set to use standard transactions.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">confirm_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enables publisher confirms for this channel (an RabbitMQ</span>
<span class="sd">        extension).</span>

<span class="sd">        Can now be used if the channel is in transactional mode.</span>

<span class="sd">        :param nowait:</span>
<span class="sd">            If set, the server will not respond to the method.</span>
<span class="sd">            The client should not wait for a reply method. If the</span>
<span class="sd">            server could not complete the method it will raise a channel</span>
<span class="sd">            or connection exception.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">85</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Confirm.select_ok</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_confirm_select_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;With this method the broker confirms to the client that</span>
<span class="sd">        the channel is now using publisher confirms.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_basic_ack_recv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">delivery_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longlong</span><span class="p">()</span>
        <span class="n">multiple</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_callbacks</span><span class="p">(</span><span class="s1">&#39;basic_ack&#39;</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">multiple</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_apply_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">callback</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">callback</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="p">[</span><span class="n">event</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">_basic_nack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">delivery_tag</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longlong</span><span class="p">()</span>
        <span class="n">multiple</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="n">requeue</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_bit</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_callbacks</span><span class="p">(</span>
                <span class="s1">&#39;basic_nack&#39;</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">multiple</span><span class="p">,</span> <span class="n">requeue</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">NotConfirmed</span><span class="p">(</span><span class="n">delivery_tag</span><span class="p">,</span> <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span> <span class="s1">&#39;basic.nack&#39;</span><span class="p">)</span>

    <span class="n">_METHOD_MAP</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_open_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span> <span class="n">_flow</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span> <span class="n">_flow_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">):</span> <span class="n">_close</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">41</span><span class="p">):</span> <span class="n">_close_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_exchange_declare_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span> <span class="n">_exchange_delete_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span> <span class="n">_exchange_bind_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">51</span><span class="p">):</span> <span class="n">_exchange_unbind_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_queue_declare_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span> <span class="n">_queue_bind_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span> <span class="n">_queue_purge_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">41</span><span class="p">):</span> <span class="n">_queue_delete_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">):</span> <span class="n">_queue_unbind_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_basic_qos_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span> <span class="n">_basic_consume_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span> <span class="n">_basic_cancel_notify</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span> <span class="n">_basic_cancel_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span> <span class="n">_basic_return</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span> <span class="n">_basic_deliver</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">):</span> <span class="n">_basic_get_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">72</span><span class="p">):</span> <span class="n">_basic_get_empty</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">):</span> <span class="n">_basic_ack_recv</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">120</span><span class="p">):</span> <span class="n">_basic_nack</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">111</span><span class="p">):</span> <span class="n">_basic_recover_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_confirm_select_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span> <span class="n">_tx_select_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span> <span class="n">_tx_commit_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span> <span class="n">_tx_rollback_ok</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">_IMMEDIATE_METHODS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>  <span class="c1"># basic_return</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.Channel">Channel</a></li>
          <li>IoticAgent.third.amqp.abstract_channel.AbstractChannel</li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, connection, channel_id=None, auto_encode_decode=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a channel bound to a connection and using the specified
numeric channel_id, and open on the server.</p>
<p>The 'auto_encode_decode' parameter (defaults to True), indicates
whether the library should attempt to encode/decode the body
of Messages to/from a Unicode string. The 'content_encoding' property
of the message is used if set, otherwise encoding default to utf-8. If
decode raises an Exception, the message body is left as plain bytes. If
the input is not unicode, it is also left as-is.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">channel_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_encode_decode</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a channel bound to a connection and using the specified</span>
<span class="sd">    numeric channel_id, and open on the server.</span>
<span class="sd">    The &#39;auto_encode_decode&#39; parameter (defaults to True), indicates</span>
<span class="sd">    whether the library should attempt to encode/decode the body</span>
<span class="sd">    of Messages to/from a Unicode string. The &#39;content_encoding&#39; property</span>
<span class="sd">    of the message is used if set, otherwise encoding default to utf-8. If</span>
<span class="sd">    decode raises an Exception, the message body is left as plain bytes. If</span>
<span class="sd">    the input is not unicode, it is also left as-is.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">channel_id</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">_claim_channel_id</span><span class="p">(</span><span class="n">channel_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">channel_id</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">_get_free_channel_id</span><span class="p">()</span>
    <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;using channel_id: </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Channel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c1"># Flow control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">returned_messages</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="o">=</span> <span class="n">auto_encode_decode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="c1"># set first time basic_publish_confirm is called</span>
    <span class="c1"># and publisher confirms are enabled for this channel.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">confirm_publish</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">basic_publish</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basic_publish_confirm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x_open</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_ack">
    <p>def <span class="ident">basic_ack</span>(</p><p>self, delivery_tag, multiple=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Acknowledge one or more messages</p>
<p>This method acknowledges one or more messages delivered via
the Deliver or Get-Ok methods.  The client can ask to confirm
a single message or a set of messages up to and including a
specific message.</p>
<p>PARAMETERS:
    delivery_tag: longlong</p>
<div class="codehilite"><pre>    server-assigned delivery tag

    The server-assigned and channel-specific delivery tag

    RULE:

        The delivery tag is valid only within the channel
        from which the message was received.  I.e. a client
        MUST NOT receive a message on one channel and then
        acknowledge it on another.

    RULE:

        The server MUST NOT use a zero value for delivery
        tags.  Zero is reserved for client use, meaning &quot;all
        messages so far received&quot;.

multiple: boolean

    acknowledge multiple messages

    If set to True, the delivery tag is treated as &quot;up to
    and including&quot;, so that the client can acknowledge
    multiple messages with a single method.  If set to
    False, the delivery tag refers to a single message.
    If the multiple field is True, and the delivery tag
    is zero, tells the server to acknowledge all
    outstanding mesages.

    RULE:

        The server MUST validate that a non-zero delivery-
        tag refers to an delivered message, and raise a
        channel exception if this is not the case.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_ack', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_ack" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_ack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Acknowledge one or more messages</span>
<span class="sd">    This method acknowledges one or more messages delivered via</span>
<span class="sd">    the Deliver or Get-Ok methods.  The client can ask to confirm</span>
<span class="sd">    a single message or a set of messages up to and including a</span>
<span class="sd">    specific message.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        delivery_tag: longlong</span>
<span class="sd">            server-assigned delivery tag</span>
<span class="sd">            The server-assigned and channel-specific delivery tag</span>
<span class="sd">            RULE:</span>
<span class="sd">                The delivery tag is valid only within the channel</span>
<span class="sd">                from which the message was received.  I.e. a client</span>
<span class="sd">                MUST NOT receive a message on one channel and then</span>
<span class="sd">                acknowledge it on another.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST NOT use a zero value for delivery</span>
<span class="sd">                tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                messages so far received&quot;.</span>
<span class="sd">        multiple: boolean</span>
<span class="sd">            acknowledge multiple messages</span>
<span class="sd">            If set to True, the delivery tag is treated as &quot;up to</span>
<span class="sd">            and including&quot;, so that the client can acknowledge</span>
<span class="sd">            multiple messages with a single method.  If set to</span>
<span class="sd">            False, the delivery tag refers to a single message.</span>
<span class="sd">            If the multiple field is True, and the delivery tag</span>
<span class="sd">            is zero, tells the server to acknowledge all</span>
<span class="sd">            outstanding mesages.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST validate that a non-zero delivery-</span>
<span class="sd">                tag refers to an delivered message, and raise a</span>
<span class="sd">                channel exception if this is not the case.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_longlong</span><span class="p">(</span><span class="n">delivery_tag</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">multiple</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_cancel">
    <p>def <span class="ident">basic_cancel</span>(</p><p>self, consumer_tag, nowait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>End a queue consumer</p>
<p>This method cancels a consumer. This does not affect already
delivered messages, but it does mean the server will not send
any more messages for that consumer.  The client may receive
an abitrary number of messages in between sending the cancel
method and receiving the cancel-ok reply.</p>
<p>RULE:</p>
<div class="codehilite"><pre>If the queue no longer exists when the client sends a
cancel command, or the consumer has been cancelled for
other reasons, this command has no effect.
</pre></div>


<p>PARAMETERS:
    consumer_tag: shortstr</p>
<div class="codehilite"><pre>    consumer tag

    Identifier for the consumer, valid within the current
    connection.

    RULE:

        The consumer tag is valid only within the channel
        from which the consumer was created. I.e. a client
        MUST NOT create a consumer in one channel and then
        use it in another.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_cancel', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_cancel" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">consumer_tag</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;End a queue consumer</span>
<span class="sd">    This method cancels a consumer. This does not affect already</span>
<span class="sd">    delivered messages, but it does mean the server will not send</span>
<span class="sd">    any more messages for that consumer.  The client may receive</span>
<span class="sd">    an abitrary number of messages in between sending the cancel</span>
<span class="sd">    method and receiving the cancel-ok reply.</span>
<span class="sd">    RULE:</span>
<span class="sd">        If the queue no longer exists when the client sends a</span>
<span class="sd">        cancel command, or the consumer has been cancelled for</span>
<span class="sd">        other reasons, this command has no effect.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        consumer_tag: shortstr</span>
<span class="sd">            consumer tag</span>
<span class="sd">            Identifier for the consumer, valid within the current</span>
<span class="sd">            connection.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The consumer tag is valid only within the channel</span>
<span class="sd">                from which the consumer was created. I.e. a client</span>
<span class="sd">                MUST NOT create a consumer in one channel and then</span>
<span class="sd">                use it in another.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.basic_cancel_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_consume">
    <p>def <span class="ident">basic_consume</span>(</p><p>self, queue=&#39;&#39;, consumer_tag=&#39;&#39;, no_local=False, no_ack=False, exclusive=False, nowait=False, callback=None, arguments=None, on_cancel=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Start a queue consumer</p>
<p>This method asks the server to start a "consumer", which is a
transient request for messages from a specific queue.
Consumers last as long as the channel they were created on, or
until the client cancels them.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD support at least 16 consumers per queue,
unless the queue was declared as private, and ideally,
impose no limit except as defined by available resources.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to consume from.  If
    the queue name is null, refers to the current queue
    for the channel, which is the last declared queue.

    RULE:

        If the client did not previously declare a queue,
        and the queue name in this method is empty, the
        server MUST raise a connection exception with
        reply code 530 (not allowed).

consumer_tag: shortstr

    Specifies the identifier for the consumer. The
    consumer tag is local to a connection, so two clients
    can use the same consumer tags. If this field is empty
    the server will generate a unique tag.

    RULE:

        The tag MUST NOT refer to an existing consumer. If
        the client attempts to create two consumers with
        the same non-empty tag the server MUST raise a
        connection exception with reply code 530 (not
        allowed).

no_local: boolean

    do not deliver own messages

    If the no-local field is set the server will not send
    messages to the client that published them.

no_ack: boolean

    no acknowledgement needed

    If this field is set the server does not expect
    acknowledgments for messages.  That is, when a message
    is delivered to the client the server automatically and
    silently acknowledges it on behalf of the client.  This
    functionality increases performance but at the cost of
    reliability.  Messages can get lost if a client dies
    before it can deliver them to the application.

exclusive: boolean

    request exclusive access

    Request exclusive consumer access, meaning only this
    consumer can access the queue.

    RULE:

        If the server cannot grant exclusive access to the
        queue when asked, - because there are other
        consumers active - it MUST raise a channel
        exception with return code 403 (access refused).

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.

callback: Python callable

    function/method called with each delivered message

    For each message delivered by the broker, the
    callable will be called with a Message object
    as the single argument.  If no callable is specified,
    messages are quietly discarded, no_ack should probably
    be set to True in that case.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_consume', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_consume" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_consume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">consumer_tag</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">no_local</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                  <span class="n">no_ack</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">exclusive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                  <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on_cancel</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Start a queue consumer</span>
<span class="sd">    This method asks the server to start a &quot;consumer&quot;, which is a</span>
<span class="sd">    transient request for messages from a specific queue.</span>
<span class="sd">    Consumers last as long as the channel they were created on, or</span>
<span class="sd">    until the client cancels them.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD support at least 16 consumers per queue,</span>
<span class="sd">        unless the queue was declared as private, and ideally,</span>
<span class="sd">        impose no limit except as defined by available resources.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to consume from.  If</span>
<span class="sd">            the queue name is null, refers to the current queue</span>
<span class="sd">            for the channel, which is the last declared queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the client did not previously declare a queue,</span>
<span class="sd">                and the queue name in this method is empty, the</span>
<span class="sd">                server MUST raise a connection exception with</span>
<span class="sd">                reply code 530 (not allowed).</span>
<span class="sd">        consumer_tag: shortstr</span>
<span class="sd">            Specifies the identifier for the consumer. The</span>
<span class="sd">            consumer tag is local to a connection, so two clients</span>
<span class="sd">            can use the same consumer tags. If this field is empty</span>
<span class="sd">            the server will generate a unique tag.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The tag MUST NOT refer to an existing consumer. If</span>
<span class="sd">                the client attempts to create two consumers with</span>
<span class="sd">                the same non-empty tag the server MUST raise a</span>
<span class="sd">                connection exception with reply code 530 (not</span>
<span class="sd">                allowed).</span>
<span class="sd">        no_local: boolean</span>
<span class="sd">            do not deliver own messages</span>
<span class="sd">            If the no-local field is set the server will not send</span>
<span class="sd">            messages to the client that published them.</span>
<span class="sd">        no_ack: boolean</span>
<span class="sd">            no acknowledgement needed</span>
<span class="sd">            If this field is set the server does not expect</span>
<span class="sd">            acknowledgments for messages.  That is, when a message</span>
<span class="sd">            is delivered to the client the server automatically and</span>
<span class="sd">            silently acknowledges it on behalf of the client.  This</span>
<span class="sd">            functionality increases performance but at the cost of</span>
<span class="sd">            reliability.  Messages can get lost if a client dies</span>
<span class="sd">            before it can deliver them to the application.</span>
<span class="sd">        exclusive: boolean</span>
<span class="sd">            request exclusive access</span>
<span class="sd">            Request exclusive consumer access, meaning only this</span>
<span class="sd">            consumer can access the queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the server cannot grant exclusive access to the</span>
<span class="sd">                queue when asked, - because there are other</span>
<span class="sd">                consumers active - it MUST raise a channel</span>
<span class="sd">                exception with return code 403 (access refused).</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">        callback: Python callable</span>
<span class="sd">            function/method called with each delivered message</span>
<span class="sd">            For each message delivered by the broker, the</span>
<span class="sd">            callable will be called with a Message object</span>
<span class="sd">            as the single argument.  If no callable is specified,</span>
<span class="sd">            messages are quietly discarded, no_ack should probably</span>
<span class="sd">            be set to True in that case.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_local</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_ack</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">exclusive</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="n">consumer_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.basic_consume_ok</span>
        <span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">[</span><span class="n">consumer_tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">if</span> <span class="n">on_cancel</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel_callbacks</span><span class="p">[</span><span class="n">consumer_tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">on_cancel</span>
    <span class="k">if</span> <span class="n">no_ack</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_ack_consumers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">consumer_tag</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">consumer_tag</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_get">
    <p>def <span class="ident">basic_get</span>(</p><p>self, queue=&#39;&#39;, no_ack=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct access to a queue</p>
<p>This method provides a direct access to the messages in a
queue using a synchronous dialogue that is designed for
specific types of application where synchronous functionality
is more important than performance.</p>
<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to consume from.  If
    the queue name is null, refers to the current queue
    for the channel, which is the last declared queue.

    RULE:

        If the client did not previously declare a queue,
        and the queue name in this method is empty, the
        server MUST raise a connection exception with
        reply code 530 (not allowed).

no_ack: boolean

    no acknowledgement needed

    If this field is set the server does not expect
    acknowledgments for messages.  That is, when a message
    is delivered to the client the server automatically and
    silently acknowledges it on behalf of the client.  This
    functionality increases performance but at the cost of
    reliability.  Messages can get lost if a client dies
    before it can deliver them to the application.
</pre></div>


<p>Non-blocking, returns a message object, or None.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_get', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_get" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">no_ack</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Direct access to a queue</span>
<span class="sd">    This method provides a direct access to the messages in a</span>
<span class="sd">    queue using a synchronous dialogue that is designed for</span>
<span class="sd">    specific types of application where synchronous functionality</span>
<span class="sd">    is more important than performance.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to consume from.  If</span>
<span class="sd">            the queue name is null, refers to the current queue</span>
<span class="sd">            for the channel, which is the last declared queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the client did not previously declare a queue,</span>
<span class="sd">                and the queue name in this method is empty, the</span>
<span class="sd">                server MUST raise a connection exception with</span>
<span class="sd">                reply code 530 (not allowed).</span>
<span class="sd">        no_ack: boolean</span>
<span class="sd">            no acknowledgement needed</span>
<span class="sd">            If this field is set the server does not expect</span>
<span class="sd">            acknowledgments for messages.  That is, when a message</span>
<span class="sd">            is delivered to the client the server automatically and</span>
<span class="sd">            silently acknowledges it on behalf of the client.  This</span>
<span class="sd">            functionality increases performance but at the cost of</span>
<span class="sd">            reliability.  Messages can get lost if a client dies</span>
<span class="sd">            before it can deliver them to the application.</span>
<span class="sd">    Non-blocking, returns a message object, or None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">no_ack</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">),</span>  <span class="c1"># Channel.basic_get_ok</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">72</span><span class="p">),</span>  <span class="c1"># Channel.basic_get_empty</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_publish">
    <p>def <span class="ident">basic_publish</span>(</p><p>self, msg, exchange=&#39;&#39;, routing_key=&#39;&#39;, mandatory=False, immediate=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Publish a message</p>
<p>This method publishes a message to a specific exchange. The
message will be routed to queues as defined by the exchange
configuration and distributed to any active consumers when the
transaction, if any, is committed.</p>
<p>PARAMETERS:
    exchange: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the exchange to publish to.  The
    exchange name can be empty, meaning the default
    exchange.  If the exchange name is specified, and that
    exchange does not exist, the server will raise a
    channel exception.

    RULE:

        The server MUST accept a blank exchange name to
        mean the default exchange.

    RULE:

        The exchange MAY refuse basic content in which
        case it MUST raise a channel exception with reply
        code 540 (not implemented).

routing_key: shortstr

    Message routing key

    Specifies the routing key for the message.  The
    routing key is used for routing messages depending on
    the exchange configuration.

mandatory: boolean

    indicate mandatory routing

    This flag tells the server how to react if the message
    cannot be routed to a queue.  If this flag is True, the
    server will return an unroutable message with a Return
    method.  If this flag is False, the server silently
    drops the message.

    RULE:

        The server SHOULD implement the mandatory flag.

immediate: boolean

    request immediate delivery

    This flag tells the server how to react if the message
    cannot be routed to a queue consumer immediately.  If
    this flag is set, the server will return an
    undeliverable message with a Return method. If this
    flag is zero, the server will queue the message, but
    with no guarantee that it will ever be consumed.

    RULE:

        The server SHOULD implement the immediate flag.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_publish', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_publish" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">_basic_publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                   <span class="n">mandatory</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Publish a message</span>
<span class="sd">    This method publishes a message to a specific exchange. The</span>
<span class="sd">    message will be routed to queues as defined by the exchange</span>
<span class="sd">    configuration and distributed to any active consumers when the</span>
<span class="sd">    transaction, if any, is committed.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        exchange: shortstr</span>
<span class="sd">            Specifies the name of the exchange to publish to.  The</span>
<span class="sd">            exchange name can be empty, meaning the default</span>
<span class="sd">            exchange.  If the exchange name is specified, and that</span>
<span class="sd">            exchange does not exist, the server will raise a</span>
<span class="sd">            channel exception.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to</span>
<span class="sd">                mean the default exchange.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The exchange MAY refuse basic content in which</span>
<span class="sd">                case it MUST raise a channel exception with reply</span>
<span class="sd">                code 540 (not implemented).</span>
<span class="sd">        routing_key: shortstr</span>
<span class="sd">            Message routing key</span>
<span class="sd">            Specifies the routing key for the message.  The</span>
<span class="sd">            routing key is used for routing messages depending on</span>
<span class="sd">            the exchange configuration.</span>
<span class="sd">        mandatory: boolean</span>
<span class="sd">            indicate mandatory routing</span>
<span class="sd">            This flag tells the server how to react if the message</span>
<span class="sd">            cannot be routed to a queue.  If this flag is True, the</span>
<span class="sd">            server will return an unroutable message with a Return</span>
<span class="sd">            method.  If this flag is False, the server silently</span>
<span class="sd">            drops the message.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server SHOULD implement the mandatory flag.</span>
<span class="sd">        immediate: boolean</span>
<span class="sd">            request immediate delivery</span>
<span class="sd">            This flag tells the server how to react if the message</span>
<span class="sd">            cannot be routed to a queue consumer immediately.  If</span>
<span class="sd">            this flag is set, the server will return an</span>
<span class="sd">            undeliverable message with a Return method. If this</span>
<span class="sd">            flag is zero, the server will queue the message, but</span>
<span class="sd">            with no guarantee that it will ever be consumed.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server SHOULD implement the immediate flag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">mandatory</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">immediate</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_publish_confirm">
    <p>def <span class="ident">basic_publish_confirm</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_publish_confirm', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_publish_confirm" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_publish_confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confirm_selected</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm_select</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basic_publish</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Basic.Ack / Basic.Nack</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">([(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">120</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_qos">
    <p>def <span class="ident">basic_qos</span>(</p><p>self, prefetch_size, prefetch_count, a_global)</p>
    </div>
    

    
  
    <div class="desc"><p>Specify quality of service</p>
<p>This method requests a specific quality of service.  The QoS
can be specified for the current channel or for all channels
on the connection.  The particular properties and semantics of
a qos method always depend on the content class semantics.
Though the qos method could in principle apply to both peers,
it is currently meaningful only for the server.</p>
<p>PARAMETERS:
    prefetch_size: long</p>
<div class="codehilite"><pre>    prefetch window in octets

    The client can request that messages be sent in
    advance so that when the client finishes processing a
    message, the following message is already held
    locally, rather than needing to be sent down the
    channel.  Prefetching gives a performance improvement.
    This field specifies the prefetch window size in
    octets.  The server will send a message in advance if
    it is equal to or smaller in size than the available
    prefetch size (and also falls into other prefetch
    limits). May be set to zero, meaning &quot;no specific
    limit&quot;, although other prefetch limits may still
    apply. The prefetch-size is ignored if the no-ack
    option is set.

    RULE:

        The server MUST ignore this setting when the
        client is not processing any messages - i.e. the
        prefetch size does not limit the transfer of
        single messages to a client, only the sending in
        advance of more messages while the client still
        has one or more unacknowledged messages.

prefetch_count: short

    prefetch window in messages

    Specifies a prefetch window in terms of whole
    messages.  This field may be used in combination with
    the prefetch-size field; a message will only be sent
    in advance if both prefetch windows (and those at the
    channel and connection level) allow it. The prefetch-
    count is ignored if the no-ack option is set.

    RULE:

        The server MAY send less data in advance than
        allowed by the client&#39;s specified prefetch windows
        but it MUST NOT send more.

a_global: boolean

    apply to entire connection

    By default the QoS settings apply to the current
    channel only.  If this field is set, they are applied
    to the entire connection.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_qos', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_qos" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_qos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefetch_size</span><span class="p">,</span> <span class="n">prefetch_count</span><span class="p">,</span> <span class="n">a_global</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Specify quality of service</span>
<span class="sd">    This method requests a specific quality of service.  The QoS</span>
<span class="sd">    can be specified for the current channel or for all channels</span>
<span class="sd">    on the connection.  The particular properties and semantics of</span>
<span class="sd">    a qos method always depend on the content class semantics.</span>
<span class="sd">    Though the qos method could in principle apply to both peers,</span>
<span class="sd">    it is currently meaningful only for the server.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        prefetch_size: long</span>
<span class="sd">            prefetch window in octets</span>
<span class="sd">            The client can request that messages be sent in</span>
<span class="sd">            advance so that when the client finishes processing a</span>
<span class="sd">            message, the following message is already held</span>
<span class="sd">            locally, rather than needing to be sent down the</span>
<span class="sd">            channel.  Prefetching gives a performance improvement.</span>
<span class="sd">            This field specifies the prefetch window size in</span>
<span class="sd">            octets.  The server will send a message in advance if</span>
<span class="sd">            it is equal to or smaller in size than the available</span>
<span class="sd">            prefetch size (and also falls into other prefetch</span>
<span class="sd">            limits). May be set to zero, meaning &quot;no specific</span>
<span class="sd">            limit&quot;, although other prefetch limits may still</span>
<span class="sd">            apply. The prefetch-size is ignored if the no-ack</span>
<span class="sd">            option is set.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST ignore this setting when the</span>
<span class="sd">                client is not processing any messages - i.e. the</span>
<span class="sd">                prefetch size does not limit the transfer of</span>
<span class="sd">                single messages to a client, only the sending in</span>
<span class="sd">                advance of more messages while the client still</span>
<span class="sd">                has one or more unacknowledged messages.</span>
<span class="sd">        prefetch_count: short</span>
<span class="sd">            prefetch window in messages</span>
<span class="sd">            Specifies a prefetch window in terms of whole</span>
<span class="sd">            messages.  This field may be used in combination with</span>
<span class="sd">            the prefetch-size field; a message will only be sent</span>
<span class="sd">            in advance if both prefetch windows (and those at the</span>
<span class="sd">            channel and connection level) allow it. The prefetch-</span>
<span class="sd">            count is ignored if the no-ack option is set.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MAY send less data in advance than</span>
<span class="sd">                allowed by the client&#39;s specified prefetch windows</span>
<span class="sd">                but it MUST NOT send more.</span>
<span class="sd">        a_global: boolean</span>
<span class="sd">            apply to entire connection</span>
<span class="sd">            By default the QoS settings apply to the current</span>
<span class="sd">            channel only.  If this field is set, they are applied</span>
<span class="sd">            to the entire connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_long</span><span class="p">(</span><span class="n">prefetch_size</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">prefetch_count</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">a_global</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.basic_qos_ok</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_recover">
    <p>def <span class="ident">basic_recover</span>(</p><p>self, requeue=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Redeliver unacknowledged messages</p>
<p>This method asks the broker to redeliver all unacknowledged
messages on a specified channel. Zero or more messages may be
redelivered.  This method is only allowed on non-transacted
channels.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server MUST set the redelivered flag on all messages
that are resent.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server MUST raise a channel exception if this is
called on a transacted channel.
</pre></div>


<p>PARAMETERS:
    requeue: boolean</p>
<div class="codehilite"><pre>    requeue the message

    If this field is False, the message will be redelivered
    to the original recipient.  If this field is True, the
    server will attempt to requeue the message,
    potentially then delivering it to an alternative
    subscriber.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_recover', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_recover" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_recover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requeue</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Redeliver unacknowledged messages</span>
<span class="sd">    This method asks the broker to redeliver all unacknowledged</span>
<span class="sd">    messages on a specified channel. Zero or more messages may be</span>
<span class="sd">    redelivered.  This method is only allowed on non-transacted</span>
<span class="sd">    channels.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server MUST set the redelivered flag on all messages</span>
<span class="sd">        that are resent.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server MUST raise a channel exception if this is</span>
<span class="sd">        called on a transacted channel.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        requeue: boolean</span>
<span class="sd">            requeue the message</span>
<span class="sd">            If this field is False, the message will be redelivered</span>
<span class="sd">            to the original recipient.  If this field is True, the</span>
<span class="sd">            server will attempt to requeue the message,</span>
<span class="sd">            potentially then delivering it to an alternative</span>
<span class="sd">            subscriber.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_recover_async">
    <p>def <span class="ident">basic_recover_async</span>(</p><p>self, requeue=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_recover_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_recover_async" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_recover_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requeue</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.basic_reject">
    <p>def <span class="ident">basic_reject</span>(</p><p>self, delivery_tag, requeue)</p>
    </div>
    

    
  
    <div class="desc"><p>Reject an incoming message</p>
<p>This method allows a client to reject a message.  It can be
used to interrupt and cancel large incoming messages, or
return untreatable messages to their original queue.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD be capable of accepting and process the
Reject method while sending message content with a Deliver
or Get-Ok method.  I.e. the server should read and process
incoming methods while sending output frames.  To cancel a
partially-send content, the server sends a content body
frame of size 1 (i.e. with no data except the frame-end
octet).
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD interpret this method as meaning that
the client is unable to process the message at this time.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>A client MUST NOT use this method as a means of selecting
messages to process.  A rejected message MAY be discarded
or dead-lettered, not necessarily passed to another
client.
</pre></div>


<p>PARAMETERS:
    delivery_tag: longlong</p>
<div class="codehilite"><pre>    server-assigned delivery tag

    The server-assigned and channel-specific delivery tag

    RULE:

        The delivery tag is valid only within the channel
        from which the message was received.  I.e. a client
        MUST NOT receive a message on one channel and then
        acknowledge it on another.

    RULE:

        The server MUST NOT use a zero value for delivery
        tags.  Zero is reserved for client use, meaning &quot;all
        messages so far received&quot;.

requeue: boolean

    requeue the message

    If this field is False, the message will be discarded.
    If this field is True, the server will attempt to
    requeue the message.

    RULE:

        The server MUST NOT deliver the message to the
        same client within the context of the current
        channel.  The recommended strategy is to attempt
        to deliver the message to an alternative consumer,
        and if that is not possible, to move the message
        to a dead-letter queue.  The server MAY use more
        sophisticated tracking to hold the message on the
        queue and redeliver it to the same client at a
        later stage.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.basic_reject', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.basic_reject" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">basic_reject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delivery_tag</span><span class="p">,</span> <span class="n">requeue</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reject an incoming message</span>
<span class="sd">    This method allows a client to reject a message.  It can be</span>
<span class="sd">    used to interrupt and cancel large incoming messages, or</span>
<span class="sd">    return untreatable messages to their original queue.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD be capable of accepting and process the</span>
<span class="sd">        Reject method while sending message content with a Deliver</span>
<span class="sd">        or Get-Ok method.  I.e. the server should read and process</span>
<span class="sd">        incoming methods while sending output frames.  To cancel a</span>
<span class="sd">        partially-send content, the server sends a content body</span>
<span class="sd">        frame of size 1 (i.e. with no data except the frame-end</span>
<span class="sd">        octet).</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD interpret this method as meaning that</span>
<span class="sd">        the client is unable to process the message at this time.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A client MUST NOT use this method as a means of selecting</span>
<span class="sd">        messages to process.  A rejected message MAY be discarded</span>
<span class="sd">        or dead-lettered, not necessarily passed to another</span>
<span class="sd">        client.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        delivery_tag: longlong</span>
<span class="sd">            server-assigned delivery tag</span>
<span class="sd">            The server-assigned and channel-specific delivery tag</span>
<span class="sd">            RULE:</span>
<span class="sd">                The delivery tag is valid only within the channel</span>
<span class="sd">                from which the message was received.  I.e. a client</span>
<span class="sd">                MUST NOT receive a message on one channel and then</span>
<span class="sd">                acknowledge it on another.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST NOT use a zero value for delivery</span>
<span class="sd">                tags.  Zero is reserved for client use, meaning &quot;all</span>
<span class="sd">                messages so far received&quot;.</span>
<span class="sd">        requeue: boolean</span>
<span class="sd">            requeue the message</span>
<span class="sd">            If this field is False, the message will be discarded.</span>
<span class="sd">            If this field is True, the server will attempt to</span>
<span class="sd">            requeue the message.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST NOT deliver the message to the</span>
<span class="sd">                same client within the context of the current</span>
<span class="sd">                channel.  The recommended strategy is to attempt</span>
<span class="sd">                to deliver the message to an alternative consumer,</span>
<span class="sd">                and if that is not possible, to move the message</span>
<span class="sd">                to a dead-letter queue.  The server MAY use more</span>
<span class="sd">                sophisticated tracking to hold the message on the</span>
<span class="sd">                queue and redeliver it to the same client at a</span>
<span class="sd">                later stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_longlong</span><span class="p">(</span><span class="n">delivery_tag</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">requeue</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.close">
    <p>def <span class="ident">close</span>(</p><p>self, reply_code=0, reply_text=&#39;&#39;, method_sig=(0, 0))</p>
    </div>
    

    
  
    <div class="desc"><p>Request a channel close</p>
<p>This method indicates that the sender wants to close the
channel. This may be due to internal conditions (e.g. a forced
shut-down) or due to an error handling a specific method, i.e.
an exception.  When a close is due to an exception, the sender
provides the class and method id of the method which caused
the exception.</p>
<p>RULE:</p>
<div class="codehilite"><pre>After sending this method any received method except
Channel.Close-OK MUST be discarded.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The peer sending this method MAY use a counter or timeout
to detect failure of the other peer to respond correctly
with Channel.Close-OK..
</pre></div>


<p>PARAMETERS:
    reply_code: short</p>
<div class="codehilite"><pre>    The reply code. The AMQ reply codes are defined in AMQ
    RFC 011.

reply_text: shortstr

    The localised reply text.  This text can be logged as an
    aid to resolving issues.

class_id: short

    failing method class

    When the close is provoked by a method exception, this
    is the class of the method.

method_id: short

    failing method ID

    When the close is provoked by a method exception, this
    is the ID of the method.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.close', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.close" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;Request a channel close</span>
<span class="sd">    This method indicates that the sender wants to close the</span>
<span class="sd">    channel. This may be due to internal conditions (e.g. a forced</span>
<span class="sd">    shut-down) or due to an error handling a specific method, i.e.</span>
<span class="sd">    an exception.  When a close is due to an exception, the sender</span>
<span class="sd">    provides the class and method id of the method which caused</span>
<span class="sd">    the exception.</span>
<span class="sd">    RULE:</span>
<span class="sd">        After sending this method any received method except</span>
<span class="sd">        Channel.Close-OK MUST be discarded.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The peer sending this method MAY use a counter or timeout</span>
<span class="sd">        to detect failure of the other peer to respond correctly</span>
<span class="sd">        with Channel.Close-OK..</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        reply_code: short</span>
<span class="sd">            The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">            RFC 011.</span>
<span class="sd">        reply_text: shortstr</span>
<span class="sd">            The localised reply text.  This text can be logged as an</span>
<span class="sd">            aid to resolving issues.</span>
<span class="sd">        class_id: short</span>
<span class="sd">            failing method class</span>
<span class="sd">            When the close is provoked by a method exception, this</span>
<span class="sd">            is the class of the method.</span>
<span class="sd">        method_id: short</span>
<span class="sd">            failing method ID</span>
<span class="sd">            When the close is provoked by a method exception, this</span>
<span class="sd">            is the ID of the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_open</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">reply_code</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">reply_text</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># class_id</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># method_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span>  <span class="c1"># Channel.close</span>
            <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span>  <span class="c1"># Channel.close_ok</span>
        <span class="p">])</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># no point in waiting anymore</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="c1"># lack of communication should not prevent tidy-up</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.confirm_select">
    <p>def <span class="ident">confirm_select</span>(</p><p>self, nowait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Enables publisher confirms for this channel (an RabbitMQ
extension).</p>
<p>Can now be used if the channel is in transactional mode.</p>
<p>:param nowait:
    If set, the server will not respond to the method.
    The client should not wait for a reply method. If the
    server could not complete the method it will raise a channel
    or connection exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.confirm_select', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.confirm_select" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">confirm_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enables publisher confirms for this channel (an RabbitMQ</span>
<span class="sd">    extension).</span>
<span class="sd">    Can now be used if the channel is in transactional mode.</span>
<span class="sd">    :param nowait:</span>
<span class="sd">        If set, the server will not respond to the method.</span>
<span class="sd">        The client should not wait for a reply method. If the</span>
<span class="sd">        server could not complete the method it will raise a channel</span>
<span class="sd">        or connection exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">85</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Confirm.select_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.dispatch_method">
    <p>def <span class="ident">dispatch_method</span>(</p><p>self, method_sig, args, content)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.dispatch_method', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.dispatch_method" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">dispatch_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">content</span> <span class="ow">and</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="ow">and</span> \
            <span class="nb">hasattr</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;content_encoding&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">content</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">content</span><span class="o">.</span><span class="n">content_encoding</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">amqp_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_METHOD_MAP</span><span class="p">[</span><span class="n">method_sig</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AMQPNotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Unknown AMQP method {0!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_sig</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.exchange_bind">
    <p>def <span class="ident">exchange_bind</span>(</p><p>self, destination, source=&#39;&#39;, routing_key=&#39;&#39;, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This method binds an exchange to an exchange.</p>
<p>RULE:</p>
<div class="codehilite"><pre>A server MUST allow and ignore duplicate bindings - that
is, two or more bind methods for a specific exchanges,
with identical arguments - without treating these as an
error.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>A server MUST allow cycles of exchange bindings to be
created including allowing an exchange to be bound to
itself.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>A server MUST not deliver the same message more than once
to a destination exchange, even if the topology of
exchanges and bindings results in multiple (even infinite)
routes to that exchange.
</pre></div>


<p>PARAMETERS:
    reserved-1: short</p>
<div class="codehilite"><pre><span class="n">destination</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">destination</span> <span class="n">exchange</span> <span class="n">to</span>
    <span class="n">bind</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">A</span> <span class="n">client</span> <span class="n">MUST</span> <span class="n">NOT</span> <span class="n">be</span> <span class="n">allowed</span> <span class="n">to</span> <span class="n">bind</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span>
        <span class="n">existent</span> <span class="n">destination</span> <span class="n">exchange</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">server</span> <span class="n">MUST</span> <span class="n">accept</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">exchange</span> <span class="n">name</span> <span class="n">to</span>
        <span class="n">mean</span> <span class="n">the</span> <span class="k">default</span> <span class="n">exchange</span><span class="o">.</span>

<span class="n">source</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">source</span> <span class="n">exchange</span> <span class="n">to</span> <span class="n">bind</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">A</span> <span class="n">client</span> <span class="n">MUST</span> <span class="n">NOT</span> <span class="n">be</span> <span class="n">allowed</span> <span class="n">to</span> <span class="n">bind</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span>
        <span class="n">existent</span> <span class="n">source</span> <span class="n">exchange</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">server</span> <span class="n">MUST</span> <span class="n">accept</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">exchange</span> <span class="n">name</span> <span class="n">to</span>
        <span class="n">mean</span> <span class="n">the</span> <span class="k">default</span> <span class="n">exchange</span><span class="o">.</span>

<span class="n">routing</span><span class="o">-</span><span class="n">key</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">routing</span> <span class="n">key</span> <span class="k">for</span> <span class="n">the</span> <span class="n">binding</span><span class="o">.</span> <span class="n">The</span> <span class="n">routing</span>
    <span class="n">key</span> <span class="k">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">routing</span> <span class="n">messages</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span>
    <span class="n">exchange</span> <span class="n">configuration</span><span class="o">.</span> <span class="n">Not</span> <span class="n">all</span> <span class="n">exchanges</span> <span class="n">use</span> <span class="n">a</span>
    <span class="n">routing</span> <span class="n">key</span> <span class="o">-</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">specific</span> <span class="n">exchange</span>
    <span class="n">documentation</span><span class="o">.</span>

<span class="n">no</span><span class="o">-</span><span class="n">wait</span><span class="o">:</span> <span class="n">bit</span>

<span class="k">arguments</span><span class="o">:</span> <span class="n">table</span>

    <span class="n">A</span> <span class="kd">set</span> <span class="n">of</span> <span class="k">arguments</span> <span class="k">for</span> <span class="n">the</span> <span class="n">binding</span><span class="o">.</span> <span class="n">The</span> <span class="n">syntax</span> <span class="n">and</span>
    <span class="n">semantics</span> <span class="n">of</span> <span class="n">these</span> <span class="k">arguments</span> <span class="n">depends</span> <span class="n">on</span> <span class="n">the</span> <span class="n">exchange</span>
    <span class="kd">class</span><span class="o">.</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.exchange_bind', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.exchange_bind" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">exchange_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                  <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This method binds an exchange to an exchange.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A server MUST allow and ignore duplicate bindings - that</span>
<span class="sd">        is, two or more bind methods for a specific exchanges,</span>
<span class="sd">        with identical arguments - without treating these as an</span>
<span class="sd">        error.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A server MUST allow cycles of exchange bindings to be</span>
<span class="sd">        created including allowing an exchange to be bound to</span>
<span class="sd">        itself.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A server MUST not deliver the same message more than once</span>
<span class="sd">        to a destination exchange, even if the topology of</span>
<span class="sd">        exchanges and bindings results in multiple (even infinite)</span>
<span class="sd">        routes to that exchange.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        reserved-1: short</span>
<span class="sd">        destination: shortstr</span>
<span class="sd">            Specifies the name of the destination exchange to</span>
<span class="sd">            bind.</span>
<span class="sd">            RULE:</span>
<span class="sd">                A client MUST NOT be allowed to bind a non-</span>
<span class="sd">                existent destination exchange.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to</span>
<span class="sd">                mean the default exchange.</span>
<span class="sd">        source: shortstr</span>
<span class="sd">            Specifies the name of the source exchange to bind.</span>
<span class="sd">            RULE:</span>
<span class="sd">                A client MUST NOT be allowed to bind a non-</span>
<span class="sd">                existent source exchange.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to</span>
<span class="sd">                mean the default exchange.</span>
<span class="sd">        routing-key: shortstr</span>
<span class="sd">            Specifies the routing key for the binding. The routing</span>
<span class="sd">            key is used for routing messages depending on the</span>
<span class="sd">            exchange configuration. Not all exchanges use a</span>
<span class="sd">            routing key - refer to the specific exchange</span>
<span class="sd">            documentation.</span>
<span class="sd">        no-wait: bit</span>
<span class="sd">        arguments: table</span>
<span class="sd">            A set of arguments for the binding. The syntax and</span>
<span class="sd">            semantics of these arguments depends on the exchange</span>
<span class="sd">            class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.exchange_bind_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.exchange_declare">
    <p>def <span class="ident">exchange_declare</span>(</p><p>self, exchange, type, passive=False, durable=False, auto_delete=True, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Declare exchange, create if needed</p>
<p>This method creates an exchange if it does not already exist,
and if the exchange exists, verifies that it is of the correct
and expected class.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD support a minimum of 16 exchanges per
virtual host and ideally, impose no limit except as
defined by available resources.
</pre></div>


<p>PARAMETERS:
    exchange: shortstr</p>
<div class="codehilite"><pre>    RULE:

        Exchange names starting with &quot;amq.&quot; are reserved
        for predeclared and standardised exchanges.  If
        the client attempts to create an exchange starting
        with &quot;amq.&quot;, the server MUST raise a channel
        exception with reply code 403 (access refused).

type: shortstr

    exchange type

    Each exchange belongs to one of a set of exchange
    types implemented by the server.  The exchange types
    define the functionality of the exchange - i.e. how
    messages are routed through it.  It is not valid or
    meaningful to attempt to change the type of an
    existing exchange.

    RULE:

        If the exchange already exists with a different
        type, the server MUST raise a connection exception
        with a reply code 507 (not allowed).

    RULE:

        If the server does not support the requested
        exchange type it MUST raise a connection exception
        with a reply code 503 (command invalid).

passive: boolean

    do not create exchange

    If set, the server will not create the exchange.  The
    client can use this to check whether an exchange
    exists without modifying the server state.

    RULE:

        If set, and the exchange does not already exist,
        the server MUST raise a channel exception with
        reply code 404 (not found).

durable: boolean

    request a durable exchange

    If set when creating a new exchange, the exchange will
    be marked as durable.  Durable exchanges remain active
    when a server restarts. Non-durable exchanges
    (transient exchanges) are purged if/when a server
    restarts.

    RULE:

        The server MUST support both durable and transient
        exchanges.

    RULE:

        The server MUST ignore the durable field if the
        exchange already exists.

auto_delete: boolean

    auto-delete when unused

    If set, the exchange is deleted when all queues have
    finished using it.

    RULE:

        The server SHOULD allow for a reasonable delay
        between the point when it determines that an
        exchange is not being used (or no longer used),
        and the point when it deletes the exchange.  At
        the least it must allow a client to create an
        exchange and then bind a queue to it, with a small
        but non-zero delay between these two actions.

    RULE:

        The server MUST ignore the auto-delete field if
        the exchange already exists.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.

arguments: table

    arguments for declaration

    A set of arguments for the declaration. The syntax and
    semantics of these arguments depends on the server
    implementation.  This field is ignored if passive is
    True.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.exchange_declare', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.exchange_declare" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">exchange_declare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">passive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">durable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">auto_delete</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Declare exchange, create if needed</span>
<span class="sd">    This method creates an exchange if it does not already exist,</span>
<span class="sd">    and if the exchange exists, verifies that it is of the correct</span>
<span class="sd">    and expected class.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD support a minimum of 16 exchanges per</span>
<span class="sd">        virtual host and ideally, impose no limit except as</span>
<span class="sd">        defined by available resources.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        exchange: shortstr</span>
<span class="sd">            RULE:</span>
<span class="sd">                Exchange names starting with &quot;amq.&quot; are reserved</span>
<span class="sd">                for predeclared and standardised exchanges.  If</span>
<span class="sd">                the client attempts to create an exchange starting</span>
<span class="sd">                with &quot;amq.&quot;, the server MUST raise a channel</span>
<span class="sd">                exception with reply code 403 (access refused).</span>
<span class="sd">        type: shortstr</span>
<span class="sd">            exchange type</span>
<span class="sd">            Each exchange belongs to one of a set of exchange</span>
<span class="sd">            types implemented by the server.  The exchange types</span>
<span class="sd">            define the functionality of the exchange - i.e. how</span>
<span class="sd">            messages are routed through it.  It is not valid or</span>
<span class="sd">            meaningful to attempt to change the type of an</span>
<span class="sd">            existing exchange.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the exchange already exists with a different</span>
<span class="sd">                type, the server MUST raise a connection exception</span>
<span class="sd">                with a reply code 507 (not allowed).</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the server does not support the requested</span>
<span class="sd">                exchange type it MUST raise a connection exception</span>
<span class="sd">                with a reply code 503 (command invalid).</span>
<span class="sd">        passive: boolean</span>
<span class="sd">            do not create exchange</span>
<span class="sd">            If set, the server will not create the exchange.  The</span>
<span class="sd">            client can use this to check whether an exchange</span>
<span class="sd">            exists without modifying the server state.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If set, and the exchange does not already exist,</span>
<span class="sd">                the server MUST raise a channel exception with</span>
<span class="sd">                reply code 404 (not found).</span>
<span class="sd">        durable: boolean</span>
<span class="sd">            request a durable exchange</span>
<span class="sd">            If set when creating a new exchange, the exchange will</span>
<span class="sd">            be marked as durable.  Durable exchanges remain active</span>
<span class="sd">            when a server restarts. Non-durable exchanges</span>
<span class="sd">            (transient exchanges) are purged if/when a server</span>
<span class="sd">            restarts.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST support both durable and transient</span>
<span class="sd">                exchanges.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST ignore the durable field if the</span>
<span class="sd">                exchange already exists.</span>
<span class="sd">        auto_delete: boolean</span>
<span class="sd">            auto-delete when unused</span>
<span class="sd">            If set, the exchange is deleted when all queues have</span>
<span class="sd">            finished using it.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server SHOULD allow for a reasonable delay</span>
<span class="sd">                between the point when it determines that an</span>
<span class="sd">                exchange is not being used (or no longer used),</span>
<span class="sd">                and the point when it deletes the exchange.  At</span>
<span class="sd">                the least it must allow a client to create an</span>
<span class="sd">                exchange and then bind a queue to it, with a small</span>
<span class="sd">                but non-zero delay between these two actions.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST ignore the auto-delete field if</span>
<span class="sd">                the exchange already exists.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">        arguments: table</span>
<span class="sd">            arguments for declaration</span>
<span class="sd">            A set of arguments for the declaration. The syntax and</span>
<span class="sd">            semantics of these arguments depends on the server</span>
<span class="sd">            implementation.  This field is ignored if passive is</span>
<span class="sd">            True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">passive</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">durable</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">auto_delete</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>  <span class="c1"># internal: deprecated</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auto_delete</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span><span class="n">VDeprecationWarning</span><span class="p">(</span><span class="n">EXCHANGE_AUTODELETE_DEPRECATED</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.exchange_declare_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.exchange_delete">
    <p>def <span class="ident">exchange_delete</span>(</p><p>self, exchange, if_unused=False, nowait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete an exchange</p>
<p>This method deletes an exchange.  When an exchange is deleted
all queue bindings on the exchange are cancelled.</p>
<p>PARAMETERS:
    exchange: shortstr</p>
<div class="codehilite"><pre>    RULE:

        The exchange MUST exist. Attempting to delete a
        non-existing exchange causes a channel exception.

if_unused: boolean

    delete only if unused

    If set, the server will only delete the exchange if it
    has no queue bindings. If the exchange has queue
    bindings the server does not delete it but raises a
    channel exception instead.

    RULE:

        If set, the server SHOULD delete the exchange but
        only if it has no queue bindings.

    RULE:

        If set, the server SHOULD raise a channel
        exception if the exchange is in use.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.exchange_delete', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.exchange_delete" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">exchange_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">if_unused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an exchange</span>
<span class="sd">    This method deletes an exchange.  When an exchange is deleted</span>
<span class="sd">    all queue bindings on the exchange are cancelled.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        exchange: shortstr</span>
<span class="sd">            RULE:</span>
<span class="sd">                The exchange MUST exist. Attempting to delete a</span>
<span class="sd">                non-existing exchange causes a channel exception.</span>
<span class="sd">        if_unused: boolean</span>
<span class="sd">            delete only if unused</span>
<span class="sd">            If set, the server will only delete the exchange if it</span>
<span class="sd">            has no queue bindings. If the exchange has queue</span>
<span class="sd">            bindings the server does not delete it but raises a</span>
<span class="sd">            channel exception instead.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If set, the server SHOULD delete the exchange but</span>
<span class="sd">                only if it has no queue bindings.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If set, the server SHOULD raise a channel</span>
<span class="sd">                exception if the exchange is in use.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_unused</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.exchange_delete_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.exchange_unbind">
    <p>def <span class="ident">exchange_unbind</span>(</p><p>self, destination, source=&#39;&#39;, routing_key=&#39;&#39;, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This method unbinds an exchange from an exchange.</p>
<p>RULE:</p>
<div class="codehilite"><pre>If a unbind fails, the server MUST raise a connection
exception.
</pre></div>


<p>PARAMETERS:
    reserved-1: short</p>
<div class="codehilite"><pre><span class="n">destination</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">destination</span> <span class="n">exchange</span> <span class="n">to</span>
    <span class="n">unbind</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">client</span> <span class="n">MUST</span> <span class="n">NOT</span> <span class="n">attempt</span> <span class="n">to</span> <span class="n">unbind</span> <span class="n">an</span> <span class="n">exchange</span>
        <span class="n">that</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exist</span> <span class="n">from</span> <span class="n">an</span> <span class="n">exchange</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">server</span> <span class="n">MUST</span> <span class="n">accept</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">exchange</span> <span class="n">name</span> <span class="n">to</span>
        <span class="n">mean</span> <span class="n">the</span> <span class="k">default</span> <span class="n">exchange</span><span class="o">.</span>

<span class="n">source</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">source</span> <span class="n">exchange</span> <span class="n">to</span> <span class="n">unbind</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">client</span> <span class="n">MUST</span> <span class="n">NOT</span> <span class="n">attempt</span> <span class="n">to</span> <span class="n">unbind</span> <span class="n">an</span> <span class="n">exchange</span>
        <span class="n">from</span> <span class="n">an</span> <span class="n">exchange</span> <span class="n">that</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exist</span><span class="o">.</span>

    <span class="n">RULE</span><span class="o">:</span>

        <span class="n">The</span> <span class="n">server</span> <span class="n">MUST</span> <span class="n">accept</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">exchange</span> <span class="n">name</span> <span class="n">to</span>
        <span class="n">mean</span> <span class="n">the</span> <span class="k">default</span> <span class="n">exchange</span><span class="o">.</span>

<span class="n">routing</span><span class="o">-</span><span class="n">key</span><span class="o">:</span> <span class="n">shortstr</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="n">routing</span> <span class="n">key</span> <span class="n">of</span> <span class="n">the</span> <span class="n">binding</span> <span class="n">to</span> <span class="n">unbind</span><span class="o">.</span>

<span class="n">no</span><span class="o">-</span><span class="n">wait</span><span class="o">:</span> <span class="n">bit</span>

<span class="k">arguments</span><span class="o">:</span> <span class="n">table</span>

    <span class="n">Specifies</span> <span class="n">the</span> <span class="k">arguments</span> <span class="n">of</span> <span class="n">the</span> <span class="n">binding</span> <span class="n">to</span> <span class="n">unbind</span><span class="o">.</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.exchange_unbind', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.exchange_unbind" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">exchange_unbind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                    <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This method unbinds an exchange from an exchange.</span>
<span class="sd">    RULE:</span>
<span class="sd">        If a unbind fails, the server MUST raise a connection</span>
<span class="sd">        exception.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        reserved-1: short</span>
<span class="sd">        destination: shortstr</span>
<span class="sd">            Specifies the name of the destination exchange to</span>
<span class="sd">            unbind.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The client MUST NOT attempt to unbind an exchange</span>
<span class="sd">                that does not exist from an exchange.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to</span>
<span class="sd">                mean the default exchange.</span>
<span class="sd">        source: shortstr</span>
<span class="sd">            Specifies the name of the source exchange to unbind.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The client MUST NOT attempt to unbind an exchange</span>
<span class="sd">                from an exchange that does not exist.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to</span>
<span class="sd">                mean the default exchange.</span>
<span class="sd">        routing-key: shortstr</span>
<span class="sd">            Specifies the routing key of the binding to unbind.</span>
<span class="sd">        no-wait: bit</span>
<span class="sd">        arguments: table</span>
<span class="sd">            Specifies the arguments of the binding to unbind.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Channel.exchange_unbind_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.flow">
    <p>def <span class="ident">flow</span>(</p><p>self, active)</p>
    </div>
    

    
  
    <div class="desc"><p>Enable/disable flow from peer</p>
<p>This method asks the peer to pause or restart the flow of
content data. This is a simple flow-control mechanism that a
peer can use to avoid oveflowing its queues or otherwise
finding itself receiving more messages than it can process.
Note that this method is not intended for window control.  The
peer that receives a request to stop sending content should
finish sending the current content, if any, and then wait
until it receives a Flow restart method.</p>
<p>RULE:</p>
<div class="codehilite"><pre>When a new channel is opened, it is active.  Some
applications assume that channels are inactive until
started.  To emulate this behaviour a client MAY open the
channel, then pause it.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>When sending content data in multiple frames, a peer
SHOULD monitor the channel for incoming methods and
respond to a Channel.Flow as rapidly as possible.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>A peer MAY use the Channel.Flow method to throttle
incoming content data for internal reasons, for example,
when exchangeing data over a slower connection.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The peer that requests a Channel.Flow method MAY
disconnect and/or ban a peer that does not respect the
request.
</pre></div>


<p>PARAMETERS:
    active: boolean</p>
<div class="codehilite"><pre>    start/stop content frames

    If True, the peer starts sending content frames.  If
    False, the peer stops sending content frames.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.flow', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.flow" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable/disable flow from peer</span>
<span class="sd">    This method asks the peer to pause or restart the flow of</span>
<span class="sd">    content data. This is a simple flow-control mechanism that a</span>
<span class="sd">    peer can use to avoid oveflowing its queues or otherwise</span>
<span class="sd">    finding itself receiving more messages than it can process.</span>
<span class="sd">    Note that this method is not intended for window control.  The</span>
<span class="sd">    peer that receives a request to stop sending content should</span>
<span class="sd">    finish sending the current content, if any, and then wait</span>
<span class="sd">    until it receives a Flow restart method.</span>
<span class="sd">    RULE:</span>
<span class="sd">        When a new channel is opened, it is active.  Some</span>
<span class="sd">        applications assume that channels are inactive until</span>
<span class="sd">        started.  To emulate this behaviour a client MAY open the</span>
<span class="sd">        channel, then pause it.</span>
<span class="sd">    RULE:</span>
<span class="sd">        When sending content data in multiple frames, a peer</span>
<span class="sd">        SHOULD monitor the channel for incoming methods and</span>
<span class="sd">        respond to a Channel.Flow as rapidly as possible.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A peer MAY use the Channel.Flow method to throttle</span>
<span class="sd">        incoming content data for internal reasons, for example,</span>
<span class="sd">        when exchangeing data over a slower connection.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The peer that requests a Channel.Flow method MAY</span>
<span class="sd">        disconnect and/or ban a peer that does not respect the</span>
<span class="sd">        request.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        active: boolean</span>
<span class="sd">            start/stop content frames</span>
<span class="sd">            If True, the peer starts sending content frames.  If</span>
<span class="sd">            False, the peer stops sending content frames.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">active</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.flow_ok</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.queue_bind">
    <p>def <span class="ident">queue_bind</span>(</p><p>self, queue, exchange=&#39;&#39;, routing_key=&#39;&#39;, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Bind queue to an exchange</p>
<p>This method binds a queue to an exchange.  Until a queue is
bound it will not receive any messages.  In a classic
messaging model, store-and-forward queues are bound to a dest
exchange and subscription queues are bound to a dest_wild
exchange.</p>
<p>RULE:</p>
<div class="codehilite"><pre>A server MUST allow ignore duplicate bindings - that is,
two or more bind methods for a specific queue, with
identical arguments - without treating these as an error.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>If a bind fails, the server MUST raise a connection
exception.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server MUST NOT allow a durable queue to bind to a
transient exchange. If the client attempts this the server
MUST raise a channel exception.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>Bindings for durable queues are automatically durable and
the server SHOULD restore such bindings after a server
restart.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD support at least 4 bindings per queue,
and ideally, impose no limit except as defined by
available resources.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to bind.  If the queue
    name is empty, refers to the current queue for the
    channel, which is the last declared queue.

    RULE:

        If the client did not previously declare a queue,
        and the queue name in this method is empty, the
        server MUST raise a connection exception with
        reply code 530 (not allowed).

    RULE:

        If the queue does not exist the server MUST raise
        a channel exception with reply code 404 (not
        found).

exchange: shortstr

    The name of the exchange to bind to.

    RULE:

        If the exchange does not exist the server MUST
        raise a channel exception with reply code 404 (not
        found).

routing_key: shortstr

    message routing key

    Specifies the routing key for the binding.  The
    routing key is used for routing messages depending on
    the exchange configuration. Not all exchanges use a
    routing key - refer to the specific exchange
    documentation.  If the routing key is empty and the
    queue name is empty, the routing key will be the
    current queue for the channel, which is the last
    declared queue.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.

arguments: table

    arguments for binding

    A set of arguments for the binding.  The syntax and
    semantics of these arguments depends on the exchange
    class.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.queue_bind', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.queue_bind" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">queue_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
               <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bind queue to an exchange</span>
<span class="sd">    This method binds a queue to an exchange.  Until a queue is</span>
<span class="sd">    bound it will not receive any messages.  In a classic</span>
<span class="sd">    messaging model, store-and-forward queues are bound to a dest</span>
<span class="sd">    exchange and subscription queues are bound to a dest_wild</span>
<span class="sd">    exchange.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A server MUST allow ignore duplicate bindings - that is,</span>
<span class="sd">        two or more bind methods for a specific queue, with</span>
<span class="sd">        identical arguments - without treating these as an error.</span>
<span class="sd">    RULE:</span>
<span class="sd">        If a bind fails, the server MUST raise a connection</span>
<span class="sd">        exception.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server MUST NOT allow a durable queue to bind to a</span>
<span class="sd">        transient exchange. If the client attempts this the server</span>
<span class="sd">        MUST raise a channel exception.</span>
<span class="sd">    RULE:</span>
<span class="sd">        Bindings for durable queues are automatically durable and</span>
<span class="sd">        the server SHOULD restore such bindings after a server</span>
<span class="sd">        restart.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD support at least 4 bindings per queue,</span>
<span class="sd">        and ideally, impose no limit except as defined by</span>
<span class="sd">        available resources.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to bind.  If the queue</span>
<span class="sd">            name is empty, refers to the current queue for the</span>
<span class="sd">            channel, which is the last declared queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the client did not previously declare a queue,</span>
<span class="sd">                and the queue name in this method is empty, the</span>
<span class="sd">                server MUST raise a connection exception with</span>
<span class="sd">                reply code 530 (not allowed).</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the queue does not exist the server MUST raise</span>
<span class="sd">                a channel exception with reply code 404 (not</span>
<span class="sd">                found).</span>
<span class="sd">        exchange: shortstr</span>
<span class="sd">            The name of the exchange to bind to.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the exchange does not exist the server MUST</span>
<span class="sd">                raise a channel exception with reply code 404 (not</span>
<span class="sd">                found).</span>
<span class="sd">        routing_key: shortstr</span>
<span class="sd">            message routing key</span>
<span class="sd">            Specifies the routing key for the binding.  The</span>
<span class="sd">            routing key is used for routing messages depending on</span>
<span class="sd">            the exchange configuration. Not all exchanges use a</span>
<span class="sd">            routing key - refer to the specific exchange</span>
<span class="sd">            documentation.  If the routing key is empty and the</span>
<span class="sd">            queue name is empty, the routing key will be the</span>
<span class="sd">            current queue for the channel, which is the last</span>
<span class="sd">            declared queue.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">        arguments: table</span>
<span class="sd">            arguments for binding</span>
<span class="sd">            A set of arguments for the binding.  The syntax and</span>
<span class="sd">            semantics of these arguments depends on the exchange</span>
<span class="sd">            class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.queue_bind_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.queue_declare">
    <p>def <span class="ident">queue_declare</span>(</p><p>self, queue=&#39;&#39;, passive=False, durable=False, exclusive=False, auto_delete=True, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Declare queue, create if needed</p>
<p>This method creates or checks a queue.  When creating a new
queue the client can specify various properties that control
the durability of the queue and its contents, and the level of
sharing for the queue.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server MUST create a default binding for a newly-
created queue to the default exchange, which is an
exchange of type &#39;direct&#39;.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD support a minimum of 256 queues per
virtual host and ideally, impose no limit except as
defined by available resources.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    RULE:

        The queue name MAY be empty, in which case the
        server MUST create a new queue with a unique
        generated name and return this to the client in
        the Declare-Ok method.

    RULE:

        Queue names starting with &quot;amq.&quot; are reserved for
        predeclared and standardised server queues.  If
        the queue name starts with &quot;amq.&quot; and the passive
        option is False, the server MUST raise a connection
        exception with reply code 403 (access refused).

passive: boolean

    do not create queue

    If set, the server will not create the queue.  The
    client can use this to check whether a queue exists
    without modifying the server state.

    RULE:

        If set, and the queue does not already exist, the
        server MUST respond with a reply code 404 (not
        found) and raise a channel exception.

durable: boolean

    request a durable queue

    If set when creating a new queue, the queue will be
    marked as durable.  Durable queues remain active when
    a server restarts. Non-durable queues (transient
    queues) are purged if/when a server restarts.  Note
    that durable queues do not necessarily hold persistent
    messages, although it does not make sense to send
    persistent messages to a transient queue.

    RULE:

        The server MUST recreate the durable queue after a
        restart.

    RULE:

        The server MUST support both durable and transient
        queues.

    RULE:

        The server MUST ignore the durable field if the
        queue already exists.

exclusive: boolean

    request an exclusive queue

    Exclusive queues may only be consumed from by the
    current connection. Setting the &#39;exclusive&#39; flag
    always implies &#39;auto-delete&#39;.

    RULE:

        The server MUST support both exclusive (private)
        and non-exclusive (shared) queues.

    RULE:

        The server MUST raise a channel exception if
        &#39;exclusive&#39; is specified and the queue already
        exists and is owned by a different connection.

auto_delete: boolean

    auto-delete queue when unused

    If set, the queue is deleted when all consumers have
    finished using it. Last consumer can be cancelled
    either explicitly or because its channel is closed. If
    there was no consumer ever on the queue, it won&#39;t be
    deleted.

    RULE:

        The server SHOULD allow for a reasonable delay
        between the point when it determines that a queue
        is not being used (or no longer used), and the
        point when it deletes the queue.  At the least it
        must allow a client to create a queue and then
        create a consumer to read from it, with a small
        but non-zero delay between these two actions.  The
        server should equally allow for clients that may
        be disconnected prematurely, and wish to re-
        consume from the same queue without losing
        messages.  We would recommend a configurable
        timeout, with a suitable default value being one
        minute.

    RULE:

        The server MUST ignore the auto-delete field if
        the queue already exists.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.

arguments: table

    arguments for declaration

    A set of arguments for the declaration. The syntax and
    semantics of these arguments depends on the server
    implementation.  This field is ignored if passive is
    True.
</pre></div>


<p>Returns a tuple containing 3 items:
    the name of the queue (essential for automatically-named queues)
    message count
    consumer count</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.queue_declare', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.queue_declare" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">queue_declare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">passive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">durable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                  <span class="n">exclusive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto_delete</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                  <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Declare queue, create if needed</span>
<span class="sd">    This method creates or checks a queue.  When creating a new</span>
<span class="sd">    queue the client can specify various properties that control</span>
<span class="sd">    the durability of the queue and its contents, and the level of</span>
<span class="sd">    sharing for the queue.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server MUST create a default binding for a newly-</span>
<span class="sd">        created queue to the default exchange, which is an</span>
<span class="sd">        exchange of type &#39;direct&#39;.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD support a minimum of 256 queues per</span>
<span class="sd">        virtual host and ideally, impose no limit except as</span>
<span class="sd">        defined by available resources.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            RULE:</span>
<span class="sd">                The queue name MAY be empty, in which case the</span>
<span class="sd">                server MUST create a new queue with a unique</span>
<span class="sd">                generated name and return this to the client in</span>
<span class="sd">                the Declare-Ok method.</span>
<span class="sd">            RULE:</span>
<span class="sd">                Queue names starting with &quot;amq.&quot; are reserved for</span>
<span class="sd">                predeclared and standardised server queues.  If</span>
<span class="sd">                the queue name starts with &quot;amq.&quot; and the passive</span>
<span class="sd">                option is False, the server MUST raise a connection</span>
<span class="sd">                exception with reply code 403 (access refused).</span>
<span class="sd">        passive: boolean</span>
<span class="sd">            do not create queue</span>
<span class="sd">            If set, the server will not create the queue.  The</span>
<span class="sd">            client can use this to check whether a queue exists</span>
<span class="sd">            without modifying the server state.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If set, and the queue does not already exist, the</span>
<span class="sd">                server MUST respond with a reply code 404 (not</span>
<span class="sd">                found) and raise a channel exception.</span>
<span class="sd">        durable: boolean</span>
<span class="sd">            request a durable queue</span>
<span class="sd">            If set when creating a new queue, the queue will be</span>
<span class="sd">            marked as durable.  Durable queues remain active when</span>
<span class="sd">            a server restarts. Non-durable queues (transient</span>
<span class="sd">            queues) are purged if/when a server restarts.  Note</span>
<span class="sd">            that durable queues do not necessarily hold persistent</span>
<span class="sd">            messages, although it does not make sense to send</span>
<span class="sd">            persistent messages to a transient queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST recreate the durable queue after a</span>
<span class="sd">                restart.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST support both durable and transient</span>
<span class="sd">                queues.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST ignore the durable field if the</span>
<span class="sd">                queue already exists.</span>
<span class="sd">        exclusive: boolean</span>
<span class="sd">            request an exclusive queue</span>
<span class="sd">            Exclusive queues may only be consumed from by the</span>
<span class="sd">            current connection. Setting the &#39;exclusive&#39; flag</span>
<span class="sd">            always implies &#39;auto-delete&#39;.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST support both exclusive (private)</span>
<span class="sd">                and non-exclusive (shared) queues.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST raise a channel exception if</span>
<span class="sd">                &#39;exclusive&#39; is specified and the queue already</span>
<span class="sd">                exists and is owned by a different connection.</span>
<span class="sd">        auto_delete: boolean</span>
<span class="sd">            auto-delete queue when unused</span>
<span class="sd">            If set, the queue is deleted when all consumers have</span>
<span class="sd">            finished using it. Last consumer can be cancelled</span>
<span class="sd">            either explicitly or because its channel is closed. If</span>
<span class="sd">            there was no consumer ever on the queue, it won&#39;t be</span>
<span class="sd">            deleted.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server SHOULD allow for a reasonable delay</span>
<span class="sd">                between the point when it determines that a queue</span>
<span class="sd">                is not being used (or no longer used), and the</span>
<span class="sd">                point when it deletes the queue.  At the least it</span>
<span class="sd">                must allow a client to create a queue and then</span>
<span class="sd">                create a consumer to read from it, with a small</span>
<span class="sd">                but non-zero delay between these two actions.  The</span>
<span class="sd">                server should equally allow for clients that may</span>
<span class="sd">                be disconnected prematurely, and wish to re-</span>
<span class="sd">                consume from the same queue without losing</span>
<span class="sd">                messages.  We would recommend a configurable</span>
<span class="sd">                timeout, with a suitable default value being one</span>
<span class="sd">                minute.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST ignore the auto-delete field if</span>
<span class="sd">                the queue already exists.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">        arguments: table</span>
<span class="sd">            arguments for declaration</span>
<span class="sd">            A set of arguments for the declaration. The syntax and</span>
<span class="sd">            semantics of these arguments depends on the server</span>
<span class="sd">            implementation.  This field is ignored if passive is</span>
<span class="sd">            True.</span>
<span class="sd">    Returns a tuple containing 3 items:</span>
<span class="sd">        the name of the queue (essential for automatically-named queues)</span>
<span class="sd">        message count</span>
<span class="sd">        consumer count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">passive</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">durable</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">exclusive</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">auto_delete</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.queue_declare_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.queue_delete">
    <p>def <span class="ident">queue_delete</span>(</p><p>self, queue=&#39;&#39;, if_unused=False, if_empty=False, nowait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete a queue</p>
<p>This method deletes a queue.  When a queue is deleted any
pending messages are sent to a dead-letter queue if this is
defined in the server configuration, and all consumers on the
queue are cancelled.</p>
<p>RULE:</p>
<div class="codehilite"><pre>The server SHOULD use a dead-letter queue to hold messages
that were pending on a deleted queue, and MAY provide
facilities for a system administrator to move these
messages back to an active queue.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to delete. If the
    queue name is empty, refers to the current queue for
    the channel, which is the last declared queue.

    RULE:

        If the client did not previously declare a queue,
        and the queue name in this method is empty, the
        server MUST raise a connection exception with
        reply code 530 (not allowed).

    RULE:

        The queue must exist. Attempting to delete a non-
        existing queue causes a channel exception.

if_unused: boolean

    delete only if unused

    If set, the server will only delete the queue if it
    has no consumers. If the queue has consumers the
    server does does not delete it but raises a channel
    exception instead.

    RULE:

        The server MUST respect the if-unused flag when
        deleting a queue.

if_empty: boolean

    delete only if empty

    If set, the server will only delete the queue if it
    has no messages. If the queue is not empty the server
    raises a channel exception.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.queue_delete', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.queue_delete" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">queue_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">if_unused</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">if_empty</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete a queue</span>
<span class="sd">    This method deletes a queue.  When a queue is deleted any</span>
<span class="sd">    pending messages are sent to a dead-letter queue if this is</span>
<span class="sd">    defined in the server configuration, and all consumers on the</span>
<span class="sd">    queue are cancelled.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server SHOULD use a dead-letter queue to hold messages</span>
<span class="sd">        that were pending on a deleted queue, and MAY provide</span>
<span class="sd">        facilities for a system administrator to move these</span>
<span class="sd">        messages back to an active queue.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to delete. If the</span>
<span class="sd">            queue name is empty, refers to the current queue for</span>
<span class="sd">            the channel, which is the last declared queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the client did not previously declare a queue,</span>
<span class="sd">                and the queue name in this method is empty, the</span>
<span class="sd">                server MUST raise a connection exception with</span>
<span class="sd">                reply code 530 (not allowed).</span>
<span class="sd">            RULE:</span>
<span class="sd">                The queue must exist. Attempting to delete a non-</span>
<span class="sd">                existing queue causes a channel exception.</span>
<span class="sd">        if_unused: boolean</span>
<span class="sd">            delete only if unused</span>
<span class="sd">            If set, the server will only delete the queue if it</span>
<span class="sd">            has no consumers. If the queue has consumers the</span>
<span class="sd">            server does does not delete it but raises a channel</span>
<span class="sd">            exception instead.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST respect the if-unused flag when</span>
<span class="sd">                deleting a queue.</span>
<span class="sd">        if_empty: boolean</span>
<span class="sd">            delete only if empty</span>
<span class="sd">            If set, the server will only delete the queue if it</span>
<span class="sd">            has no messages. If the queue is not empty the server</span>
<span class="sd">            raises a channel exception.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_unused</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">if_empty</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span>  <span class="c1"># Channel.queue_delete_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.queue_purge">
    <p>def <span class="ident">queue_purge</span>(</p><p>self, queue=&#39;&#39;, nowait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Purge a queue</p>
<p>This method removes all messages from a queue.  It does not
cancel consumers.  Purged messages are deleted without any
formal "undo" mechanism.</p>
<p>RULE:</p>
<div class="codehilite"><pre>A call to purge MUST result in an empty queue.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>On transacted channels the server MUST not purge messages
that have already been sent to a client but not yet
acknowledged.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The server MAY implement a purge queue or log that allows
system administrators to recover accidentally-purged
messages.  The server SHOULD NOT keep purged messages in
the same storage spaces as the live messages since the
volumes of purged messages may get very large.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to purge.  If the
    queue name is empty, refers to the current queue for
    the channel, which is the last declared queue.

    RULE:

        If the client did not previously declare a queue,
        and the queue name in this method is empty, the
        server MUST raise a connection exception with
        reply code 530 (not allowed).

    RULE:

        The queue must exist. Attempting to purge a non-
        existing queue causes a channel exception.

nowait: boolean

    do not send a reply method

    If set, the server will not respond to the method. The
    client should not wait for a reply method.  If the
    server could not complete the method it will raise a
    channel or connection exception.
</pre></div>


<p>if nowait is False, returns a message_count</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.queue_purge', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.queue_purge" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">queue_purge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Purge a queue</span>
<span class="sd">    This method removes all messages from a queue.  It does not</span>
<span class="sd">    cancel consumers.  Purged messages are deleted without any</span>
<span class="sd">    formal &quot;undo&quot; mechanism.</span>
<span class="sd">    RULE:</span>
<span class="sd">        A call to purge MUST result in an empty queue.</span>
<span class="sd">    RULE:</span>
<span class="sd">        On transacted channels the server MUST not purge messages</span>
<span class="sd">        that have already been sent to a client but not yet</span>
<span class="sd">        acknowledged.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The server MAY implement a purge queue or log that allows</span>
<span class="sd">        system administrators to recover accidentally-purged</span>
<span class="sd">        messages.  The server SHOULD NOT keep purged messages in</span>
<span class="sd">        the same storage spaces as the live messages since the</span>
<span class="sd">        volumes of purged messages may get very large.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to purge.  If the</span>
<span class="sd">            queue name is empty, refers to the current queue for</span>
<span class="sd">            the channel, which is the last declared queue.</span>
<span class="sd">            RULE:</span>
<span class="sd">                If the client did not previously declare a queue,</span>
<span class="sd">                and the queue name in this method is empty, the</span>
<span class="sd">                server MUST raise a connection exception with</span>
<span class="sd">                reply code 530 (not allowed).</span>
<span class="sd">            RULE:</span>
<span class="sd">                The queue must exist. Attempting to purge a non-</span>
<span class="sd">                existing queue causes a channel exception.</span>
<span class="sd">        nowait: boolean</span>
<span class="sd">            do not send a reply method</span>
<span class="sd">            If set, the server will not respond to the method. The</span>
<span class="sd">            client should not wait for a reply method.  If the</span>
<span class="sd">            server could not complete the method it will raise a</span>
<span class="sd">            channel or connection exception.</span>
<span class="sd">    if nowait is False, returns a message_count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="n">nowait</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.queue_purge_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.queue_unbind">
    <p>def <span class="ident">queue_unbind</span>(</p><p>self, queue, exchange, routing_key=&#39;&#39;, nowait=False, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Unbind a queue from an exchange</p>
<p>This method unbinds a queue from an exchange.</p>
<p>RULE:</p>
<div class="codehilite"><pre>If a unbind fails, the server MUST raise a connection exception.
</pre></div>


<p>PARAMETERS:
    queue: shortstr</p>
<div class="codehilite"><pre>    Specifies the name of the queue to unbind.

    RULE:

        The client MUST either specify a queue name or have
        previously declared a queue on the same channel

    RULE:

        The client MUST NOT attempt to unbind a queue that
        does not exist.

exchange: shortstr

    The name of the exchange to unbind from.

    RULE:

        The client MUST NOT attempt to unbind a queue from an
        exchange that does not exist.

    RULE:

        The server MUST accept a blank exchange name to mean
        the default exchange.

routing_key: shortstr

    routing key of binding

    Specifies the routing key of the binding to unbind.

arguments: table

    arguments of binding

    Specifies the arguments of the binding to unbind.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.queue_unbind', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.queue_unbind" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">queue_unbind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">nowait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unbind a queue from an exchange</span>
<span class="sd">    This method unbinds a queue from an exchange.</span>
<span class="sd">    RULE:</span>
<span class="sd">        If a unbind fails, the server MUST raise a connection exception.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        queue: shortstr</span>
<span class="sd">            Specifies the name of the queue to unbind.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The client MUST either specify a queue name or have</span>
<span class="sd">                previously declared a queue on the same channel</span>
<span class="sd">            RULE:</span>
<span class="sd">                The client MUST NOT attempt to unbind a queue that</span>
<span class="sd">                does not exist.</span>
<span class="sd">        exchange: shortstr</span>
<span class="sd">            The name of the exchange to unbind from.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The client MUST NOT attempt to unbind a queue from an</span>
<span class="sd">                exchange that does not exist.</span>
<span class="sd">            RULE:</span>
<span class="sd">                The server MUST accept a blank exchange name to mean</span>
<span class="sd">                the default exchange.</span>
<span class="sd">        routing_key: shortstr</span>
<span class="sd">            routing key of binding</span>
<span class="sd">            Specifies the routing key of the binding to unbind.</span>
<span class="sd">        arguments: table</span>
<span class="sd">            arguments of binding</span>
<span class="sd">            Specifies the arguments of the binding to unbind.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">routing_key</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nowait</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Channel.queue_unbind_ok</span>
        <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.tx_commit">
    <p>def <span class="ident">tx_commit</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Commit the current transaction</p>
<p>This method commits all messages published and acknowledged in
the current transaction.  A new transaction starts immediately
after a commit.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.tx_commit', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.tx_commit" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">tx_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Commit the current transaction</span>
<span class="sd">    This method commits all messages published and acknowledged in</span>
<span class="sd">    the current transaction.  A new transaction starts immediately</span>
<span class="sd">    after a commit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>  <span class="c1"># Channel.tx_commit_ok</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.tx_rollback">
    <p>def <span class="ident">tx_rollback</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Abandon the current transaction</p>
<p>This method abandons all messages published and acknowledged
in the current transaction.  A new transaction starts
immediately after a rollback.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.tx_rollback', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.tx_rollback" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">tx_rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abandon the current transaction</span>
<span class="sd">    This method abandons all messages published and acknowledged</span>
<span class="sd">    in the current transaction.  A new transaction starts</span>
<span class="sd">    immediately after a rollback.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>  <span class="c1"># Channel.tx_rollback_ok</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.tx_select">
    <p>def <span class="ident">tx_select</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Select standard transaction mode</p>
<p>This method sets the channel to use standard transactions.
The client must use this method at least once on a channel
before using the Commit or Rollback methods.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.tx_select', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.tx_select" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">tx_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Select standard transaction mode</span>
<span class="sd">    This method sets the channel to use standard transactions.</span>
<span class="sd">    The client must use this method at least once on a channel</span>
<span class="sd">    before using the Commit or Rollback methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>  <span class="c1"># Channel.tx_select_ok</span>
    <span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Channel.wait">
    <p>def <span class="ident">wait</span>(</p><p>self, allowed_methods=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait for a method that matches our allowed_methods parameter (the
default value of None means match any method), and dispatch to it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Channel.wait', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Channel.wait" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait for a method that matches our allowed_methods parameter (the</span>
<span class="sd">    default value of None means match any method), and dispatch to it.&quot;&quot;&quot;</span>
    <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">_wait_method</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel_id</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch_method</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.active" class="name">var <span class="ident">active</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.auto_encode_decode" class="name">var <span class="ident">auto_encode_decode</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.callbacks" class="name">var <span class="ident">callbacks</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.cancel_callbacks" class="name">var <span class="ident">cancel_callbacks</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.events" class="name">var <span class="ident">events</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.is_open" class="name">var <span class="ident">is_open</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.no_ack_consumers" class="name">var <span class="ident">no_ack_consumers</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Channel.returned_messages" class="name">var <span class="ident">returned_messages</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ChannelError" class="name">class <span class="ident">ChannelError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ChannelError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ChannelError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ChannelError</span><span class="p">(</span><span class="n">AMQPError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelError.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ChannelError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ChannelError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ChannelError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ChannelNotOpen" class="name">class <span class="ident">ChannelNotOpen</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ChannelNotOpen', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ChannelNotOpen" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ChannelNotOpen</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">504</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ChannelNotOpen">ChannelNotOpen</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelNotOpen.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelNotOpen.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ChannelNotOpen.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ChannelNotOpen.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ChannelNotOpen.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ChannelNotOpen.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.Connection" class="name">class <span class="ident">Connection</span></p>
      
  
    <div class="desc"><p>The connection class provides methods for a client to establish a
network connection to a server, and for both peers to operate the
connection thereafter.</p>
<p>GRAMMAR::</p>
<div class="codehilite"><pre>connection          = open-connection *use-connection close-connection
open-connection     = C:protocol-header
                      S:START C:START-OK
                      *challenge
                      S:TUNE C:TUNE-OK
                      C:OPEN S:OPEN-OK
challenge           = S:SECURE C:SECURE-OK
use-connection      = *channel
close-connection    = C:CLOSE S:CLOSE-OK
                    / S:CLOSE C:CLOSE-OK
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">Connection</span><span class="p">(</span><span class="n">AbstractChannel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The connection class provides methods for a client to establish a</span>
<span class="sd">    network connection to a server, and for both peers to operate the</span>
<span class="sd">    connection thereafter.</span>

<span class="sd">    GRAMMAR::</span>

<span class="sd">        connection          = open-connection *use-connection close-connection</span>
<span class="sd">        open-connection     = C:protocol-header</span>
<span class="sd">                              S:START C:START-OK</span>
<span class="sd">                              *challenge</span>
<span class="sd">                              S:TUNE C:TUNE-OK</span>
<span class="sd">                              C:OPEN S:OPEN-OK</span>
<span class="sd">        challenge           = S:SECURE C:SECURE-OK</span>
<span class="sd">        use-connection      = *channel</span>
<span class="sd">        close-connection    = C:CLOSE S:CLOSE-OK</span>
<span class="sd">                            / S:CLOSE C:CLOSE-OK</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Channel</span> <span class="o">=</span> <span class="n">Channel</span>

    <span class="c1">#: Final heartbeat interval value (in float seconds) after negotiation</span>
    <span class="n">heartbeat</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">#: Original heartbeat interval value proposed by client.</span>
    <span class="n">client_heartbeat</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">#: Original heartbeat interval proposed by server.</span>
    <span class="n">server_heartbeat</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">#: Time of last heartbeat sent (in monotonic time, if available).</span>
    <span class="n">last_heartbeat_sent</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1">#: Time of last heartbeat received (in monotonic time, if available).</span>
    <span class="n">last_heartbeat_received</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1">#: Number of bytes sent to socket at the last heartbeat check.</span>
    <span class="n">prev_sent</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">#: Number of bytes received from socket at the last heartbeat check.</span>
    <span class="n">prev_recv</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">userid</span><span class="o">=</span><span class="s1">&#39;guest&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;guest&#39;</span><span class="p">,</span>
                 <span class="n">login_method</span><span class="o">=</span><span class="s1">&#39;AMQPLAIN&#39;</span><span class="p">,</span> <span class="n">login_response</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">virtual_host</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">,</span> <span class="n">client_properties</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">channel_max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">frame_max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">heartbeat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">on_blocked</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on_unblocked</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">confirm_publish</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a connection to the specified host, which should be</span>
<span class="sd">        a &#39;host[:port]&#39;, such as &#39;localhost&#39;, or &#39;1.2.3.4:5672&#39;</span>
<span class="sd">        (defaults to &#39;localhost&#39;, if a port is not specified then</span>
<span class="sd">        5672 is used)</span>

<span class="sd">        If login_response is not specified, one is built up for you from</span>
<span class="sd">        userid and password if they are present.</span>

<span class="sd">        The &#39;ssl&#39; parameter may be simply True/False, or for Python &gt;= 2.6</span>
<span class="sd">        a dictionary of options to pass to ssl.wrap_socket() such as</span>
<span class="sd">        requiring certain certificates or an SSLContext (&gt;= 2.7.9) to use.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">channel_max</span> <span class="o">=</span> <span class="n">channel_max</span> <span class="ow">or</span> <span class="mi">65535</span>
        <span class="n">frame_max</span> <span class="o">=</span> <span class="n">frame_max</span> <span class="ow">or</span> <span class="mi">131072</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">login_response</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> \
                <span class="ow">and</span> <span class="p">(</span><span class="n">userid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> \
                <span class="ow">and</span> <span class="p">(</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">login_response</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
            <span class="n">login_response</span><span class="o">.</span><span class="n">write_table</span><span class="p">({</span><span class="s1">&#39;LOGIN&#39;</span><span class="p">:</span> <span class="n">userid</span><span class="p">,</span> <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">})</span>
            <span class="c1"># Skip the length at the beginning</span>
            <span class="n">login_response</span> <span class="o">=</span> <span class="n">login_response</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()[</span><span class="mi">4</span><span class="p">:]</span>

        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">LIBRARY_PROPERTIES</span><span class="p">,</span> <span class="o">**</span><span class="n">client_properties</span> <span class="ow">or</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_method_override</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dispatch_basic_return</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># The connection object itself is treated as channel 0</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Connection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Properties set in the Tune method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span> <span class="o">=</span> <span class="n">channel_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span> <span class="o">=</span> <span class="n">frame_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_heartbeat</span> <span class="o">=</span> <span class="n">heartbeat</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm_publish</span> <span class="o">=</span> <span class="n">confirm_publish</span>

        <span class="c1"># Callbacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_blocked</span> <span class="o">=</span> <span class="n">on_blocked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_unblocked</span> <span class="o">=</span> <span class="n">on_unblocked</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_avail_channel_ids</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

        <span class="c1"># Properties set in the Start method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_major</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_minor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_properties</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mechanisms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">locales</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Let the transport.py module setup the actual</span>
        <span class="c1"># socket connection to the broker.</span>
        <span class="c1">#</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Transport</span><span class="p">(</span>
            <span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span> <span class="o">=</span> <span class="n">MethodReader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_writer</span> <span class="o">=</span> <span class="n">MethodWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># start</span>
        <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_x_start_ok</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">login_method</span><span class="p">,</span> <span class="n">login_response</span><span class="p">,</span> <span class="n">locale</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_tune_ok</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_tune_ok</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>  <span class="c1"># secure</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>  <span class="c1"># tune</span>
            <span class="p">])</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_open</span><span class="p">(</span><span class="n">virtual_host</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Transport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">create_transport</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">connected</span>

    <span class="k">def</span> <span class="nf">_do_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="n">temp_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">temp_list</span><span class="p">:</span>
                <span class="n">ch</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># connection already closed on the other end</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">_get_free_channel_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_avail_channel_ids</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ResourceError</span><span class="p">(</span>
                <span class="s1">&#39;No free channel ids, current={0}, channel_max={1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_claim_channel_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_avail_channel_ids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConnectionError</span><span class="p">(</span>
                <span class="s1">&#39;Channel </span><span class="si">%r</span><span class="s1"> already open&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel_id</span><span class="p">,</span> <span class="p">))</span>

    <span class="k">def</span> <span class="nf">_wait_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait for a method from the server destined for</span>
<span class="sd">        a particular channel.&quot;&quot;&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># Check the channel&#39;s deferred methods</span>
        <span class="c1">#</span>
        <span class="n">method_queue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">channel_id</span><span class="p">]</span><span class="o">.</span><span class="n">method_queue</span>

        <span class="k">for</span> <span class="n">queued_method</span> <span class="ow">in</span> <span class="n">method_queue</span><span class="p">:</span>
            <span class="n">method_sig</span> <span class="o">=</span> <span class="n">queued_method</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">allowed_methods</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> \
                    <span class="ow">or</span> <span class="p">(</span><span class="n">method_sig</span> <span class="ow">in</span> <span class="n">allowed_methods</span><span class="p">)</span> \
                    <span class="ow">or</span> <span class="p">(</span><span class="n">method_sig</span> <span class="o">==</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)):</span>
                <span class="n">method_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">queued_method</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">queued_method</span>

        <span class="c1">#</span>
        <span class="c1"># Nothing queued, need to wait for a method from the peer</span>
        <span class="c1">#</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">channel</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">read_method</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="n">channel_id</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">allowed_methods</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span>
                    <span class="n">method_sig</span> <span class="ow">in</span> <span class="n">allowed_methods</span> <span class="ow">or</span>
                    <span class="n">method_sig</span> <span class="o">==</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)):</span>
                <span class="k">return</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span>

            <span class="c1">#</span>
            <span class="c1"># Certain methods like basic_return should be dispatched</span>
            <span class="c1"># immediately rather than being queued, even if they&#39;re not</span>
            <span class="c1"># one of the &#39;allowed_methods&#39; we&#39;re looking for.</span>
            <span class="c1">#</span>
            <span class="k">if</span> <span class="n">channel</span> <span class="ow">and</span> <span class="n">method_sig</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">_IMMEDIATE_METHODS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">.</span><span class="n">dispatch_method</span><span class="p">(</span>
                    <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1">#</span>
            <span class="c1"># Not the channel and/or method we were looking for.  Queue</span>
            <span class="c1"># this method for later</span>
            <span class="c1">#</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">.</span><span class="n">method_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="c1">#</span>
            <span class="c1"># If we just queued up a method for channel 0 (the Connection</span>
            <span class="c1"># itself) it&#39;s probably a close method in reaction to some</span>
            <span class="c1"># error, so deal with it right away.</span>
            <span class="c1">#</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">channel</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_encode_decode</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fetch a Channel object identified by the numeric channel_id, or</span>
<span class="sd">        create that object if it doesn&#39;t already exist. See Channel for meaning</span>
<span class="sd">        of auto_encode_decode. If the channel already exists, the auto_* flag</span>
<span class="sd">        will not be updated.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">channel_id</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">,</span>
                                <span class="n">auto_encode_decode</span><span class="o">=</span><span class="n">auto_encode_decode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">HAS_MSG_PEEK</span><span class="p">:</span>
            <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">gettimeout</span><span class="p">()</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">MSG_PEEK</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">drain_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait for an event on a channel.&quot;&quot;&quot;</span>
        <span class="n">chanmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span>
        <span class="n">chanid</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_multiple</span><span class="p">(</span>
            <span class="n">chanmap</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">channel</span> <span class="o">=</span> <span class="n">chanmap</span><span class="p">[</span><span class="n">chanid</span><span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">content</span> <span class="ow">and</span>
                <span class="n">channel</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="ow">and</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;content_encoding&#39;</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">content</span><span class="o">.</span><span class="n">content_encoding</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">amqp_method</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_method_override</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">)</span> <span class="ow">or</span>
                       <span class="n">channel</span><span class="o">.</span><span class="n">_METHOD_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">amqp_method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AMQPNotImplementedError</span><span class="p">(</span>
                <span class="s1">&#39;Unknown AMQP method {0!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_sig</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">read_method</span><span class="p">()</span>
        <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">gettimeout</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">prev</span> <span class="o">!=</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">read_method</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">SSLError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="c1"># http://bugs.python.org/issue10272</span>
                <span class="k">if</span> <span class="s1">&#39;timed out&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">()</span>
                <span class="c1"># Non-blocking SSL sockets can throw SSLError</span>
                <span class="k">if</span> <span class="s1">&#39;The operation did not complete&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">()</span>
                <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prev</span> <span class="o">!=</span> <span class="n">timeout</span><span class="p">:</span>
                <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_wait_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">channel_id</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">items</span><span class="p">(</span><span class="n">channels</span><span class="p">):</span>
            <span class="n">method_queue</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">method_queue</span>
            <span class="k">for</span> <span class="n">queued_method</span> <span class="ow">in</span> <span class="n">method_queue</span><span class="p">:</span>
                <span class="n">method_sig</span> <span class="o">=</span> <span class="n">queued_method</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">allowed_methods</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span>
                        <span class="n">method_sig</span> <span class="ow">in</span> <span class="n">allowed_methods</span> <span class="ow">or</span>
                        <span class="n">method_sig</span> <span class="o">==</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)):</span>
                    <span class="n">method_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">queued_method</span><span class="p">)</span>
                    <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">queued_method</span>
                    <span class="k">return</span> <span class="n">channel_id</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span>

        <span class="c1"># Nothing queued, need to wait for a method from the peer</span>
        <span class="n">read_timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_timeout</span>
        <span class="n">wait</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">channel</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">read_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">allowed_methods</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span>
                    <span class="n">method_sig</span> <span class="ow">in</span> <span class="n">allowed_methods</span> <span class="ow">or</span>
                    <span class="n">method_sig</span> <span class="o">==</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)):</span>
                <span class="k">return</span> <span class="n">channel</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span>

            <span class="c1"># Not the channel and/or method we were looking for. Queue</span>
            <span class="c1"># this method for later</span>
            <span class="n">channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">.</span><span class="n">method_queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">))</span>

            <span class="c1">#</span>
            <span class="c1"># If we just queued up a method for channel 0 (the Connection</span>
            <span class="c1"># itself) it&#39;s probably a close method in reaction to some</span>
            <span class="c1"># error, so deal with it right away.</span>
            <span class="c1">#</span>
            <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">wait</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_dispatch_basic_return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="n">reply_code</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>
        <span class="n">reply_text</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">exchange</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">routing_key</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>

        <span class="n">exc</span> <span class="o">=</span> <span class="n">error_for_code</span><span class="p">(</span><span class="n">reply_code</span><span class="p">,</span> <span class="n">reply_text</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="n">ChannelError</span><span class="p">)</span>
        <span class="n">handlers</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;basic_return&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">handlers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exc</span>
        <span class="k">for</span> <span class="n">callback</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
            <span class="n">callback</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">routing_key</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Request a connection close</span>

<span class="sd">        This method indicates that the sender wants to close the</span>
<span class="sd">        connection. This may be due to internal conditions (e.g. a</span>
<span class="sd">        forced shut-down) or due to an error handling a specific</span>
<span class="sd">        method, i.e. an exception.  When a close is due to an</span>
<span class="sd">        exception, the sender provides the class and method id of the</span>
<span class="sd">        method which caused the exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            After sending this method any received method except the</span>
<span class="sd">            Close-OK method MUST be discarded.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer sending this method MAY use a counter or timeout</span>
<span class="sd">            to detect failure of the other peer to respond correctly</span>
<span class="sd">            with the Close-OK method.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When a server receives the Close method from a client it</span>
<span class="sd">            MUST delete all server-side resources associated with the</span>
<span class="sd">            client&#39;s context.  A client CANNOT reconnect to a context</span>
<span class="sd">            after sending or receiving a Close method.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reply_code: short</span>

<span class="sd">                The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">                RFC 011.</span>

<span class="sd">            reply_text: shortstr</span>

<span class="sd">                The localised reply text.  This text can be logged as an</span>
<span class="sd">                aid to resolving issues.</span>

<span class="sd">            class_id: short</span>

<span class="sd">                failing method class</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the class of the method.</span>

<span class="sd">            method_id: short</span>

<span class="sd">                failing method ID</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the ID of the method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># already closed</span>
            <span class="k">return</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">reply_code</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">reply_text</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># class_id</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># method_id</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>  <span class="c1"># Connection.close</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Connection.close_ok</span>
            <span class="p">])</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># no point in waiting anymore</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="c1"># lack of communication should not prevent tidy-up</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Request a connection close</span>

<span class="sd">        This method indicates that the sender wants to close the</span>
<span class="sd">        connection. This may be due to internal conditions (e.g. a</span>
<span class="sd">        forced shut-down) or due to an error handling a specific</span>
<span class="sd">        method, i.e. an exception.  When a close is due to an</span>
<span class="sd">        exception, the sender provides the class and method id of the</span>
<span class="sd">        method which caused the exception.</span>

<span class="sd">        RULE:</span>

<span class="sd">            After sending this method any received method except the</span>
<span class="sd">            Close-OK method MUST be discarded.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The peer sending this method MAY use a counter or timeout</span>
<span class="sd">            to detect failure of the other peer to respond correctly</span>
<span class="sd">            with the Close-OK method.</span>

<span class="sd">        RULE:</span>

<span class="sd">            When a server receives the Close method from a client it</span>
<span class="sd">            MUST delete all server-side resources associated with the</span>
<span class="sd">            client&#39;s context.  A client CANNOT reconnect to a context</span>
<span class="sd">            after sending or receiving a Close method.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            reply_code: short</span>

<span class="sd">                The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">                RFC 011.</span>

<span class="sd">            reply_text: shortstr</span>

<span class="sd">                The localised reply text.  This text can be logged as an</span>
<span class="sd">                aid to resolving issues.</span>

<span class="sd">            class_id: short</span>

<span class="sd">                failing method class</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the class of the method.</span>

<span class="sd">            method_id: short</span>

<span class="sd">                failing method ID</span>

<span class="sd">                When the close is provoked by a method exception, this</span>
<span class="sd">                is the ID of the method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reply_code</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>
        <span class="n">reply_text</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="n">class_id</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>
        <span class="n">method_id</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_x_close_ok</span><span class="p">()</span>

        <span class="k">raise</span> <span class="n">error_for_code</span><span class="p">(</span><span class="n">reply_code</span><span class="p">,</span> <span class="n">reply_text</span><span class="p">,</span>
                             <span class="p">(</span><span class="n">class_id</span><span class="p">,</span> <span class="n">method_id</span><span class="p">),</span> <span class="n">ConnectionError</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_blocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;RabbitMQ Extension.&quot;&quot;&quot;</span>
        <span class="n">reason</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_shortstr</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_blocked</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_blocked</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_unblocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_unblocked</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_unblocked</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_x_close_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a connection close</span>

<span class="sd">        This method confirms a Connection.Close method and tells the</span>
<span class="sd">        recipient that it is safe to release resources for the</span>
<span class="sd">        connection and close the socket.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A peer that detects a socket closure without having</span>
<span class="sd">            received a Close-Ok handshake method SHOULD log the error.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_close_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirm a connection close</span>

<span class="sd">        This method confirms a Connection.Close method and tells the</span>
<span class="sd">        recipient that it is safe to release resources for the</span>
<span class="sd">        connection and close the socket.</span>

<span class="sd">        RULE:</span>

<span class="sd">            A peer that detects a socket closure without having</span>
<span class="sd">            received a Close-Ok handshake method SHOULD log the error.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_x_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">virtual_host</span><span class="p">,</span> <span class="n">capabilities</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open connection to virtual host</span>

<span class="sd">        This method opens a connection to a virtual host, which is a</span>
<span class="sd">        collection of resources, and acts to separate multiple</span>
<span class="sd">        application domains within a server.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The client MUST open the context before doing any work on</span>
<span class="sd">            the connection.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            virtual_host: shortstr</span>

<span class="sd">                virtual host name</span>

<span class="sd">                The name of the virtual host to work with.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    If the server supports multiple virtual hosts, it</span>
<span class="sd">                    MUST enforce a full separation of exchanges,</span>
<span class="sd">                    queues, and all associated entities per virtual</span>
<span class="sd">                    host. An application, connected to a specific</span>
<span class="sd">                    virtual host, MUST NOT be able to access resources</span>
<span class="sd">                    of another virtual host.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server SHOULD verify that the client has</span>
<span class="sd">                    permission to access the specified virtual host.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MAY configure arbitrary limits per</span>
<span class="sd">                    virtual host, such as the number of each type of</span>
<span class="sd">                    entity that may be used, per connection and/or in</span>
<span class="sd">                    total.</span>

<span class="sd">            capabilities: shortstr</span>

<span class="sd">                required capabilities</span>

<span class="sd">                The client may specify a number of capability names,</span>
<span class="sd">                delimited by spaces.  The server can use this string</span>
<span class="sd">                to how to process the client&#39;s connection request.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">virtual_host</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">capabilities</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_bit</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span>    <span class="c1"># Connection.open_ok</span>
        <span class="p">])</span>

    <span class="k">def</span> <span class="nf">_open_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Signal that the connection is ready</span>

<span class="sd">        This method signals to the client that the connection is ready</span>
<span class="sd">        for use.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            known_hosts: shortstr (deprecated)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Open OK!&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_secure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Security mechanism challenge</span>

<span class="sd">        The SASL protocol works by exchanging challenges and responses</span>
<span class="sd">        until both peers have received sufficient information to</span>
<span class="sd">        authenticate each other.  This method challenges the client to</span>
<span class="sd">        provide more information.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            challenge: longstr</span>

<span class="sd">                security challenge data</span>

<span class="sd">                Challenge information, a block of opaque binary data</span>
<span class="sd">                passed to the security mechanism.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">challenge</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longstr</span><span class="p">()</span>  <span class="c1"># noqa</span>

    <span class="k">def</span> <span class="nf">_x_secure_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Security mechanism response</span>

<span class="sd">        This method attempts to authenticate, passing a block of SASL</span>
<span class="sd">        data for the security mechanism at the server side.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            response: longstr</span>

<span class="sd">                security response data</span>

<span class="sd">                A block of opaque data passed to the security</span>
<span class="sd">                mechanism.  The contents of this data are defined by</span>
<span class="sd">                the SASL security mechanism.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_longstr</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Start connection negotiation</span>

<span class="sd">        This method starts the connection negotiation process by</span>
<span class="sd">        telling the client the protocol version that the server</span>
<span class="sd">        proposes, along with a list of security mechanisms which the</span>
<span class="sd">        client can use for authentication.</span>

<span class="sd">        RULE:</span>

<span class="sd">            If the client cannot handle the protocol version suggested</span>
<span class="sd">            by the server it MUST close the socket connection.</span>

<span class="sd">        RULE:</span>

<span class="sd">            The server MUST provide a protocol version that is lower</span>
<span class="sd">            than or equal to that requested by the client in the</span>
<span class="sd">            protocol header. If the server cannot support the</span>
<span class="sd">            specified protocol it MUST NOT send this method, but MUST</span>
<span class="sd">            close the socket connection.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            version_major: octet</span>

<span class="sd">                protocol major version</span>

<span class="sd">                The protocol major version that the server agrees to</span>
<span class="sd">                use, which cannot be higher than the client&#39;s major</span>
<span class="sd">                version.</span>

<span class="sd">            version_minor: octet</span>

<span class="sd">                protocol major version</span>

<span class="sd">                The protocol minor version that the server agrees to</span>
<span class="sd">                use, which cannot be higher than the client&#39;s minor</span>
<span class="sd">                version.</span>

<span class="sd">            server_properties: table</span>

<span class="sd">                server properties</span>

<span class="sd">            mechanisms: longstr</span>

<span class="sd">                available security mechanisms</span>

<span class="sd">                A list of the security mechanisms that the server</span>
<span class="sd">                supports, delimited by spaces.  Currently ASL supports</span>
<span class="sd">                these mechanisms: PLAIN.</span>

<span class="sd">            locales: longstr</span>

<span class="sd">                available message locales</span>

<span class="sd">                A list of the message locales that the server</span>
<span class="sd">                supports, delimited by spaces.  The locale defines the</span>
<span class="sd">                language in which the server will send reply texts.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    All servers MUST support at least the en_US</span>
<span class="sd">                    locale.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_major</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_octet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_minor</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_octet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_properties</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_table</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mechanisms</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longstr</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">locales</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_longstr</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

        <span class="n">AMQP_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="n">START_DEBUG_FMT</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version_major</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version_minor</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_properties</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanisms</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">locales</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_x_start_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_properties</span><span class="p">,</span> <span class="n">mechanism</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">locale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select security mechanism and locale</span>

<span class="sd">        This method selects a SASL security mechanism. ASL uses SASL</span>
<span class="sd">        (RFC2222) to negotiate authentication and encryption.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            client_properties: table</span>

<span class="sd">                client properties</span>

<span class="sd">            mechanism: shortstr</span>

<span class="sd">                selected security mechanism</span>

<span class="sd">                A single security mechanisms selected by the client,</span>
<span class="sd">                which must be one of those specified by the server.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The client SHOULD authenticate using the highest-</span>
<span class="sd">                    level security profile it can handle from the list</span>
<span class="sd">                    provided by the server.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The mechanism field MUST contain one of the</span>
<span class="sd">                    security mechanisms proposed by the server in the</span>
<span class="sd">                    Start method. If it doesn&#39;t, the server MUST close</span>
<span class="sd">                    the socket.</span>

<span class="sd">            response: longstr</span>

<span class="sd">                security response data</span>

<span class="sd">                A block of opaque data passed to the security</span>
<span class="sd">                mechanism. The contents of this data are defined by</span>
<span class="sd">                the SASL security mechanism.  For the PLAIN security</span>
<span class="sd">                mechanism this is defined as a field table holding two</span>
<span class="sd">                fields, LOGIN and PASSWORD.</span>

<span class="sd">            locale: shortstr</span>

<span class="sd">                selected message locale</span>

<span class="sd">                A single message local selected by the client, which</span>
<span class="sd">                must be one of those specified by the server.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_capabilities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;consumer_cancel_notify&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;capabilities&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">client_properties</span><span class="p">:</span>
                <span class="n">client_properties</span><span class="p">[</span><span class="s1">&#39;capabilities&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">client_properties</span><span class="p">[</span><span class="s1">&#39;capabilities&#39;</span><span class="p">][</span><span class="s1">&#39;consumer_cancel_notify&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_capabilities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connection.blocked&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;capabilities&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">client_properties</span><span class="p">:</span>
                <span class="n">client_properties</span><span class="p">[</span><span class="s1">&#39;capabilities&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">client_properties</span><span class="p">[</span><span class="s1">&#39;capabilities&#39;</span><span class="p">][</span><span class="s1">&#39;connection.blocked&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">client_properties</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">mechanism</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_longstr</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_tune</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Propose connection tuning parameters</span>

<span class="sd">        This method proposes a set of connection configuration values</span>
<span class="sd">        to the client.  The client can accept and/or adjust these.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            channel_max: short</span>

<span class="sd">                proposed maximum channels</span>

<span class="sd">                The maximum total number of channels that the server</span>
<span class="sd">                allows per connection. Zero means that the server does</span>
<span class="sd">                not impose a fixed limit, but the number of allowed</span>
<span class="sd">                channels may be limited by available server resources.</span>

<span class="sd">            frame_max: long</span>

<span class="sd">                proposed maximum frame size</span>

<span class="sd">                The largest frame size that the server proposes for</span>
<span class="sd">                the connection. The client can negotiate a lower</span>
<span class="sd">                value.  Zero means that the server does not impose any</span>
<span class="sd">                specific limit but may reject very large frames if it</span>
<span class="sd">                cannot allocate resources for them.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    Until the frame-max has been negotiated, both</span>
<span class="sd">                    peers MUST accept frames of up to 4096 octets</span>
<span class="sd">                    large. The minimum non-zero value for the frame-</span>
<span class="sd">                    max field is 4096.</span>

<span class="sd">            heartbeat: short</span>

<span class="sd">                desired heartbeat delay</span>

<span class="sd">                The delay, in seconds, of the connection heartbeat</span>
<span class="sd">                that the server wants.  Zero means the server does not</span>
<span class="sd">                want a heartbeat.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client_heartbeat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_heartbeat</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_long</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_writer</span><span class="o">.</span><span class="n">frame_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_heartbeat</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">read_short</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span>

        <span class="c1"># negotiate the heartbeat interval to the smaller of the</span>
        <span class="c1"># specified values</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_heartbeat</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">client_heartbeat</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_heartbeat</span><span class="p">,</span> <span class="n">client_heartbeat</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_heartbeat</span><span class="p">,</span> <span class="n">client_heartbeat</span><span class="p">)</span>

        <span class="c1"># Ignore server heartbeat if client_heartbeat is disabled</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_heartbeat</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_x_tune_ok</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">send_heartbeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">write_frame</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">heartbeat_tick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Send heartbeat packets, if necessary, and fail if none have been</span>
<span class="sd">        received recently.  This should be called frequently, on the order of</span>
<span class="sd">        once per second.</span>

<span class="sd">        :keyword rate: Ignored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># treat actual data exchange in either direction as a heartbeat</span>
        <span class="n">sent_now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_writer</span><span class="o">.</span><span class="n">bytes_sent</span>
        <span class="n">recv_now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">bytes_recv</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span> <span class="o">!=</span> <span class="n">sent_now</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="o">!=</span> <span class="n">recv_now</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="o">=</span> <span class="n">sent_now</span><span class="p">,</span> <span class="n">recv_now</span>

        <span class="c1"># send a heartbeat if it&#39;s time to do so</span>
        <span class="k">if</span> <span class="n">monotonic</span><span class="p">()</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_heartbeat</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>

        <span class="c1"># if we&#39;ve missed two intervals&#39; heartbeats, fail; this gives the</span>
        <span class="c1"># server enough time to send heartbeats a little late</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span> <span class="o">&lt;</span> <span class="n">monotonic</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="n">ConnectionForced</span><span class="p">(</span><span class="s1">&#39;Too many heartbeats missed&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_x_tune_ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_max</span><span class="p">,</span> <span class="n">frame_max</span><span class="p">,</span> <span class="n">heartbeat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Negotiate connection tuning parameters</span>

<span class="sd">        This method sends the client&#39;s connection tuning parameters to</span>
<span class="sd">        the server. Certain fields are negotiated, others provide</span>
<span class="sd">        capability information.</span>

<span class="sd">        PARAMETERS:</span>
<span class="sd">            channel_max: short</span>

<span class="sd">                negotiated maximum channels</span>

<span class="sd">                The maximum total number of channels that the client</span>
<span class="sd">                will use per connection.  May not be higher than the</span>
<span class="sd">                value specified by the server.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    The server MAY ignore the channel-max value or MAY</span>
<span class="sd">                    use it for tuning its resource allocation.</span>

<span class="sd">            frame_max: long</span>

<span class="sd">                negotiated maximum frame size</span>

<span class="sd">                The largest frame size that the client and server will</span>
<span class="sd">                use for the connection.  Zero means that the client</span>
<span class="sd">                does not impose any specific limit but may reject very</span>
<span class="sd">                large frames if it cannot allocate resources for them.</span>
<span class="sd">                Note that the frame-max limit applies principally to</span>
<span class="sd">                content frames, where large contents can be broken</span>
<span class="sd">                into frames of arbitrary size.</span>

<span class="sd">                RULE:</span>

<span class="sd">                    Until the frame-max has been negotiated, both</span>
<span class="sd">                    peers must accept frames of up to 4096 octets</span>
<span class="sd">                    large. The minimum non-zero value for the frame-</span>
<span class="sd">                    max field is 4096.</span>

<span class="sd">            heartbeat: short</span>

<span class="sd">                desired heartbeat delay</span>

<span class="sd">                The delay, in seconds, of the connection heartbeat</span>
<span class="sd">                that the client wants. Zero means the client does not</span>
<span class="sd">                want a heartbeat.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">channel_max</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_long</span><span class="p">(</span><span class="n">frame_max</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">heartbeat</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_tune_ok</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">sock</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">server_capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;capabilities&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="n">_METHOD_MAP</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span> <span class="n">_start</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span> <span class="n">_secure</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span> <span class="n">_tune</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">41</span><span class="p">):</span> <span class="n">_open_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span> <span class="n">_close</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">):</span> <span class="n">_close_ok</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span> <span class="n">_blocked</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">61</span><span class="p">):</span> <span class="n">_unblocked</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">_IMMEDIATE_METHODS</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">connection_errors</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ConnectionError</span><span class="p">,</span>
        <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">,</span>
        <span class="ne">IOError</span><span class="p">,</span>
        <span class="ne">OSError</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">channel_errors</span> <span class="o">=</span> <span class="p">(</span><span class="n">ChannelError</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">recoverable_connection_errors</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">RecoverableConnectionError</span><span class="p">,</span>
        <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">,</span>
        <span class="ne">IOError</span><span class="p">,</span>
        <span class="ne">OSError</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">recoverable_channel_errors</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">RecoverableChannelError</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.Connection">Connection</a></li>
          <li>IoticAgent.third.amqp.abstract_channel.AbstractChannel</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.Channel" class="name">var <span class="ident">Channel</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.channel_errors" class="name">var <span class="ident">channel_errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.client_heartbeat" class="name">var <span class="ident">client_heartbeat</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.connection_errors" class="name">var <span class="ident">connection_errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.heartbeat" class="name">var <span class="ident">heartbeat</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.last_heartbeat_received" class="name">var <span class="ident">last_heartbeat_received</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.last_heartbeat_sent" class="name">var <span class="ident">last_heartbeat_sent</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.prev_recv" class="name">var <span class="ident">prev_recv</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.prev_sent" class="name">var <span class="ident">prev_sent</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.recoverable_channel_errors" class="name">var <span class="ident">recoverable_channel_errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.recoverable_connection_errors" class="name">var <span class="ident">recoverable_connection_errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.server_heartbeat" class="name">var <span class="ident">server_heartbeat</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, host=&#39;localhost&#39;, userid=&#39;guest&#39;, password=&#39;guest&#39;, login_method=&#39;AMQPLAIN&#39;, login_response=None, virtual_host=&#39;/&#39;, locale=&#39;en_US&#39;, client_properties=None, ssl=False, connect_timeout=None, operation_timeout=None, channel_max=None, frame_max=None, heartbeat=0, on_blocked=None, on_unblocked=None, confirm_publish=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a connection to the specified host, which should be
a 'host[:port]', such as 'localhost', or '1.2.3.4:5672'
(defaults to 'localhost', if a port is not specified then
5672 is used)</p>
<p>If login_response is not specified, one is built up for you from
userid and password if they are present.</p>
<p>The 'ssl' parameter may be simply True/False, or for Python &gt;= 2.6
a dictionary of options to pass to ssl.wrap_socket() such as
requiring certain certificates or an SSLContext (&gt;= 2.7.9) to use.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">userid</span><span class="o">=</span><span class="s1">&#39;guest&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;guest&#39;</span><span class="p">,</span>
             <span class="n">login_method</span><span class="o">=</span><span class="s1">&#39;AMQPLAIN&#39;</span><span class="p">,</span> <span class="n">login_response</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">virtual_host</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">,</span> <span class="n">client_properties</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">channel_max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">frame_max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">heartbeat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">on_blocked</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on_unblocked</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">confirm_publish</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a connection to the specified host, which should be</span>
<span class="sd">    a &#39;host[:port]&#39;, such as &#39;localhost&#39;, or &#39;1.2.3.4:5672&#39;</span>
<span class="sd">    (defaults to &#39;localhost&#39;, if a port is not specified then</span>
<span class="sd">    5672 is used)</span>
<span class="sd">    If login_response is not specified, one is built up for you from</span>
<span class="sd">    userid and password if they are present.</span>
<span class="sd">    The &#39;ssl&#39; parameter may be simply True/False, or for Python &gt;= 2.6</span>
<span class="sd">    a dictionary of options to pass to ssl.wrap_socket() such as</span>
<span class="sd">    requiring certain certificates or an SSLContext (&gt;= 2.7.9) to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">channel_max</span> <span class="o">=</span> <span class="n">channel_max</span> <span class="ow">or</span> <span class="mi">65535</span>
    <span class="n">frame_max</span> <span class="o">=</span> <span class="n">frame_max</span> <span class="ow">or</span> <span class="mi">131072</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">login_response</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> \
            <span class="ow">and</span> <span class="p">(</span><span class="n">userid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> \
            <span class="ow">and</span> <span class="p">(</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">login_response</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
        <span class="n">login_response</span><span class="o">.</span><span class="n">write_table</span><span class="p">({</span><span class="s1">&#39;LOGIN&#39;</span><span class="p">:</span> <span class="n">userid</span><span class="p">,</span> <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">})</span>
        <span class="c1"># Skip the length at the beginning</span>
        <span class="n">login_response</span> <span class="o">=</span> <span class="n">login_response</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()[</span><span class="mi">4</span><span class="p">:]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">LIBRARY_PROPERTIES</span><span class="p">,</span> <span class="o">**</span><span class="n">client_properties</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_method_override</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dispatch_basic_return</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># The connection object itself is treated as channel 0</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Connection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1"># Properties set in the Tune method</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span> <span class="o">=</span> <span class="n">channel_max</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span> <span class="o">=</span> <span class="n">frame_max</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client_heartbeat</span> <span class="o">=</span> <span class="n">heartbeat</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">confirm_publish</span> <span class="o">=</span> <span class="n">confirm_publish</span>
    <span class="c1"># Callbacks</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_blocked</span> <span class="o">=</span> <span class="n">on_blocked</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_unblocked</span> <span class="o">=</span> <span class="n">on_unblocked</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_avail_channel_ids</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel_max</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1"># Properties set in the Start method</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version_major</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version_minor</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">server_properties</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mechanisms</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">locales</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Let the transport.py module setup the actual</span>
    <span class="c1"># socket connection to the broker.</span>
    <span class="c1">#</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Transport</span><span class="p">(</span>
        <span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span> <span class="o">=</span> <span class="n">MethodReader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_writer</span> <span class="o">=</span> <span class="n">MethodWriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_max</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># start</span>
    <span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x_start_ok</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">login_method</span><span class="p">,</span> <span class="n">login_response</span><span class="p">,</span> <span class="n">locale</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_wait_tune_ok</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_tune_ok</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>  <span class="c1"># secure</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>  <span class="c1"># tune</span>
        <span class="p">])</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_open</span><span class="p">(</span><span class="n">virtual_host</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.Transport">
    <p>def <span class="ident">Transport</span>(</p><p>self, host, connect_timeout, operation_timeout, ssl=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.Transport', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.Transport" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">Transport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">create_transport</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="p">,</span> <span class="n">operation_timeout</span><span class="p">,</span> <span class="n">ssl</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.channel">
    <p>def <span class="ident">channel</span>(</p><p>self, channel_id=None, auto_encode_decode=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Fetch a Channel object identified by the numeric channel_id, or
create that object if it doesn't already exist. See Channel for meaning
of auto_encode_decode. If the channel already exists, the auto_* flag
will not be updated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.channel', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.channel" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_encode_decode</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fetch a Channel object identified by the numeric channel_id, or</span>
<span class="sd">    create that object if it doesn&#39;t already exist. See Channel for meaning</span>
<span class="sd">    of auto_encode_decode. If the channel already exists, the auto_* flag</span>
<span class="sd">    will not be updated.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">channel_id</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_id</span><span class="p">,</span>
                            <span class="n">auto_encode_decode</span><span class="o">=</span><span class="n">auto_encode_decode</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.close">
    <p>def <span class="ident">close</span>(</p><p>self, reply_code=0, reply_text=&#39;&#39;, method_sig=(0, 0))</p>
    </div>
    

    
  
    <div class="desc"><p>Request a connection close</p>
<p>This method indicates that the sender wants to close the
connection. This may be due to internal conditions (e.g. a
forced shut-down) or due to an error handling a specific
method, i.e. an exception.  When a close is due to an
exception, the sender provides the class and method id of the
method which caused the exception.</p>
<p>RULE:</p>
<div class="codehilite"><pre>After sending this method any received method except the
Close-OK method MUST be discarded.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>The peer sending this method MAY use a counter or timeout
to detect failure of the other peer to respond correctly
with the Close-OK method.
</pre></div>


<p>RULE:</p>
<div class="codehilite"><pre>When a server receives the Close method from a client it
MUST delete all server-side resources associated with the
client&#39;s context.  A client CANNOT reconnect to a context
after sending or receiving a Close method.
</pre></div>


<p>PARAMETERS:
    reply_code: short</p>
<div class="codehilite"><pre>    The reply code. The AMQ reply codes are defined in AMQ
    RFC 011.

reply_text: shortstr

    The localised reply text.  This text can be logged as an
    aid to resolving issues.

class_id: short

    failing method class

    When the close is provoked by a method exception, this
    is the class of the method.

method_id: short

    failing method ID

    When the close is provoked by a method exception, this
    is the ID of the method.
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.close', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.close" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;Request a connection close</span>
<span class="sd">    This method indicates that the sender wants to close the</span>
<span class="sd">    connection. This may be due to internal conditions (e.g. a</span>
<span class="sd">    forced shut-down) or due to an error handling a specific</span>
<span class="sd">    method, i.e. an exception.  When a close is due to an</span>
<span class="sd">    exception, the sender provides the class and method id of the</span>
<span class="sd">    method which caused the exception.</span>
<span class="sd">    RULE:</span>
<span class="sd">        After sending this method any received method except the</span>
<span class="sd">        Close-OK method MUST be discarded.</span>
<span class="sd">    RULE:</span>
<span class="sd">        The peer sending this method MAY use a counter or timeout</span>
<span class="sd">        to detect failure of the other peer to respond correctly</span>
<span class="sd">        with the Close-OK method.</span>
<span class="sd">    RULE:</span>
<span class="sd">        When a server receives the Close method from a client it</span>
<span class="sd">        MUST delete all server-side resources associated with the</span>
<span class="sd">        client&#39;s context.  A client CANNOT reconnect to a context</span>
<span class="sd">        after sending or receiving a Close method.</span>
<span class="sd">    PARAMETERS:</span>
<span class="sd">        reply_code: short</span>
<span class="sd">            The reply code. The AMQ reply codes are defined in AMQ</span>
<span class="sd">            RFC 011.</span>
<span class="sd">        reply_text: shortstr</span>
<span class="sd">            The localised reply text.  This text can be logged as an</span>
<span class="sd">            aid to resolving issues.</span>
<span class="sd">        class_id: short</span>
<span class="sd">            failing method class</span>
<span class="sd">            When the close is provoked by a method exception, this</span>
<span class="sd">            is the class of the method.</span>
<span class="sd">        method_id: short</span>
<span class="sd">            failing method ID</span>
<span class="sd">            When the close is provoked by a method exception, this</span>
<span class="sd">            is the ID of the method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># already closed</span>
        <span class="k">return</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">AMQPWriter</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">reply_code</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_shortstr</span><span class="p">(</span><span class="n">reply_text</span><span class="p">)</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># class_id</span>
    <span class="n">args</span><span class="o">.</span><span class="n">write_short</span><span class="p">(</span><span class="n">method_sig</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># method_id</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_method</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">allowed_methods</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>  <span class="c1"># Connection.close</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span>  <span class="c1"># Connection.close_ok</span>
        <span class="p">])</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># no point in waiting anymore</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="c1"># lack of communication should not prevent tidy-up</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_close</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.dispatch_method">
    <p>def <span class="ident">dispatch_method</span>(</p><p>self, method_sig, args, content)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.dispatch_method', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.dispatch_method" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">dispatch_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">content</span> <span class="ow">and</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="ow">and</span> \
            <span class="nb">hasattr</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;content_encoding&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">content</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">content</span><span class="o">.</span><span class="n">content_encoding</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">amqp_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_METHOD_MAP</span><span class="p">[</span><span class="n">method_sig</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AMQPNotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Unknown AMQP method {0!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_sig</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.drain_events">
    <p>def <span class="ident">drain_events</span>(</p><p>self, timeout=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait for an event on a channel.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.drain_events', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.drain_events" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">drain_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait for an event on a channel.&quot;&quot;&quot;</span>
    <span class="n">chanmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span>
    <span class="n">chanid</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_multiple</span><span class="p">(</span>
        <span class="n">chanmap</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">chanmap</span><span class="p">[</span><span class="n">chanid</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">content</span> <span class="ow">and</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">auto_encode_decode</span> <span class="ow">and</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;content_encoding&#39;</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">content</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">content</span><span class="o">.</span><span class="n">content_encoding</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="n">amqp_method</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_method_override</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">)</span> <span class="ow">or</span>
                   <span class="n">channel</span><span class="o">.</span><span class="n">_METHOD_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">amqp_method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AMQPNotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Unknown AMQP method {0!r}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method_sig</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amqp_method</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.heartbeat_tick">
    <p>def <span class="ident">heartbeat_tick</span>(</p><p>self, rate=2)</p>
    </div>
    

    
  
    <div class="desc"><p>Send heartbeat packets, if necessary, and fail if none have been
received recently.  This should be called frequently, on the order of
once per second.</p>
<p>:keyword rate: Ignored</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.heartbeat_tick', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.heartbeat_tick" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">heartbeat_tick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Send heartbeat packets, if necessary, and fail if none have been</span>
<span class="sd">    received recently.  This should be called frequently, on the order of</span>
<span class="sd">    once per second.</span>
<span class="sd">    :keyword rate: Ignored</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="c1"># treat actual data exchange in either direction as a heartbeat</span>
    <span class="n">sent_now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_writer</span><span class="o">.</span><span class="n">bytes_sent</span>
    <span class="n">recv_now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">bytes_recv</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span> <span class="o">!=</span> <span class="n">sent_now</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="o">!=</span> <span class="n">recv_now</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prev_sent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_recv</span> <span class="o">=</span> <span class="n">sent_now</span><span class="p">,</span> <span class="n">recv_now</span>
    <span class="c1"># send a heartbeat if it&#39;s time to do so</span>
    <span class="k">if</span> <span class="n">monotonic</span><span class="p">()</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_heartbeat</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_sent</span> <span class="o">=</span> <span class="n">monotonic</span><span class="p">()</span>
    <span class="c1"># if we&#39;ve missed two intervals&#39; heartbeats, fail; this gives the</span>
    <span class="c1"># server enough time to send heartbeats a little late</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_heartbeat_received</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heartbeat</span> <span class="o">&lt;</span> <span class="n">monotonic</span><span class="p">()):</span>
        <span class="k">raise</span> <span class="n">ConnectionForced</span><span class="p">(</span><span class="s1">&#39;Too many heartbeats missed&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.is_alive">
    <p>def <span class="ident">is_alive</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.is_alive', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.is_alive" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">HAS_MSG_PEEK</span><span class="p">:</span>
        <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">gettimeout</span><span class="p">()</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">MSG_PEEK</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.read_timeout">
    <p>def <span class="ident">read_timeout</span>(</p><p>self, timeout=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.read_timeout', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.read_timeout" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">read_method</span><span class="p">()</span>
    <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span>
    <span class="n">prev</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">gettimeout</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">prev</span> <span class="o">!=</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_reader</span><span class="o">.</span><span class="n">read_method</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">SSLError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="c1"># http://bugs.python.org/issue10272</span>
            <span class="k">if</span> <span class="s1">&#39;timed out&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">()</span>
            <span class="c1"># Non-blocking SSL sockets can throw SSLError</span>
            <span class="k">if</span> <span class="s1">&#39;The operation did not complete&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">()</span>
            <span class="k">raise</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prev</span> <span class="o">!=</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.send_heartbeat">
    <p>def <span class="ident">send_heartbeat</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.send_heartbeat', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.send_heartbeat" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">send_heartbeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">write_frame</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Connection.wait">
    <p>def <span class="ident">wait</span>(</p><p>self, allowed_methods=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait for a method that matches our allowed_methods parameter (the
default value of None means match any method), and dispatch to it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Connection.wait', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Connection.wait" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait for a method that matches our allowed_methods parameter (the</span>
<span class="sd">    default value of None means match any method), and dispatch to it.&quot;&quot;&quot;</span>
    <span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">_wait_method</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel_id</span><span class="p">,</span> <span class="n">allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch_method</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.channel_max" class="name">var <span class="ident">channel_max</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.channels" class="name">var <span class="ident">channels</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.client_heartbeat" class="name">var <span class="ident">client_heartbeat</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.confirm_publish" class="name">var <span class="ident">confirm_publish</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.connected" class="name">var <span class="ident">connected</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.frame_max" class="name">var <span class="ident">frame_max</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.locales" class="name">var <span class="ident">locales</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.mechanisms" class="name">var <span class="ident">mechanisms</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.method_reader" class="name">var <span class="ident">method_reader</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.method_writer" class="name">var <span class="ident">method_writer</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.on_blocked" class="name">var <span class="ident">on_blocked</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.on_unblocked" class="name">var <span class="ident">on_unblocked</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.server_capabilities" class="name">var <span class="ident">server_capabilities</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.server_properties" class="name">var <span class="ident">server_properties</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.sock" class="name">var <span class="ident">sock</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.transport" class="name">var <span class="ident">transport</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.version_major" class="name">var <span class="ident">version_major</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Connection.version_minor" class="name">var <span class="ident">version_minor</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ConnectionError" class="name">class <span class="ident">ConnectionError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConnectionError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConnectionError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ConnectionError</span><span class="p">(</span><span class="n">AMQPError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionError.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ConnectionError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConnectionError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConnectionError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ConnectionForced" class="name">class <span class="ident">ConnectionForced</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConnectionForced', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConnectionForced" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ConnectionForced</span><span class="p">(</span><span class="n">RecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">320</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ConnectionForced">ConnectionForced</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionForced.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionForced.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ConnectionForced.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConnectionForced.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConnectionForced.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConnectionForced.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ConsumerCancelled" class="name">class <span class="ident">ConsumerCancelled</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConsumerCancelled', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConsumerCancelled" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ConsumerCancelled</span><span class="p">(</span><span class="n">RecoverableConnectionError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ConsumerCancelled">ConsumerCancelled</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConsumerCancelled.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConsumerCancelled.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ConsumerCancelled.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ConsumerCancelled.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ConsumerCancelled.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ConsumerCancelled.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ContentTooLarge" class="name">class <span class="ident">ContentTooLarge</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ContentTooLarge', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ContentTooLarge" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ContentTooLarge</span><span class="p">(</span><span class="n">RecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">311</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ContentTooLarge">ContentTooLarge</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ContentTooLarge.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ContentTooLarge.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ContentTooLarge.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ContentTooLarge.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ContentTooLarge.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ContentTooLarge.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.FrameError" class="name">class <span class="ident">FrameError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.FrameError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.FrameError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">FrameError</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">501</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.FrameError">FrameError</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameError.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.FrameError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.FrameError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.FrameError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.FrameSyntaxError" class="name">class <span class="ident">FrameSyntaxError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.FrameSyntaxError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.FrameSyntaxError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">FrameSyntaxError</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">502</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.FrameSyntaxError">FrameSyntaxError</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameSyntaxError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameSyntaxError.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.FrameSyntaxError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.FrameSyntaxError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.FrameSyntaxError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.FrameSyntaxError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.InternalError" class="name">class <span class="ident">InternalError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InternalError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InternalError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">InternalError</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">541</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.InternalError">InternalError</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InternalError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.InternalError.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.InternalError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InternalError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InternalError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InternalError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.InvalidCommand" class="name">class <span class="ident">InvalidCommand</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InvalidCommand', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InvalidCommand" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">InvalidCommand</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">503</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.InvalidCommand">InvalidCommand</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidCommand.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidCommand.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.InvalidCommand.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InvalidCommand.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InvalidCommand.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidCommand.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.InvalidPath" class="name">class <span class="ident">InvalidPath</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InvalidPath', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InvalidPath" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">InvalidPath</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">402</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.InvalidPath">InvalidPath</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidPath.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidPath.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.InvalidPath.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.InvalidPath.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.InvalidPath.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.InvalidPath.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.IrrecoverableChannelError" class="name">class <span class="ident">IrrecoverableChannelError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.IrrecoverableChannelError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.IrrecoverableChannelError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">IrrecoverableChannelError</span><span class="p">(</span><span class="n">ChannelError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableChannelError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableChannelError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.IrrecoverableChannelError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.IrrecoverableChannelError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.IrrecoverableChannelError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableChannelError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.IrrecoverableConnectionError" class="name">class <span class="ident">IrrecoverableConnectionError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.IrrecoverableConnectionError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.IrrecoverableConnectionError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">IrrecoverableConnectionError</span><span class="p">(</span><span class="n">ConnectionError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableConnectionError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableConnectionError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.IrrecoverableConnectionError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.IrrecoverableConnectionError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.IrrecoverableConnectionError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.IrrecoverableConnectionError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.Message" class="name">class <span class="ident">Message</span></p>
      
  
    <div class="desc"><p>A Message for use with the Channnel.basic_* methods.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Message', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Message" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">Message</span><span class="p">(</span><span class="n">GenericContent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Message for use with the Channnel.basic_* methods.&quot;&quot;&quot;</span>

    <span class="c1">#: Instances of this class have these attributes, which</span>
    <span class="c1">#: are passed back and forth as message properties between</span>
    <span class="c1">#: client and server</span>
    <span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;content_encoding&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;application_headers&#39;</span><span class="p">,</span> <span class="s1">&#39;table&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;delivery_mode&#39;</span><span class="p">,</span> <span class="s1">&#39;octet&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;octet&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;correlation_id&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reply_to&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;expiration&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;message_id&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;app_id&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cluster_id&#39;</span><span class="p">,</span> <span class="s1">&#39;shortstr&#39;</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expected arg types</span>

<span class="sd">            body: string</span>
<span class="sd">            children: (not supported)</span>

<span class="sd">        Keyword properties may include:</span>

<span class="sd">            content_type: shortstr</span>
<span class="sd">                MIME content type</span>

<span class="sd">            content_encoding: shortstr</span>
<span class="sd">                MIME content encoding</span>

<span class="sd">            application_headers: table</span>
<span class="sd">                Message header field table, a dict with string keys,</span>
<span class="sd">                and string | int | Decimal | datetime | dict values.</span>

<span class="sd">            delivery_mode: octet</span>
<span class="sd">                Non-persistent (1) or persistent (2)</span>

<span class="sd">            priority: octet</span>
<span class="sd">                The message priority, 0 to 9</span>

<span class="sd">            correlation_id: shortstr</span>
<span class="sd">                The application correlation identifier</span>

<span class="sd">            reply_to: shortstr</span>
<span class="sd">                The destination to reply to</span>

<span class="sd">            expiration: shortstr</span>
<span class="sd">                Message expiration specification</span>

<span class="sd">            message_id: shortstr</span>
<span class="sd">                The application message identifier</span>

<span class="sd">            timestamp: datetime.datetime</span>
<span class="sd">                The message timestamp</span>

<span class="sd">            type: shortstr</span>
<span class="sd">                The message type name</span>

<span class="sd">            user_id: shortstr</span>
<span class="sd">                The creating user id</span>

<span class="sd">            app_id: shortstr</span>
<span class="sd">                The creating application id</span>

<span class="sd">            cluster_id: shortstr</span>
<span class="sd">                Intra-cluster routing identifier</span>

<span class="sd">        Unicode bodies are encoded according to the &#39;content_encoding&#39;</span>
<span class="sd">        argument. If that&#39;s None, it&#39;s set to &#39;UTF-8&#39; automatically.</span>

<span class="sd">        example::</span>

<span class="sd">            msg = Message(&#39;hello world&#39;,</span>
<span class="sd">                            content_type=&#39;text/plain&#39;,</span>
<span class="sd">                            application_headers={&#39;foo&#39;: 7})</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Message</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">channel</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the properties and bodies of this Message and another</span>
<span class="sd">        Message are the same.</span>

<span class="sd">        Received messages may contain a &#39;delivery_info&#39; attribute,</span>
<span class="sd">        which isn&#39;t compared.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">Message</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.Message">Message</a></li>
          <li>IoticAgent.third.amqp.serialization.GenericContent</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.Message.PROPERTIES" class="name">var <span class="ident">PROPERTIES</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.Message.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, body=&#39;&#39;, children=None, channel=None, **properties)</p>
    </div>
    

    
  
    <div class="desc"><p>Expected arg types</p>
<div class="codehilite"><pre><span class="n">body</span><span class="o">:</span> <span class="n">string</span>
<span class="n">children</span><span class="o">:</span> <span class="o">(</span><span class="n">not</span> <span class="n">supported</span><span class="o">)</span>
</pre></div>


<p>Keyword properties may include:</p>
<div class="codehilite"><pre><span class="n">content_type</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">MIME</span> <span class="n">content</span> <span class="n">type</span>

<span class="n">content_encoding</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">MIME</span> <span class="n">content</span> <span class="n">encoding</span>

<span class="n">application_headers</span><span class="o">:</span> <span class="n">table</span>
    <span class="n">Message</span> <span class="n">header</span> <span class="n">field</span> <span class="n">table</span><span class="o">,</span> <span class="n">a</span> <span class="n">dict</span> <span class="k">with</span> <span class="n">string</span> <span class="n">keys</span><span class="o">,</span>
    <span class="n">and</span> <span class="n">string</span> <span class="o">|</span> <span class="n">int</span> <span class="o">|</span> <span class="n">Decimal</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="n">dict</span> <span class="n">values</span><span class="o">.</span>

<span class="n">delivery_mode</span><span class="o">:</span> <span class="n">octet</span>
    <span class="n">Non</span><span class="o">-</span><span class="n">persistent</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">or</span> <span class="n">persistent</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span>

<span class="n">priority</span><span class="o">:</span> <span class="n">octet</span>
    <span class="n">The</span> <span class="n">message</span> <span class="n">priority</span><span class="o">,</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">9</span>

<span class="n">correlation_id</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">application</span> <span class="n">correlation</span> <span class="n">identifier</span>

<span class="n">reply_to</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">destination</span> <span class="n">to</span> <span class="n">reply</span> <span class="n">to</span>

<span class="n">expiration</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">Message</span> <span class="n">expiration</span> <span class="n">specification</span>

<span class="n">message_id</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">application</span> <span class="n">message</span> <span class="n">identifier</span>

<span class="n">timestamp</span><span class="o">:</span> <span class="n">datetime</span><span class="o">.</span><span class="na">datetime</span>
    <span class="n">The</span> <span class="n">message</span> <span class="n">timestamp</span>

<span class="n">type</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">message</span> <span class="n">type</span> <span class="n">name</span>

<span class="n">user_id</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">creating</span> <span class="n">user</span> <span class="n">id</span>

<span class="n">app_id</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">The</span> <span class="n">creating</span> <span class="n">application</span> <span class="n">id</span>

<span class="n">cluster_id</span><span class="o">:</span> <span class="n">shortstr</span>
    <span class="n">Intra</span><span class="o">-</span><span class="n">cluster</span> <span class="n">routing</span> <span class="n">identifier</span>
</pre></div>


<p>Unicode bodies are encoded according to the 'content_encoding'
argument. If that's None, it's set to 'UTF-8' automatically.</p>
<p>example::</p>
<div class="codehilite"><pre>msg = Message(&#39;hello world&#39;,
                content_type=&#39;text/plain&#39;,
                application_headers={&#39;foo&#39;: 7})
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.Message.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.Message.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Expected arg types</span>
<span class="sd">        body: string</span>
<span class="sd">        children: (not supported)</span>
<span class="sd">    Keyword properties may include:</span>
<span class="sd">        content_type: shortstr</span>
<span class="sd">            MIME content type</span>
<span class="sd">        content_encoding: shortstr</span>
<span class="sd">            MIME content encoding</span>
<span class="sd">        application_headers: table</span>
<span class="sd">            Message header field table, a dict with string keys,</span>
<span class="sd">            and string | int | Decimal | datetime | dict values.</span>
<span class="sd">        delivery_mode: octet</span>
<span class="sd">            Non-persistent (1) or persistent (2)</span>
<span class="sd">        priority: octet</span>
<span class="sd">            The message priority, 0 to 9</span>
<span class="sd">        correlation_id: shortstr</span>
<span class="sd">            The application correlation identifier</span>
<span class="sd">        reply_to: shortstr</span>
<span class="sd">            The destination to reply to</span>
<span class="sd">        expiration: shortstr</span>
<span class="sd">            Message expiration specification</span>
<span class="sd">        message_id: shortstr</span>
<span class="sd">            The application message identifier</span>
<span class="sd">        timestamp: datetime.datetime</span>
<span class="sd">            The message timestamp</span>
<span class="sd">        type: shortstr</span>
<span class="sd">            The message type name</span>
<span class="sd">        user_id: shortstr</span>
<span class="sd">            The creating user id</span>
<span class="sd">        app_id: shortstr</span>
<span class="sd">            The creating application id</span>
<span class="sd">        cluster_id: shortstr</span>
<span class="sd">            Intra-cluster routing identifier</span>
<span class="sd">    Unicode bodies are encoded according to the &#39;content_encoding&#39;</span>
<span class="sd">    argument. If that&#39;s None, it&#39;s set to &#39;UTF-8&#39; automatically.</span>
<span class="sd">    example::</span>
<span class="sd">        msg = Message(&#39;hello world&#39;,</span>
<span class="sd">                        content_type=&#39;text/plain&#39;,</span>
<span class="sd">                        application_headers={&#39;foo&#39;: 7})</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Message</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">channel</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.Message.body" class="name">var <span class="ident">body</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.Message.channel" class="name">var <span class="ident">channel</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.NoConsumers" class="name">class <span class="ident">NoConsumers</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NoConsumers', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NoConsumers" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">NoConsumers</span><span class="p">(</span><span class="n">RecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">313</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.NoConsumers">NoConsumers</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NoConsumers.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.NoConsumers.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.NoConsumers.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NoConsumers.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NoConsumers.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NoConsumers.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.NotAllowed" class="name">class <span class="ident">NotAllowed</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NotAllowed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NotAllowed" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">NotAllowed</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">530</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.NotAllowed">NotAllowed</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotAllowed.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotAllowed.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.NotAllowed.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NotAllowed.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NotAllowed.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotAllowed.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.NotFound" class="name">class <span class="ident">NotFound</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NotFound', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NotFound" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">NotFound</span><span class="p">(</span><span class="n">IrrecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">404</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.NotFound">NotFound</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotFound.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotFound.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.NotFound.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.NotFound.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.NotFound.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.NotFound.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.PreconditionFailed" class="name">class <span class="ident">PreconditionFailed</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.PreconditionFailed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.PreconditionFailed" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">PreconditionFailed</span><span class="p">(</span><span class="n">IrrecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">406</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.PreconditionFailed">PreconditionFailed</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.PreconditionFailed.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.PreconditionFailed.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.PreconditionFailed.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.PreconditionFailed.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.PreconditionFailed.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.PreconditionFailed.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError">IrrecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.RecoverableChannelError" class="name">class <span class="ident">RecoverableChannelError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.RecoverableChannelError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.RecoverableChannelError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">RecoverableChannelError</span><span class="p">(</span><span class="n">ChannelError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableChannelError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableChannelError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.RecoverableChannelError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.RecoverableChannelError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.RecoverableChannelError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableChannelError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.RecoverableConnectionError" class="name">class <span class="ident">RecoverableConnectionError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.RecoverableConnectionError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.RecoverableConnectionError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">RecoverableConnectionError</span><span class="p">(</span><span class="n">ConnectionError</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableConnectionError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableConnectionError.code" class="name">var <span class="ident">code</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.RecoverableConnectionError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.RecoverableConnectionError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.RecoverableConnectionError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.RecoverableConnectionError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ResourceError" class="name">class <span class="ident">ResourceError</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ResourceError', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ResourceError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ResourceError</span><span class="p">(</span><span class="n">RecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">506</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ResourceError">ResourceError</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceError.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceError.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ResourceError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ResourceError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ResourceError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceError.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableConnectionError">RecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.ResourceLocked" class="name">class <span class="ident">ResourceLocked</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ResourceLocked', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ResourceLocked" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ResourceLocked</span><span class="p">(</span><span class="n">RecoverableChannelError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">405</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.ResourceLocked">ResourceLocked</a></li>
          <li><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceLocked.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ChannelError">ChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.ChannelError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceLocked.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.ResourceLocked.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.ResourceLocked.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.ResourceLocked.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.ResourceLocked.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.RecoverableChannelError">RecoverableChannelError</a></code>.<code><a href="#IoticAgent.third.amqp.RecoverableChannelError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="IoticAgent.third.amqp.UnexpectedFrame" class="name">class <span class="ident">UnexpectedFrame</span></p>
      
  
    <div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.UnexpectedFrame', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.UnexpectedFrame" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">UnexpectedFrame</span><span class="p">(</span><span class="n">IrrecoverableConnectionError</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="mi">505</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.third.amqp.UnexpectedFrame">UnexpectedFrame</a></li>
          <li><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></li>
          <li><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></li>
          <li>builtins.Exception</li>
          <li>builtins.BaseException</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.UnexpectedFrame.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.ConnectionError">ConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.ConnectionError.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.third.amqp.UnexpectedFrame.code" class="name">var <span class="ident">code</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.AMQPError">AMQPError</a></code>.<code><a href="#IoticAgent.third.amqp.AMQPError.code">code</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.third.amqp.UnexpectedFrame.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, reply_text=None, method_sig=None, method_name=None, reply_code=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.third.amqp.UnexpectedFrame.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.third.amqp.UnexpectedFrame.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method_sig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">method_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reply_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_code</span> <span class="o">=</span> <span class="n">reply_code</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_text</span> <span class="o">=</span> <span class="n">reply_text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_sig</span> <span class="o">=</span> <span class="n">method_sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">method_sig</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">METHOD_NAME_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method_sig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_code</span><span class="p">,</span>
                       <span class="n">reply_text</span><span class="p">,</span> <span class="n">method_sig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.third.amqp.UnexpectedFrame.method" class="name">var <span class="ident">method</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError">IrrecoverableConnectionError</a></code>.<code><a href="#IoticAgent.third.amqp.IrrecoverableConnectionError.method">method</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
