<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>IoticAgent.IOT.Thing API documentation</title>
    <meta name="description" content="Wrapper object for Iotic Things" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #05B;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 1px dashed #CCCCCC;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #E95420;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_ENTITY_LID">P_ENTITY_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_EPID">P_EPID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_ID">P_ID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_LID">P_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_ENTITY_LID">P_POINT_ENTITY_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_ID">P_POINT_ID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_LID">P_POINT_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_TYPE">P_POINT_TYPE</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_RESOURCE">P_RESOURCE</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_CONTROL">R_CONTROL</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_FEED">R_FEED</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_SUB">R_SUB</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.logger">logger</a></li>
  </ul>

    </li>


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.IOT.Thing.Thing">Thing</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.__init__">__init__</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.attach">attach</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.attach_async">attach_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_control">create_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_control_async">create_control_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_feed">create_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_feed_async">create_feed_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_tag">create_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_control">delete_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_control_async">delete_control_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_feed">delete_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_feed_async">delete_feed_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_tag">delete_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.follow">follow</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.follow_async">follow_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_control">get_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_feed">get_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_meta">get_meta</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_meta_rdf">get_meta_rdf</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_remote_control">get_remote_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_remote_feed">get_remote_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_connections">list_connections</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_controls">list_controls</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_feeds">list_feeds</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_tag">list_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.reassign">reassign</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.rename">rename</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.set_meta_rdf">set_meta_rdf</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.set_public">set_public</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.unattach">unattach</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.unfollow">unfollow</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">IoticAgent.IOT.Thing</span> module</h1>
  <p>Wrapper object for Iotic Things</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing" class="source">
    <pre><code># Copyright (c) 2016 Iotic Labs Ltd. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://github.com/Iotic-Labs/py-IoticAgent/blob/master/LICENSE
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
"""Wrapper object for Iotic Things
"""
from __future__ import unicode_literals

from contextlib import contextmanager
import logging
logger = logging.getLogger(__name__)

from IoticAgent.Core.Const import (P_RESOURCE, R_FEED, R_CONTROL, R_SUB, P_ID, P_LID, P_ENTITY_LID, P_POINT_LID,
                                   P_POINT_ID, P_POINT_ENTITY_LID, P_POINT_TYPE, P_EPID)
from IoticAgent.Core import ThreadSafeDict
from IoticAgent.Core.compat import raise_from, string_types, Sequence
from IoticAgent.Core.Validation import Validation

from .Exceptions import IOTClientError
from .Resource import Resource
from .RemotePoint import RemoteFeed, RemoteControl
from .Point import Feed, Control
from .utils import foc_to_str, uuid_to_hex
from .ThingMeta import ThingMeta

_POINT_TYPE_TO_CLASS = {cls._type: cls for cls in (Feed, Control)}


class Thing(Resource):  # pylint: disable=too-many-public-methods
    """Thing class
    """

    def __init__(self, client, lid, guid, epId):
        super(Thing, self).__init__(client, guid)
        self.__lid = Validation.lid_check_convert(lid)
        self.__epId = Validation.guid_check_convert(epId)
        # Keep track of newly created points & subs (the requests for which originated from current agent)
        self.__new_feeds = ThreadSafeDict()
        self.__new_controls = ThreadSafeDict()
        self.__new_subs = ThreadSafeDict()

    def __str__(self):
        return '%s (thing, %s)' % (self.guid, self.__lid)

    def __hash__(self):
        # Why not just hash guid? Because Thing is used before knowing guid in some cases
        # Why not hash without guid? Because in two separate containers one could have identicial things
        # (if not taking guid into account)
        return hash(self.__lid) ^ hash(self.guid)

    def __eq__(self, other):
        return (isinstance(other, Thing) and
                self.guid == other.guid and
                self.__lid == other.__lid)

    @property
    def lid(self):
        """The local id of this Thing.  This is unique to you on this container.
        Think of it as a nickname for the Thing
        """
        return self.__lid

    @property
    def agent_id(self):
        """Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any
        agent. The following actions can only be performed with a Thing if operating in its associated agent:

        - Receive feed data from feeds the Thing is following
        - Share feed data for feeds this Thing owns
        - Receive control requests for controls the Thing owns
        - Perform ask/tell on a control this Thing is attached to

        Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or
        remote ([IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)) exception to be raised.
        """
        return self.__epId

    def __list(self, foc, limit=500, offset=0):
        logger.info("__list(foc=\"%s\", limit=%s, offset=%s) [lid=%s]", foc_to_str(foc), limit, offset, self.__lid)
        evt = self._client._request_point_list(foc, self.__lid, limit=limit, offset=offset)
        self._client._wait_and_except_if_failed(evt)
        return evt.payload

    def list_feeds(self, limit=500, offset=0):
        """List `all` the feeds on this Thing.

        Returns QAPI list function payload

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return this many Point details

        `offset` (optional) (integer) Return Point details starting at this offset
        """
        return self.__list(R_FEED, limit=limit, offset=offset)['feeds']

    def list_controls(self, limit=500, offset=0):
        """List `all` the controls on this Thing.

        Returns QAPI list function payload

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return this many Point details

        `offset` (optional) (integer) Return Point details starting at this offset
        """
        return self.__list(R_CONTROL, limit=limit, offset=offset)['controls']

    def set_public(self, public=True):
        """Sets your Thing to be public to all.  If `public=True`.
        This means the tags, label and description of your Thing are now searchable by anybody, along with its
        location and the units of any values on any Points.
        If `public=False` the metadata of your Thing is no longer searchable.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `public` (optional) (boolean) Whether (or not) to allow your Thing's metadata
        to be searched by anybody
        """
        logger.info("set_public(public=%s) [lid=%s]", public, self.__lid)
        evt = self._client._request_entity_meta_setpublic(self.__lid, public)
        self._client._wait_and_except_if_failed(evt)

    def rename(self, new_lid):
        """Rename the Thing.

        `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you
        create another Thing using the "old_lid", the system will oblige, but it will be a completely _new_ Thing.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `new_lid` (required) (string) the new local identifier of your Thing
        """
        logger.info("rename(new_lid=\"%s\") [lid=%s]", new_lid, self.__lid)
        evt = self._client._request_entity_rename(self.__lid, new_lid)
        self._client._wait_and_except_if_failed(evt)
        self.__lid = new_lid
        self._client._notify_thing_lid_change(self.__lid, new_lid)

    def reassign(self, new_epid):
        """Reassign the Thing from one agent to another.

        `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.
        They won't be able to receive control requests, feed data or to share any feeds as they won't be in this agent.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,
        current agent will be chosen. If False, existing agent will be unassigned.
        """
        logger.info("reassign(new_epid=\"%s\") [lid=%s]", new_epid, self.__lid)
        evt = self._client._request_entity_reassign(self.__lid, new_epid)
        self._client._wait_and_except_if_failed(evt)

    def create_tag(self, tags):
        """Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters
        and the underscore. Tags will be stored lower-cased.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.
        `["garden", "soil"]`
        """
        if isinstance(tags, str):
            tags = [tags]

        evt = self._client._request_entity_tag_update(self.__lid, tags, delete=False)
        self._client._wait_and_except_if_failed(evt)

    def delete_tag(self, tags):
        """Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased
        will be deleted.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.
        `["garden", "soil"]`
        """
        if isinstance(tags, str):
            tags = [tags]

        evt = self._client._request_entity_tag_update(self.__lid, tags, delete=True)
        self._client._wait_and_except_if_failed(evt)

    def list_tag(self, limit=500, offset=0):
        """List `all` the tags for this Thing

        Returns lists of tags, as below

            #!python
            [
                "mytag1",
                "mytag2"
                "ein_name",
                "nochein_name"
            ]

        - OR...

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return at most this many tags

        `offset` (optional) (integer) Return tags starting at this offset
        """
        evt = self._client._request_entity_tag_list(self.__lid, limit=limit, offset=offset)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['tags']

    def get_meta(self):
        """Get the metadata object for this Thing

        Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object
        """
        rdf = self.get_meta_rdf(fmt='n3')
        return ThingMeta(self, rdf, self._client.default_lang, fmt='n3')

    def get_meta_rdf(self, fmt='n3'):
        """Get the metadata for this Thing in rdf fmt

        Advanced users who want to manipulate the RDF for this Thing directly without the
        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object

        Returns the RDF in the format you specify. - OR -

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `fmt` (optional) (string) The format of RDF you want returned.
        Valid formats are: "xml", "n3", "turtle"
        """
        evt = self._client._request_entity_meta_get(self.__lid, fmt=fmt)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['meta']

    def set_meta_rdf(self, rdf, fmt='n3'):
        """Set the metadata for this Thing in RDF fmt

        Advanced users who want to manipulate the RDF for this Thing directly without the
        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `fmt` (optional) (string) The format of RDF you have sent.
        Valid formats are: "xml", "n3", "turtle"
        """
        evt = self._client._request_entity_meta_set(self.__lid, rdf, fmt=fmt)
        self._client._wait_and_except_if_failed(evt)

    def get_feed(self, pid):
        """Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed
        instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_feed once, any further calls will raise a `KeyError`

        Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
        which corresponds to the cached entry for this local feed id

        `pid` (required) (string) Point id - local identifier of your feed.

        Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)
        """
        with self.__new_feeds:
            try:
                return self.__new_feeds.pop(pid)
            except KeyError as ex:
                raise_from(KeyError('Feed %s not know as new' % pid), ex)

    def get_control(self, pid):
        """Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new
        control instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_control once, any further calls will raise a `KeyError`

        Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,
        which corresponds to the cached entry for this local control id

        `pid` (required) (string) local identifier of your control.

        Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)
        """
        with self.__new_controls:
            try:
                return self.__new_controls.pop(pid)
            except KeyError as ex:
                raise_from(KeyError('Control %s not know as new' % pid), ex)

    def __create_point(self, foc, pid, control_cb=None, save_recent=0):
        evt = self.__create_point_async(foc, pid, control_cb=control_cb, save_recent=save_recent)
        self._client._wait_and_except_if_failed(evt)
        store = self.__new_feeds if foc == R_FEED else self.__new_controls
        try:
            with store:
                return store.pop(pid)
        except KeyError as ex:
            raise raise_from(IOTClientError('%s %s (from %s) not in cache (post-create)' %
                                            (foc_to_str(foc), pid, self.__lid)),
                             ex)

    def __create_point_async(self, foc, pid, control_cb=None, save_recent=0):
        return self._client._request_point_create(foc, self.__lid, pid, control_cb=control_cb, save_recent=save_recent)

    def create_feed(self, pid, save_recent=0):
        """Create a new Feed for this Thing with a local point id (pid).

        Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
        or the existing one, if the Feed already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local id of your Feed

        `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this
        argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum
        sample store amount. See also
        [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).
        """
        logger.info("create_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__create_point(R_FEED, pid, save_recent=save_recent)

    def create_feed_async(self, pid, save_recent=0):
        logger.info("create_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__create_point_async(R_FEED, pid, save_recent=save_recent)

    def create_control(self, pid, callback, callback_parsed=None):
        """Create a control for this Thing with a local point id (pid) and a control request feedback

        Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object
        or the existing one if the Control already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local id of your Control

        `callback` (required) (function reference) callback function to invoke on receipt of a control request.
        The callback receives a single dict argument, with keys of:

            #!python
            'data'      # (decoded or raw bytes)
            'mime'      # (None, unless payload was not decoded and has a mime type)
            'subId'     # (the global id of the associated subscripion)
            'entityLid' # (local id of the Thing to which the control belongs)
            'lid'       # (local id of control)
            'confirm'   # (whether a confirmation is expected)
            'requestId' # (required for sending confirmation)

        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This
        is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
        if the point data could not be parsed according to its current value description.

        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
        """
        logger.info("create_control(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
        if callback_parsed:
            callback = self._client._get_parsed_control_callback(callback_parsed, callback)
        return self.__create_point(R_CONTROL, pid, control_cb=callback)

    def create_control_async(self, pid, callback, callback_parsed=None):
        logger.info("create_control_async(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
        if callback_parsed:
            callback = self._client._get_parsed_control_callback(callback_parsed, callback)
        return self.__create_point_async(R_CONTROL, pid, control_cb=callback)

    def __delete_point(self, foc, pid):
        evt = self.__delete_point_async(foc, pid)
        self._client._wait_and_except_if_failed(evt)

    def __delete_point_async(self, foc, pid):
        return self._client._request_point_delete(foc, self.__lid, pid)

    def delete_feed(self, pid):
        """Delete a feed, identified by its local id.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local identifier of your feed you want to delete

        """
        logger.info("delete_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point(R_FEED, pid)

    def delete_feed_async(self, pid):
        logger.info("delete_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point_async(R_FEED, pid)

    def delete_control(self, pid):
        """Delete a control, identified by its local id.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local identifier of your control you want to delete
        """
        logger.info("delete_control(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point(R_CONTROL, pid)

    def delete_control_async(self, pid):
        logger.info("delete_control_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point_async(R_CONTROL, pid)

    def __get_sub(self, foc, gpid):
        # global
        if isinstance(gpid, string_types):
            gpid = uuid_to_hex(gpid)
        # not local
        elif not (isinstance(gpid, Sequence) and len(gpid) == 2):
            raise ValueError('gpid must be string or two-element tuple')
        try:
            sub = self.__new_subs.pop((foc, gpid))
        except KeyError as ex:
            raise_from(KeyError('Remote%s subscription %s not know as new' % (foc_to_str(foc).capitalize(), gpid)), ex)
        if sub is None:
            raise ValueError('Either subscription not complete yet or point %s is of opposite type. (In which case'
                             ' call %s instead' % (gpid, 'attach()' if foc == R_FEED else 'follow()'))
        return sub

    def get_remote_feed(self, gpid):
        """Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the
        new `RemoteFeed` instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_remote_feed once, any further calls will raise a `KeyError`

        Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a
        previous call)

        Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has
        not completed yet.
        """
        return self.__get_sub(R_FEED, gpid)

    def get_remote_control(self, gpid):
        """Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the
        new `RemoteControl` instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_remote_control once, any further calls will raise a `KeyError`

        Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a
        previous call)

        Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has
        not completed yet."""
        return self.__get_sub(R_CONTROL, gpid)

    @contextmanager
    def __sub_add_reference(self, key):
        """Used by __sub_make_request to save reference for pending sub request"""
        new_subs = self.__new_subs
        with new_subs:
            # don't allow multiple subscription requests to overwrite internal reference
            if key in new_subs:
                raise ValueError('subscription for given args pending: %s' % key)
            new_subs[key] = None
        try:
            yield
        except:
            # don't preserve reference if request creation failed
            with new_subs:
                new_subs.pop(key, None)
            raise

    def __sub_make_request(self, foc, gpid, callback):
        """Make right subscription request depending on whether local or global - used by __sub*"""
        # global
        if isinstance(gpid, string_types):
            gpid = uuid_to_hex(gpid)
            with self.__sub_add_reference((foc, gpid)):
                return self._client._request_sub_create(self.__lid, foc, gpid, callback=callback)
        # local
        elif isinstance(gpid, Sequence) and len(gpid) == 2:
            with self.__sub_add_reference((foc, tuple(gpid))):
                return self._client._request_sub_create_local(self.__lid, foc, *gpid, callback=callback)
        else:
            raise ValueError('gpid must be string or two-element tuple')

    def __sub(self, foc, gpid, callback=None):
        logger.info("__sub(foc=%s, gpid=\"%s\", callback=%s) [lid=%s]", foc_to_str(foc), gpid, callback, self.__lid)
        evt = self.__sub_async(foc, gpid, callback=callback)
        self._client._wait_and_except_if_failed(evt)
        try:
            return self.__get_sub(foc, gpid)
        except KeyError as ex:
            raise raise_from(IOTClientError('Subscription for %s (from %s) not in cache (post-create)' %
                                            gpid, self.__lid),
                             ex)

    def __sub_async(self, foc, gpid, callback=None):
        logger.info("__sub(foc=%s, gpid=\"%s\", callback=%s) [lid=%s]", foc_to_str(foc), gpid, callback, self.__lid)
        return self.__sub_make_request(foc, gpid, callback)

    def follow(self, gpid, callback=None, callback_parsed=None):
        """Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback

        Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)
        object or the existing one if the subscription already exists - OR -

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`

        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription

        `callback` (optional) (function reference) callback function to invoke on receipt of feed data.
        The callback receives a single dict argument, with keys of:

            #!python
            'data' # (decoded or raw bytes)
            'mime' # (None, unless payload was not decoded and has a mime type)
            'pid'  # (the global id of the feed from which the data originates)
            'time' # (datetime representing UTC timestamp of share)

        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is
        equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
        if the point data could not be parsed according to its current value description.

        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
        """
        if callback_parsed:
            callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
        return self.__sub(R_FEED, gpid, callback=callback)

    def follow_async(self, gpid, callback=None, callback_parsed=None):
        if callback_parsed:
            callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
        return self.__sub_async(R_FEED, gpid, callback=callback)

    def attach(self, gpid):
        """Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback

        Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)
        object or the existing one if the subscription already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`

        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription
        """
        return self.__sub(R_CONTROL, gpid)

    def attach_async(self, gpid):
        return self.__sub_async(R_CONTROL, gpid)

    def __sub_delete(self, subid):
        if isinstance(subid, (RemoteFeed, RemoteControl)):
            subid = subid.subid
        evt = self._client._request_sub_delete(subid)
        self._client._wait_and_except_if_failed(evt)

    def unfollow(self, subid):
        """Remove a subscription of a Feed with a global subscription id (gpid)

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`
        (object) The instance of a RemoteFeed object corresponding to the feed you want to cease
        following.
        """
        return self.__sub_delete(subid)

    def unattach(self, subid):
        """Remove a subscription of a control with a global subscription id (gpid)

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`
        (object) The instance of a RemoteControl object corresponding to the control you want
        to cease being able to actuate.
        """
        return self.__sub_delete(subid)

    def list_connections(self, limit=500, offset=0):
        """List Points to which this Things is subscribed.
        I.e. list all the Points this Thing is following and controls it's attached to

        Returns subscription list e.g.

            #!python
            {
                "<Subscription GUID 1>": {
                    "id": "<Control GUID>",
                    "entityId":  "<Control's Thing GUID>",
                    "type": 3  # R_CONTROL from IoticAgent.Core.Const
                },
                "<Subscription GUID 2>": {
                    "id": "<Feed GUID>",
                    "entityId":  "<Feed's Thing GUID>",
                    "type": 2  # R_FEED from IoticAgent.Core.Const
            }

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        Note: For Things following a Point see
        [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)
        """
        evt = self._client._request_sub_list(self.__lid, limit=limit, offset=offset)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['subs']

    def _cb_created(self, payload, duplicated):
        """Indirect callback (via Client) for point & subscription creation responses"""
        if payload[P_RESOURCE] in _POINT_TYPE_TO_CLASS:
            store = self.__new_feeds if payload[P_RESOURCE] == R_FEED else self.__new_controls
            cls = _POINT_TYPE_TO_CLASS[payload[P_RESOURCE]]
            with store:
                store[payload[P_LID]] = cls(self._client, payload[P_ENTITY_LID], payload[P_LID], payload[P_ID])
            logger.debug('Added %s: %s (for %s)', foc_to_str(payload[P_RESOURCE]), payload[P_LID],
                         payload[P_ENTITY_LID])

        elif payload[P_RESOURCE] == R_SUB:
            # local
            if P_POINT_ENTITY_LID in payload:
                key = (payload[P_POINT_TYPE], (payload[P_POINT_ENTITY_LID], payload[P_POINT_LID]))
            # global
            else:
                key = (payload[P_POINT_TYPE], payload[P_POINT_ID])

            new_subs = self.__new_subs
            with new_subs:
                if key in new_subs:
                    cls = RemoteFeed if payload[P_POINT_TYPE] == R_FEED else RemoteControl
                    new_subs[key] = cls(self._client, payload[P_ID], payload[P_POINT_ID], payload[P_ENTITY_LID])
                else:
                    logger.warning('Ignoring subscription creation for unexpected %s: %s',
                                   foc_to_str(payload[P_POINT_TYPE]), key[1])

        else:
            logger.error('Resource creation of type %d unhandled', payload[P_RESOURCE])

    def _cb_reassigned(self, payload):
        self.__epId = payload[P_EPID]
        logger.info('Thing %s reassigned to agent %s', self.__lid, self.__epId)
</code></pre>
  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_ENTITY_LID" class="name">var <span class="ident">P_ENTITY_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_EPID" class="name">var <span class="ident">P_EPID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_ID" class="name">var <span class="ident">P_ID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_LID" class="name">var <span class="ident">P_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_ENTITY_LID" class="name">var <span class="ident">P_POINT_ENTITY_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_ID" class="name">var <span class="ident">P_POINT_ID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_LID" class="name">var <span class="ident">P_POINT_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_TYPE" class="name">var <span class="ident">P_POINT_TYPE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_RESOURCE" class="name">var <span class="ident">P_RESOURCE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_CONTROL" class="name">var <span class="ident">R_CONTROL</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_FEED" class="name">var <span class="ident">R_FEED</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_SUB" class="name">var <span class="ident">R_SUB</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.logger" class="name">var <span class="ident">logger</span></p>
      
  
  <div class="source_cont">
</div>

      </div>


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="IoticAgent.IOT.Thing.Thing" class="name">class <span class="ident">Thing</span></p>
      
  
    <div class="desc"><p>Thing class</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing" class="source">
    <pre><code>class Thing(Resource):  # pylint: disable=too-many-public-methods
    """Thing class
    """

    def __init__(self, client, lid, guid, epId):
        super(Thing, self).__init__(client, guid)
        self.__lid = Validation.lid_check_convert(lid)
        self.__epId = Validation.guid_check_convert(epId)
        # Keep track of newly created points & subs (the requests for which originated from current agent)
        self.__new_feeds = ThreadSafeDict()
        self.__new_controls = ThreadSafeDict()
        self.__new_subs = ThreadSafeDict()

    def __str__(self):
        return '%s (thing, %s)' % (self.guid, self.__lid)

    def __hash__(self):
        # Why not just hash guid? Because Thing is used before knowing guid in some cases
        # Why not hash without guid? Because in two separate containers one could have identicial things
        # (if not taking guid into account)
        return hash(self.__lid) ^ hash(self.guid)

    def __eq__(self, other):
        return (isinstance(other, Thing) and
                self.guid == other.guid and
                self.__lid == other.__lid)

    @property
    def lid(self):
        """The local id of this Thing.  This is unique to you on this container.
        Think of it as a nickname for the Thing
        """
        return self.__lid

    @property
    def agent_id(self):
        """Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any
        agent. The following actions can only be performed with a Thing if operating in its associated agent:

        - Receive feed data from feeds the Thing is following
        - Share feed data for feeds this Thing owns
        - Receive control requests for controls the Thing owns
        - Perform ask/tell on a control this Thing is attached to

        Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or
        remote ([IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)) exception to be raised.
        """
        return self.__epId

    def __list(self, foc, limit=500, offset=0):
        logger.info("__list(foc=\"%s\", limit=%s, offset=%s) [lid=%s]", foc_to_str(foc), limit, offset, self.__lid)
        evt = self._client._request_point_list(foc, self.__lid, limit=limit, offset=offset)
        self._client._wait_and_except_if_failed(evt)
        return evt.payload

    def list_feeds(self, limit=500, offset=0):
        """List `all` the feeds on this Thing.

        Returns QAPI list function payload

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return this many Point details

        `offset` (optional) (integer) Return Point details starting at this offset
        """
        return self.__list(R_FEED, limit=limit, offset=offset)['feeds']

    def list_controls(self, limit=500, offset=0):
        """List `all` the controls on this Thing.

        Returns QAPI list function payload

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return this many Point details

        `offset` (optional) (integer) Return Point details starting at this offset
        """
        return self.__list(R_CONTROL, limit=limit, offset=offset)['controls']

    def set_public(self, public=True):
        """Sets your Thing to be public to all.  If `public=True`.
        This means the tags, label and description of your Thing are now searchable by anybody, along with its
        location and the units of any values on any Points.
        If `public=False` the metadata of your Thing is no longer searchable.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `public` (optional) (boolean) Whether (or not) to allow your Thing's metadata
        to be searched by anybody
        """
        logger.info("set_public(public=%s) [lid=%s]", public, self.__lid)
        evt = self._client._request_entity_meta_setpublic(self.__lid, public)
        self._client._wait_and_except_if_failed(evt)

    def rename(self, new_lid):
        """Rename the Thing.

        `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you
        create another Thing using the "old_lid", the system will oblige, but it will be a completely _new_ Thing.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `new_lid` (required) (string) the new local identifier of your Thing
        """
        logger.info("rename(new_lid=\"%s\") [lid=%s]", new_lid, self.__lid)
        evt = self._client._request_entity_rename(self.__lid, new_lid)
        self._client._wait_and_except_if_failed(evt)
        self.__lid = new_lid
        self._client._notify_thing_lid_change(self.__lid, new_lid)

    def reassign(self, new_epid):
        """Reassign the Thing from one agent to another.

        `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.
        They won't be able to receive control requests, feed data or to share any feeds as they won't be in this agent.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,
        current agent will be chosen. If False, existing agent will be unassigned.
        """
        logger.info("reassign(new_epid=\"%s\") [lid=%s]", new_epid, self.__lid)
        evt = self._client._request_entity_reassign(self.__lid, new_epid)
        self._client._wait_and_except_if_failed(evt)

    def create_tag(self, tags):
        """Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters
        and the underscore. Tags will be stored lower-cased.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.
        `["garden", "soil"]`
        """
        if isinstance(tags, str):
            tags = [tags]

        evt = self._client._request_entity_tag_update(self.__lid, tags, delete=False)
        self._client._wait_and_except_if_failed(evt)

    def delete_tag(self, tags):
        """Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased
        will be deleted.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.
        `["garden", "soil"]`
        """
        if isinstance(tags, str):
            tags = [tags]

        evt = self._client._request_entity_tag_update(self.__lid, tags, delete=True)
        self._client._wait_and_except_if_failed(evt)

    def list_tag(self, limit=500, offset=0):
        """List `all` the tags for this Thing

        Returns lists of tags, as below

            #!python
            [
                "mytag1",
                "mytag2"
                "ein_name",
                "nochein_name"
            ]

        - OR...

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `limit` (optional) (integer) Return at most this many tags

        `offset` (optional) (integer) Return tags starting at this offset
        """
        evt = self._client._request_entity_tag_list(self.__lid, limit=limit, offset=offset)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['tags']

    def get_meta(self):
        """Get the metadata object for this Thing

        Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object
        """
        rdf = self.get_meta_rdf(fmt='n3')
        return ThingMeta(self, rdf, self._client.default_lang, fmt='n3')

    def get_meta_rdf(self, fmt='n3'):
        """Get the metadata for this Thing in rdf fmt

        Advanced users who want to manipulate the RDF for this Thing directly without the
        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object

        Returns the RDF in the format you specify. - OR -

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `fmt` (optional) (string) The format of RDF you want returned.
        Valid formats are: "xml", "n3", "turtle"
        """
        evt = self._client._request_entity_meta_get(self.__lid, fmt=fmt)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['meta']

    def set_meta_rdf(self, rdf, fmt='n3'):
        """Set the metadata for this Thing in RDF fmt

        Advanced users who want to manipulate the RDF for this Thing directly without the
        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `fmt` (optional) (string) The format of RDF you have sent.
        Valid formats are: "xml", "n3", "turtle"
        """
        evt = self._client._request_entity_meta_set(self.__lid, rdf, fmt=fmt)
        self._client._wait_and_except_if_failed(evt)

    def get_feed(self, pid):
        """Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed
        instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_feed once, any further calls will raise a `KeyError`

        Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
        which corresponds to the cached entry for this local feed id

        `pid` (required) (string) Point id - local identifier of your feed.

        Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)
        """
        with self.__new_feeds:
            try:
                return self.__new_feeds.pop(pid)
            except KeyError as ex:
                raise_from(KeyError('Feed %s not know as new' % pid), ex)

    def get_control(self, pid):
        """Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new
        control instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_control once, any further calls will raise a `KeyError`

        Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,
        which corresponds to the cached entry for this local control id

        `pid` (required) (string) local identifier of your control.

        Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)
        """
        with self.__new_controls:
            try:
                return self.__new_controls.pop(pid)
            except KeyError as ex:
                raise_from(KeyError('Control %s not know as new' % pid), ex)

    def __create_point(self, foc, pid, control_cb=None, save_recent=0):
        evt = self.__create_point_async(foc, pid, control_cb=control_cb, save_recent=save_recent)
        self._client._wait_and_except_if_failed(evt)
        store = self.__new_feeds if foc == R_FEED else self.__new_controls
        try:
            with store:
                return store.pop(pid)
        except KeyError as ex:
            raise raise_from(IOTClientError('%s %s (from %s) not in cache (post-create)' %
                                            (foc_to_str(foc), pid, self.__lid)),
                             ex)

    def __create_point_async(self, foc, pid, control_cb=None, save_recent=0):
        return self._client._request_point_create(foc, self.__lid, pid, control_cb=control_cb, save_recent=save_recent)

    def create_feed(self, pid, save_recent=0):
        """Create a new Feed for this Thing with a local point id (pid).

        Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
        or the existing one, if the Feed already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local id of your Feed

        `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this
        argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum
        sample store amount. See also
        [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).
        """
        logger.info("create_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__create_point(R_FEED, pid, save_recent=save_recent)

    def create_feed_async(self, pid, save_recent=0):
        logger.info("create_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__create_point_async(R_FEED, pid, save_recent=save_recent)

    def create_control(self, pid, callback, callback_parsed=None):
        """Create a control for this Thing with a local point id (pid) and a control request feedback

        Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object
        or the existing one if the Control already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local id of your Control

        `callback` (required) (function reference) callback function to invoke on receipt of a control request.
        The callback receives a single dict argument, with keys of:

            #!python
            'data'      # (decoded or raw bytes)
            'mime'      # (None, unless payload was not decoded and has a mime type)
            'subId'     # (the global id of the associated subscripion)
            'entityLid' # (local id of the Thing to which the control belongs)
            'lid'       # (local id of control)
            'confirm'   # (whether a confirmation is expected)
            'requestId' # (required for sending confirmation)

        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This
        is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
        if the point data could not be parsed according to its current value description.

        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
        """
        logger.info("create_control(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
        if callback_parsed:
            callback = self._client._get_parsed_control_callback(callback_parsed, callback)
        return self.__create_point(R_CONTROL, pid, control_cb=callback)

    def create_control_async(self, pid, callback, callback_parsed=None):
        logger.info("create_control_async(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
        if callback_parsed:
            callback = self._client._get_parsed_control_callback(callback_parsed, callback)
        return self.__create_point_async(R_CONTROL, pid, control_cb=callback)

    def __delete_point(self, foc, pid):
        evt = self.__delete_point_async(foc, pid)
        self._client._wait_and_except_if_failed(evt)

    def __delete_point_async(self, foc, pid):
        return self._client._request_point_delete(foc, self.__lid, pid)

    def delete_feed(self, pid):
        """Delete a feed, identified by its local id.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local identifier of your feed you want to delete

        """
        logger.info("delete_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point(R_FEED, pid)

    def delete_feed_async(self, pid):
        logger.info("delete_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point_async(R_FEED, pid)

    def delete_control(self, pid):
        """Delete a control, identified by its local id.

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `pid` (required) (string) local identifier of your control you want to delete
        """
        logger.info("delete_control(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point(R_CONTROL, pid)

    def delete_control_async(self, pid):
        logger.info("delete_control_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
        return self.__delete_point_async(R_CONTROL, pid)

    def __get_sub(self, foc, gpid):
        # global
        if isinstance(gpid, string_types):
            gpid = uuid_to_hex(gpid)
        # not local
        elif not (isinstance(gpid, Sequence) and len(gpid) == 2):
            raise ValueError('gpid must be string or two-element tuple')
        try:
            sub = self.__new_subs.pop((foc, gpid))
        except KeyError as ex:
            raise_from(KeyError('Remote%s subscription %s not know as new' % (foc_to_str(foc).capitalize(), gpid)), ex)
        if sub is None:
            raise ValueError('Either subscription not complete yet or point %s is of opposite type. (In which case'
                             ' call %s instead' % (gpid, 'attach()' if foc == R_FEED else 'follow()'))
        return sub

    def get_remote_feed(self, gpid):
        """Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the
        new `RemoteFeed` instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_remote_feed once, any further calls will raise a `KeyError`

        Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a
        previous call)

        Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has
        not completed yet.
        """
        return self.__get_sub(R_FEED, gpid)

    def get_remote_control(self, gpid):
        """Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the
        new `RemoteControl` instance can only be retrieved once.

        `NOTE` - Destructive Read. Once you've called get_remote_control once, any further calls will raise a `KeyError`

        Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a
        previous call)

        Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has
        not completed yet."""
        return self.__get_sub(R_CONTROL, gpid)

    @contextmanager
    def __sub_add_reference(self, key):
        """Used by __sub_make_request to save reference for pending sub request"""
        new_subs = self.__new_subs
        with new_subs:
            # don't allow multiple subscription requests to overwrite internal reference
            if key in new_subs:
                raise ValueError('subscription for given args pending: %s' % key)
            new_subs[key] = None
        try:
            yield
        except:
            # don't preserve reference if request creation failed
            with new_subs:
                new_subs.pop(key, None)
            raise

    def __sub_make_request(self, foc, gpid, callback):
        """Make right subscription request depending on whether local or global - used by __sub*"""
        # global
        if isinstance(gpid, string_types):
            gpid = uuid_to_hex(gpid)
            with self.__sub_add_reference((foc, gpid)):
                return self._client._request_sub_create(self.__lid, foc, gpid, callback=callback)
        # local
        elif isinstance(gpid, Sequence) and len(gpid) == 2:
            with self.__sub_add_reference((foc, tuple(gpid))):
                return self._client._request_sub_create_local(self.__lid, foc, *gpid, callback=callback)
        else:
            raise ValueError('gpid must be string or two-element tuple')

    def __sub(self, foc, gpid, callback=None):
        logger.info("__sub(foc=%s, gpid=\"%s\", callback=%s) [lid=%s]", foc_to_str(foc), gpid, callback, self.__lid)
        evt = self.__sub_async(foc, gpid, callback=callback)
        self._client._wait_and_except_if_failed(evt)
        try:
            return self.__get_sub(foc, gpid)
        except KeyError as ex:
            raise raise_from(IOTClientError('Subscription for %s (from %s) not in cache (post-create)' %
                                            gpid, self.__lid),
                             ex)

    def __sub_async(self, foc, gpid, callback=None):
        logger.info("__sub(foc=%s, gpid=\"%s\", callback=%s) [lid=%s]", foc_to_str(foc), gpid, callback, self.__lid)
        return self.__sub_make_request(foc, gpid, callback)

    def follow(self, gpid, callback=None, callback_parsed=None):
        """Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback

        Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)
        object or the existing one if the subscription already exists - OR -

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`

        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription

        `callback` (optional) (function reference) callback function to invoke on receipt of feed data.
        The callback receives a single dict argument, with keys of:

            #!python
            'data' # (decoded or raw bytes)
            'mime' # (None, unless payload was not decoded and has a mime type)
            'pid'  # (the global id of the feed from which the data originates)
            'time' # (datetime representing UTC timestamp of share)

        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is
        equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
        if the point data could not be parsed according to its current value description.

        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
        """
        if callback_parsed:
            callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
        return self.__sub(R_FEED, gpid, callback=callback)

    def follow_async(self, gpid, callback=None, callback_parsed=None):
        if callback_parsed:
            callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
        return self.__sub_async(R_FEED, gpid, callback=callback)

    def attach(self, gpid):
        """Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback

        Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)
        object or the existing one if the subscription already exists

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`

        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription
        """
        return self.__sub(R_CONTROL, gpid)

    def attach_async(self, gpid):
        return self.__sub_async(R_CONTROL, gpid)

    def __sub_delete(self, subid):
        if isinstance(subid, (RemoteFeed, RemoteControl)):
            subid = subid.subid
        evt = self._client._request_sub_delete(subid)
        self._client._wait_and_except_if_failed(evt)

    def unfollow(self, subid):
        """Remove a subscription of a Feed with a global subscription id (gpid)

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`
        (object) The instance of a RemoteFeed object corresponding to the feed you want to cease
        following.
        """
        return self.__sub_delete(subid)

    def unattach(self, subid):
        """Remove a subscription of a control with a global subscription id (gpid)

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`
        (object) The instance of a RemoteControl object corresponding to the control you want
        to cease being able to actuate.
        """
        return self.__sub_delete(subid)

    def list_connections(self, limit=500, offset=0):
        """List Points to which this Things is subscribed.
        I.e. list all the Points this Thing is following and controls it's attached to

        Returns subscription list e.g.

            #!python
            {
                "<Subscription GUID 1>": {
                    "id": "<Control GUID>",
                    "entityId":  "<Control's Thing GUID>",
                    "type": 3  # R_CONTROL from IoticAgent.Core.Const
                },
                "<Subscription GUID 2>": {
                    "id": "<Feed GUID>",
                    "entityId":  "<Feed's Thing GUID>",
                    "type": 2  # R_FEED from IoticAgent.Core.Const
            }

        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
        containing the error if the infrastructure detects a problem

        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
        if there is a communications problem between you and the infrastructure

        Note: For Things following a Point see
        [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)
        """
        evt = self._client._request_sub_list(self.__lid, limit=limit, offset=offset)

        self._client._wait_and_except_if_failed(evt)
        return evt.payload['subs']

    def _cb_created(self, payload, duplicated):
        """Indirect callback (via Client) for point & subscription creation responses"""
        if payload[P_RESOURCE] in _POINT_TYPE_TO_CLASS:
            store = self.__new_feeds if payload[P_RESOURCE] == R_FEED else self.__new_controls
            cls = _POINT_TYPE_TO_CLASS[payload[P_RESOURCE]]
            with store:
                store[payload[P_LID]] = cls(self._client, payload[P_ENTITY_LID], payload[P_LID], payload[P_ID])
            logger.debug('Added %s: %s (for %s)', foc_to_str(payload[P_RESOURCE]), payload[P_LID],
                         payload[P_ENTITY_LID])

        elif payload[P_RESOURCE] == R_SUB:
            # local
            if P_POINT_ENTITY_LID in payload:
                key = (payload[P_POINT_TYPE], (payload[P_POINT_ENTITY_LID], payload[P_POINT_LID]))
            # global
            else:
                key = (payload[P_POINT_TYPE], payload[P_POINT_ID])

            new_subs = self.__new_subs
            with new_subs:
                if key in new_subs:
                    cls = RemoteFeed if payload[P_POINT_TYPE] == R_FEED else RemoteControl
                    new_subs[key] = cls(self._client, payload[P_ID], payload[P_POINT_ID], payload[P_ENTITY_LID])
                else:
                    logger.warning('Ignoring subscription creation for unexpected %s: %s',
                                   foc_to_str(payload[P_POINT_TYPE]), key[1])

        else:
            logger.error('Resource creation of type %d unhandled', payload[P_RESOURCE])

    def _cb_reassigned(self, payload):
        self.__epId = payload[P_EPID]
        logger.info('Thing %s reassigned to agent %s', self.__lid, self.__epId)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.IOT.Thing.Thing">Thing</a></li>
          <li>IoticAgent.IOT.Resource.Resource</li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, client, lid, guid, epId)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.__init__" class="source">
    <pre><code>def __init__(self, client, lid, guid, epId):
    super(Thing, self).__init__(client, guid)
    self.__lid = Validation.lid_check_convert(lid)
    self.__epId = Validation.guid_check_convert(epId)
    # Keep track of newly created points & subs (the requests for which originated from current agent)
    self.__new_feeds = ThreadSafeDict()
    self.__new_controls = ThreadSafeDict()
    self.__new_subs = ThreadSafeDict()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.attach">
    <p>def <span class="ident">attach</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback</p>
<p>Returns a new <a href="RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl">RemoteControl</a>
object or the existing one if the subscription already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>gpid</code> (required) (uuid) global id of the Point to which you want to attach <code>-OR-</code></p>
<p><code>gpid</code> (required) (lid,pid) tuple of <code>(thing_localid, point_localid)</code> for local subscription</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.attach', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.attach" class="source">
    <pre><code>def attach(self, gpid):
    """Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback
    Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)
    object or the existing one if the subscription already exists
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`
    `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription
    """
    return self.__sub(R_CONTROL, gpid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.attach_async">
    <p>def <span class="ident">attach_async</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.attach_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.attach_async" class="source">
    <pre><code>def attach_async(self, gpid):
    return self.__sub_async(R_CONTROL, gpid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_control">
    <p>def <span class="ident">create_control</span>(</p><p>self, pid, callback, callback_parsed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a control for this Thing with a local point id (pid) and a control request feedback</p>
<p>Returns a new <a href="Point.m.html#IoticAgent.IOT.Point.Control">Control</a> object
or the existing one if the Control already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local id of your Control</p>
<p><code>callback</code> (required) (function reference) callback function to invoke on receipt of a control request.
The callback receives a single dict argument, with keys of:</p>
<pre><code>#!python
'data'      # (decoded or raw bytes)
'mime'      # (None, unless payload was not decoded and has a mime type)
'subId'     # (the global id of the associated subscripion)
'entityLid' # (local id of the Thing to which the control belongs)
'lid'       # (local id of control)
'confirm'   # (whether a confirmation is expected)
'requestId' # (required for sending confirmation)
</code></pre>
<p><code>callback_parsed</code> (optional) (function reference) callback function to invoke on receipt of control data. This
is equivalent to <code>callback</code> except the dict includes the <code>parsed</code> key which holds the set of values in a
<a href="./Point.m.html#IoticAgent.IOT.Point.PointDataObject">PointDataObject</a> instance. If both
<code>callback_parsed</code> and <code>callback</code> have been specified, the former takes precedence and <code>callback</code> is only called
if the point data could not be parsed according to its current value description.</p>
<p><code>NOTE</code>: <code>callback_parsed</code> can only be used if <code>auto_encode_decode</code> is enabled for the client instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_control" class="source">
    <pre><code>def create_control(self, pid, callback, callback_parsed=None):
    """Create a control for this Thing with a local point id (pid) and a control request feedback
    Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object
    or the existing one if the Control already exists
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `pid` (required) (string) local id of your Control
    `callback` (required) (function reference) callback function to invoke on receipt of a control request.
    The callback receives a single dict argument, with keys of:
        #!python
        'data'      # (decoded or raw bytes)
        'mime'      # (None, unless payload was not decoded and has a mime type)
        'subId'     # (the global id of the associated subscripion)
        'entityLid' # (local id of the Thing to which the control belongs)
        'lid'       # (local id of control)
        'confirm'   # (whether a confirmation is expected)
        'requestId' # (required for sending confirmation)
    `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This
    is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
    [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
    `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
    if the point data could not be parsed according to its current value description.
    `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
    """
    logger.info("create_control(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
    if callback_parsed:
        callback = self._client._get_parsed_control_callback(callback_parsed, callback)
    return self.__create_point(R_CONTROL, pid, control_cb=callback)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_control_async">
    <p>def <span class="ident">create_control_async</span>(</p><p>self, pid, callback, callback_parsed=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_control_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_control_async" class="source">
    <pre><code>def create_control_async(self, pid, callback, callback_parsed=None):
    logger.info("create_control_async(pid=\"%s\", control_cb=%s) [lid=%s]", pid, callback, self.__lid)
    if callback_parsed:
        callback = self._client._get_parsed_control_callback(callback_parsed, callback)
    return self.__create_point_async(R_CONTROL, pid, control_cb=callback)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_feed">
    <p>def <span class="ident">create_feed</span>(</p><p>self, pid, save_recent=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new Feed for this Thing with a local point id (pid).</p>
<p>Returns a new <a href="Point.m.html#IoticAgent.IOT.Point.Feed">Feed</a> object,
or the existing one, if the Feed already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local id of your Feed</p>
<p><code>save_recent</code> (optional) (int) how many shares to store for later retrieval. If not supported by container, this
argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum
sample store amount. See also
<a href="./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config">Feed.set_recent_config</a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_feed" class="source">
    <pre><code>def create_feed(self, pid, save_recent=0):
    """Create a new Feed for this Thing with a local point id (pid).
    Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
    or the existing one, if the Feed already exists
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `pid` (required) (string) local id of your Feed
    `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this
    argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum
    sample store amount. See also
    [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).
    """
    logger.info("create_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__create_point(R_FEED, pid, save_recent=save_recent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_feed_async">
    <p>def <span class="ident">create_feed_async</span>(</p><p>self, pid, save_recent=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_feed_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_feed_async" class="source">
    <pre><code>def create_feed_async(self, pid, save_recent=0):
    logger.info("create_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__create_point_async(R_FEED, pid, save_recent=save_recent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_tag">
    <p>def <span class="ident">create_tag</span>(</p><p>self, tags)</p>
    </div>
    

    
  
    <div class="desc"><p>Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters
and the underscore. Tags will be stored lower-cased.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>tags</code> (mandatory) (list) - the list of tags you want to add to your Thing, e.g.
<code>["garden", "soil"]</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_tag" class="source">
    <pre><code>def create_tag(self, tags):
    """Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters
    and the underscore. Tags will be stored lower-cased.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.
    `["garden", "soil"]`
    """
    if isinstance(tags, str):
        tags = [tags]
    evt = self._client._request_entity_tag_update(self.__lid, tags, delete=False)
    self._client._wait_and_except_if_failed(evt)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_control">
    <p>def <span class="ident">delete_control</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete a control, identified by its local id.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local identifier of your control you want to delete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_control" class="source">
    <pre><code>def delete_control(self, pid):
    """Delete a control, identified by its local id.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `pid` (required) (string) local identifier of your control you want to delete
    """
    logger.info("delete_control(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__delete_point(R_CONTROL, pid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_control_async">
    <p>def <span class="ident">delete_control_async</span>(</p><p>self, pid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_control_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_control_async" class="source">
    <pre><code>def delete_control_async(self, pid):
    logger.info("delete_control_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__delete_point_async(R_CONTROL, pid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_feed">
    <p>def <span class="ident">delete_feed</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete a feed, identified by its local id.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local identifier of your feed you want to delete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_feed" class="source">
    <pre><code>def delete_feed(self, pid):
    """Delete a feed, identified by its local id.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `pid` (required) (string) local identifier of your feed you want to delete
    """
    logger.info("delete_feed(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__delete_point(R_FEED, pid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_feed_async">
    <p>def <span class="ident">delete_feed_async</span>(</p><p>self, pid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_feed_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_feed_async" class="source">
    <pre><code>def delete_feed_async(self, pid):
    logger.info("delete_feed_async(pid=\"%s\") [lid=%s]", pid, self.__lid)
    return self.__delete_point_async(R_FEED, pid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_tag">
    <p>def <span class="ident">delete_tag</span>(</p><p>self, tags)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased
will be deleted.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>tags</code> (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.
<code>["garden", "soil"]</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_tag" class="source">
    <pre><code>def delete_tag(self, tags):
    """Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased
    will be deleted.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.
    `["garden", "soil"]`
    """
    if isinstance(tags, str):
        tags = [tags]
    evt = self._client._request_entity_tag_update(self.__lid, tags, delete=True)
    self._client._wait_and_except_if_failed(evt)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.follow">
    <p>def <span class="ident">follow</span>(</p><p>self, gpid, callback=None, callback_parsed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback</p>
<p>Returns a new <a href="RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed">RemoteFeed</a>
object or the existing one if the subscription already exists - OR -</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>gpid</code> (required) (uuid) global id of the Point you want to follow <code>-OR-</code></p>
<p><code>gpid</code> (required) (lid,pid) tuple of <code>(thing_localid, point_localid)</code> for local subscription</p>
<p><code>callback</code> (optional) (function reference) callback function to invoke on receipt of feed data.
The callback receives a single dict argument, with keys of:</p>
<pre><code>#!python
'data' # (decoded or raw bytes)
'mime' # (None, unless payload was not decoded and has a mime type)
'pid'  # (the global id of the feed from which the data originates)
'time' # (datetime representing UTC timestamp of share)
</code></pre>
<p><code>callback_parsed</code> (optional) (function reference) callback function to invoke on receipt of feed data. This is
equivalent to <code>callback</code> except the dict includes the <code>parsed</code> key which holds the set of values in a
<a href="./Point.m.html#IoticAgent.IOT.Point.PointDataObject">PointDataObject</a> instance. If both
<code>callback_parsed</code> and <code>callback</code> have been specified, the former takes precedence and <code>callback</code> is only called
if the point data could not be parsed according to its current value description.</p>
<p><code>NOTE</code>: <code>callback_parsed</code> can only be used if <code>auto_encode_decode</code> is enabled for the client instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.follow', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.follow" class="source">
    <pre><code>def follow(self, gpid, callback=None, callback_parsed=None):
    """Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback
    Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)
    object or the existing one if the subscription already exists - OR -
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`
    `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription
    `callback` (optional) (function reference) callback function to invoke on receipt of feed data.
    The callback receives a single dict argument, with keys of:
        #!python
        'data' # (decoded or raw bytes)
        'mime' # (None, unless payload was not decoded and has a mime type)
        'pid'  # (the global id of the feed from which the data originates)
        'time' # (datetime representing UTC timestamp of share)
    `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is
    equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a
    [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both
    `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called
    if the point data could not be parsed according to its current value description.
    `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.
    """
    if callback_parsed:
        callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
    return self.__sub(R_FEED, gpid, callback=callback)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.follow_async">
    <p>def <span class="ident">follow_async</span>(</p><p>self, gpid, callback=None, callback_parsed=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.follow_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.follow_async" class="source">
    <pre><code>def follow_async(self, gpid, callback=None, callback_parsed=None):
    if callback_parsed:
        callback = self._client._get_parsed_feed_callback(callback_parsed, callback)
    return self.__sub_async(R_FEED, gpid, callback=callback)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_control">
    <p>def <span class="ident">get_control</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new
control instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_control once, any further calls will raise a <code>KeyError</code></p>
<p>Returns a <a href="Point.m.html#IoticAgent.IOT.Point.Control">Control</a> object,
which corresponds to the cached entry for this local control id</p>
<p><code>pid</code> (required) (string) local identifier of your control.</p>
<p>Raises <code>KeyError</code> if the control has not been newly created (or has already been retrieved by a previous call)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_control" class="source">
    <pre><code>def get_control(self, pid):
    """Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new
    control instance can only be retrieved once.
    `NOTE` - Destructive Read. Once you've called get_control once, any further calls will raise a `KeyError`
    Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,
    which corresponds to the cached entry for this local control id
    `pid` (required) (string) local identifier of your control.
    Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)
    """
    with self.__new_controls:
        try:
            return self.__new_controls.pop(pid)
        except KeyError as ex:
            raise_from(KeyError('Control %s not know as new' % pid), ex)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_feed">
    <p>def <span class="ident">get_feed</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed
instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_feed once, any further calls will raise a <code>KeyError</code></p>
<p>Returns a <a href="Point.m.html#IoticAgent.IOT.Point.Feed">Feed</a> object,
which corresponds to the cached entry for this local feed id</p>
<p><code>pid</code> (required) (string) Point id - local identifier of your feed.</p>
<p>Raises <code>KeyError</code> if the feed has not been newly created (or has already been retrieved by a previous call)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_feed" class="source">
    <pre><code>def get_feed(self, pid):
    """Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed
    instance can only be retrieved once.
    `NOTE` - Destructive Read. Once you've called get_feed once, any further calls will raise a `KeyError`
    Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,
    which corresponds to the cached entry for this local feed id
    `pid` (required) (string) Point id - local identifier of your feed.
    Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)
    """
    with self.__new_feeds:
        try:
            return self.__new_feeds.pop(pid)
        except KeyError as ex:
            raise_from(KeyError('Feed %s not know as new' % pid), ex)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_meta">
    <p>def <span class="ident">get_meta</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the metadata object for this Thing</p>
<p>Returns a <a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_meta', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_meta" class="source">
    <pre><code>def get_meta(self):
    """Get the metadata object for this Thing
    Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object
    """
    rdf = self.get_meta_rdf(fmt='n3')
    return ThingMeta(self, rdf, self._client.default_lang, fmt='n3')
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_meta_rdf">
    <p>def <span class="ident">get_meta_rdf</span>(</p><p>self, fmt=&#39;n3&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the metadata for this Thing in rdf fmt</p>
<p>Advanced users who want to manipulate the RDF for this Thing directly without the
<a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> helper object</p>
<p>Returns the RDF in the format you specify. - OR -</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>fmt</code> (optional) (string) The format of RDF you want returned.
Valid formats are: "xml", "n3", "turtle"</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_meta_rdf', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_meta_rdf" class="source">
    <pre><code>def get_meta_rdf(self, fmt='n3'):
    """Get the metadata for this Thing in rdf fmt
    Advanced users who want to manipulate the RDF for this Thing directly without the
    [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object
    Returns the RDF in the format you specify. - OR -
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `fmt` (optional) (string) The format of RDF you want returned.
    Valid formats are: "xml", "n3", "turtle"
    """
    evt = self._client._request_entity_meta_get(self.__lid, fmt=fmt)
    self._client._wait_and_except_if_failed(evt)
    return evt.payload['meta']
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_remote_control">
    <p>def <span class="ident">get_remote_control</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Retrieve <code>RemoteControl</code> instance for an attach. This only applies to asynchronous attach requests and the
new <code>RemoteControl</code> instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_remote_control once, any further calls will raise a <code>KeyError</code></p>
<p>Raises <code>KeyError</code> if the attach-subscription has not been newly created (or has already been retrieved by a
previous call)</p>
<p>Raises <code>ValueError</code> if the followed Point is actually a feed instead of a control, or if the subscription has
not completed yet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_remote_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_remote_control" class="source">
    <pre><code>def get_remote_control(self, gpid):
    """Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the
    new `RemoteControl` instance can only be retrieved once.
    `NOTE` - Destructive Read. Once you've called get_remote_control once, any further calls will raise a `KeyError`
    Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a
    previous call)
    Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has
    not completed yet."""
    return self.__get_sub(R_CONTROL, gpid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_remote_feed">
    <p>def <span class="ident">get_remote_feed</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Retrieve <code>RemoteFeed</code> instance for a follow. This only applies to asynchronous follow requests and the
new <code>RemoteFeed</code> instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_remote_feed once, any further calls will raise a <code>KeyError</code></p>
<p>Raises <code>KeyError</code> if the follow-subscription has not been newly created (or has already been retrieved by a
previous call)</p>
<p>Raises <code>ValueError</code> if the followed Point is actually a control instead of a feed, or if the subscription has
not completed yet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_remote_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_remote_feed" class="source">
    <pre><code>def get_remote_feed(self, gpid):
    """Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the
    new `RemoteFeed` instance can only be retrieved once.
    `NOTE` - Destructive Read. Once you've called get_remote_feed once, any further calls will raise a `KeyError`
    Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a
    previous call)
    Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has
    not completed yet.
    """
    return self.__get_sub(R_FEED, gpid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_connections">
    <p>def <span class="ident">list_connections</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List Points to which this Things is subscribed.
I.e. list all the Points this Thing is following and controls it's attached to</p>
<p>Returns subscription list e.g.</p>
<pre><code>#!python
{
    "&lt;Subscription GUID 1&gt;": {
        "id": "&lt;Control GUID&gt;",
        "entityId":  "&lt;Control's Thing GUID&gt;",
        "type": 3  # R_CONTROL from IoticAgent.Core.Const
    },
    "&lt;Subscription GUID 2&gt;": {
        "id": "&lt;Feed GUID&gt;",
        "entityId":  "&lt;Feed's Thing GUID&gt;",
        "type": 2  # R_FEED from IoticAgent.Core.Const
}
</code></pre>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p>Note: For Things following a Point see
<a href="./Point.m.html#IoticAgent.IOT.Point.Point.list_followers">list_followers</a></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_connections', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_connections" class="source">
    <pre><code>def list_connections(self, limit=500, offset=0):
    """List Points to which this Things is subscribed.
    I.e. list all the Points this Thing is following and controls it's attached to
    Returns subscription list e.g.
        #!python
        {
            "<Subscription GUID 1>": {
                "id": "<Control GUID>",
                "entityId":  "<Control's Thing GUID>",
                "type": 3  # R_CONTROL from IoticAgent.Core.Const
            },
            "<Subscription GUID 2>": {
                "id": "<Feed GUID>",
                "entityId":  "<Feed's Thing GUID>",
                "type": 2  # R_FEED from IoticAgent.Core.Const
        }
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    Note: For Things following a Point see
    [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)
    """
    evt = self._client._request_sub_list(self.__lid, limit=limit, offset=offset)
    self._client._wait_and_except_if_failed(evt)
    return evt.payload['subs']
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_controls">
    <p>def <span class="ident">list_controls</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the controls on this Thing.</p>
<p>Returns QAPI list function payload</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return this many Point details</p>
<p><code>offset</code> (optional) (integer) Return Point details starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_controls', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_controls" class="source">
    <pre><code>def list_controls(self, limit=500, offset=0):
    """List `all` the controls on this Thing.
    Returns QAPI list function payload
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `limit` (optional) (integer) Return this many Point details
    `offset` (optional) (integer) Return Point details starting at this offset
    """
    return self.__list(R_CONTROL, limit=limit, offset=offset)['controls']
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_feeds">
    <p>def <span class="ident">list_feeds</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the feeds on this Thing.</p>
<p>Returns QAPI list function payload</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return this many Point details</p>
<p><code>offset</code> (optional) (integer) Return Point details starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_feeds', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_feeds" class="source">
    <pre><code>def list_feeds(self, limit=500, offset=0):
    """List `all` the feeds on this Thing.
    Returns QAPI list function payload
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `limit` (optional) (integer) Return this many Point details
    `offset` (optional) (integer) Return Point details starting at this offset
    """
    return self.__list(R_FEED, limit=limit, offset=offset)['feeds']
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_tag">
    <p>def <span class="ident">list_tag</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the tags for this Thing</p>
<p>Returns lists of tags, as below</p>
<pre><code>#!python
[
    "mytag1",
    "mytag2"
    "ein_name",
    "nochein_name"
]
</code></pre>
<ul>
<li>OR...</li>
</ul>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return at most this many tags</p>
<p><code>offset</code> (optional) (integer) Return tags starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_tag" class="source">
    <pre><code>def list_tag(self, limit=500, offset=0):
    """List `all` the tags for this Thing
    Returns lists of tags, as below
        #!python
        [
            "mytag1",
            "mytag2"
            "ein_name",
            "nochein_name"
        ]
    - OR...
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `limit` (optional) (integer) Return at most this many tags
    `offset` (optional) (integer) Return tags starting at this offset
    """
    evt = self._client._request_entity_tag_list(self.__lid, limit=limit, offset=offset)
    self._client._wait_and_except_if_failed(evt)
    return evt.payload['tags']
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.reassign">
    <p>def <span class="ident">reassign</span>(</p><p>self, new_epid)</p>
    </div>
    

    
  
    <div class="desc"><p>Reassign the Thing from one agent to another.</p>
<p><code>ADVANCED USERS ONLY</code>  This will lead to any local instances of a Thing being rendered useless.
They won't be able to receive control requests, feed data or to share any feeds as they won't be in this agent.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>new_epid</code> (required) (string) the new agent id to which your Thing should be assigned. If None,
current agent will be chosen. If False, existing agent will be unassigned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.reassign', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.reassign" class="source">
    <pre><code>def reassign(self, new_epid):
    """Reassign the Thing from one agent to another.
    `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.
    They won't be able to receive control requests, feed data or to share any feeds as they won't be in this agent.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,
    current agent will be chosen. If False, existing agent will be unassigned.
    """
    logger.info("reassign(new_epid=\"%s\") [lid=%s]", new_epid, self.__lid)
    evt = self._client._request_entity_reassign(self.__lid, new_epid)
    self._client._wait_and_except_if_failed(evt)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.rename">
    <p>def <span class="ident">rename</span>(</p><p>self, new_lid)</p>
    </div>
    

    
  
    <div class="desc"><p>Rename the Thing.</p>
<p><code>ADVANCED USERS ONLY</code>  This can be confusing.  You are changing the local id of a Thing to <code>new_lid</code>.  If you
create another Thing using the "old_lid", the system will oblige, but it will be a completely <em>new</em> Thing.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>new_lid</code> (required) (string) the new local identifier of your Thing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.rename', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.rename" class="source">
    <pre><code>def rename(self, new_lid):
    """Rename the Thing.
    `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you
    create another Thing using the "old_lid", the system will oblige, but it will be a completely _new_ Thing.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `new_lid` (required) (string) the new local identifier of your Thing
    """
    logger.info("rename(new_lid=\"%s\") [lid=%s]", new_lid, self.__lid)
    evt = self._client._request_entity_rename(self.__lid, new_lid)
    self._client._wait_and_except_if_failed(evt)
    self.__lid = new_lid
    self._client._notify_thing_lid_change(self.__lid, new_lid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.set_meta_rdf">
    <p>def <span class="ident">set_meta_rdf</span>(</p><p>self, rdf, fmt=&#39;n3&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the metadata for this Thing in RDF fmt</p>
<p>Advanced users who want to manipulate the RDF for this Thing directly without the
<a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> helper object</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>fmt</code> (optional) (string) The format of RDF you have sent.
Valid formats are: "xml", "n3", "turtle"</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.set_meta_rdf', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.set_meta_rdf" class="source">
    <pre><code>def set_meta_rdf(self, rdf, fmt='n3'):
    """Set the metadata for this Thing in RDF fmt
    Advanced users who want to manipulate the RDF for this Thing directly without the
    [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `fmt` (optional) (string) The format of RDF you have sent.
    Valid formats are: "xml", "n3", "turtle"
    """
    evt = self._client._request_entity_meta_set(self.__lid, rdf, fmt=fmt)
    self._client._wait_and_except_if_failed(evt)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.set_public">
    <p>def <span class="ident">set_public</span>(</p><p>self, public=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets your Thing to be public to all.  If <code>public=True</code>.
This means the tags, label and description of your Thing are now searchable by anybody, along with its
location and the units of any values on any Points.
If <code>public=False</code> the metadata of your Thing is no longer searchable.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>public</code> (optional) (boolean) Whether (or not) to allow your Thing's metadata
to be searched by anybody</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.set_public', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.set_public" class="source">
    <pre><code>def set_public(self, public=True):
    """Sets your Thing to be public to all.  If `public=True`.
    This means the tags, label and description of your Thing are now searchable by anybody, along with its
    location and the units of any values on any Points.
    If `public=False` the metadata of your Thing is no longer searchable.
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `public` (optional) (boolean) Whether (or not) to allow your Thing's metadata
    to be searched by anybody
    """
    logger.info("set_public(public=%s) [lid=%s]", public, self.__lid)
    evt = self._client._request_entity_meta_setpublic(self.__lid, public)
    self._client._wait_and_except_if_failed(evt)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.unattach">
    <p>def <span class="ident">unattach</span>(</p><p>self, subid)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove a subscription of a control with a global subscription id (gpid)</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>subid</code> (required) ( <code>Either</code> (uuid) global id of the subscription you want to delete <code>or</code>
(object) The instance of a RemoteControl object corresponding to the control you want
to cease being able to actuate.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.unattach', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.unattach" class="source">
    <pre><code>def unattach(self, subid):
    """Remove a subscription of a control with a global subscription id (gpid)
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`
    (object) The instance of a RemoteControl object corresponding to the control you want
    to cease being able to actuate.
    """
    return self.__sub_delete(subid)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.unfollow">
    <p>def <span class="ident">unfollow</span>(</p><p>self, subid)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove a subscription of a Feed with a global subscription id (gpid)</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>subid</code> (required) <code>Either</code> (uuid) global id of the subscription you want to delete <code>or</code>
(object) The instance of a RemoteFeed object corresponding to the feed you want to cease
following.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.unfollow', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.unfollow" class="source">
    <pre><code>def unfollow(self, subid):
    """Remove a subscription of a Feed with a global subscription id (gpid)
    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)
    containing the error if the infrastructure detects a problem
    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)
    if there is a communications problem between you and the infrastructure
    `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`
    (object) The instance of a RemoteFeed object corresponding to the feed you want to cease
    following.
    """
    return self.__sub_delete(subid)
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.agent_id" class="name">var <span class="ident">agent_id</span></p>
            

            
  
    <div class="desc"><p>Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any
agent. The following actions can only be performed with a Thing if operating in its associated agent:</p>
<ul>
<li>Receive feed data from feeds the Thing is following</li>
<li>Share feed data for feeds this Thing owns</li>
<li>Receive control requests for controls the Thing owns</li>
<li>Perform ask/tell on a control this Thing is attached to</li>
</ul>
<p>Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or
remote (<a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>) exception to be raised.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.guid" class="name">var <span class="ident">guid</span></p>
            

            
  
    <div class="desc"><p>The Globally Unique ID of this resource in hex form (undashed).</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.lid" class="name">var <span class="ident">lid</span></p>
            

            
  
    <div class="desc"><p>The local id of this Thing.  This is unique to you on this container.
Think of it as a nickname for the Thing</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
