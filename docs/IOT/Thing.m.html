<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>IoticAgent.IOT.Thing API documentation</title>
    <meta name="description" content="Wrapper object for Iotic Things" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #05B;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 1px dashed #CCCCCC;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #E95420;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_ENTITY_LID">P_ENTITY_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_EPID">P_EPID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_ID">P_ID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_LID">P_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_ENTITY_LID">P_POINT_ENTITY_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_ID">P_POINT_ID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_LID">P_POINT_LID</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_POINT_TYPE">P_POINT_TYPE</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.P_RESOURCE">P_RESOURCE</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_CONTROL">R_CONTROL</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_FEED">R_FEED</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.R_SUB">R_SUB</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.logger">logger</a></li>
  </ul>

    </li>


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#IoticAgent.IOT.Thing.Thing">Thing</a></span>
        
          
  <ul>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.__init__">__init__</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.attach">attach</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.attach_async">attach_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_control">create_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_control_async">create_control_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_feed">create_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_feed_async">create_feed_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.create_tag">create_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_control">delete_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_control_async">delete_control_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_feed">delete_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_feed_async">delete_feed_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.delete_tag">delete_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.follow">follow</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.follow_async">follow_async</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_control">get_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_feed">get_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_meta">get_meta</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_meta_rdf">get_meta_rdf</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_remote_control">get_remote_control</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.get_remote_feed">get_remote_feed</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_connections">list_connections</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_controls">list_controls</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_feeds">list_feeds</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.list_tag">list_tag</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.reassign">reassign</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.rename">rename</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.set_meta_rdf">set_meta_rdf</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.set_public">set_public</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.unattach">unattach</a></li>
    <li class="mono"><a href="#IoticAgent.IOT.Thing.Thing.unfollow">unfollow</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">IoticAgent.IOT.Thing</span> module</h1>
  <p>Wrapper object for Iotic Things</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing" class="source">
    <div class="codehilite"><pre><span></span><span class="c1"># Copyright (c) 2016 Iotic Labs Ltd. All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     https://github.com/Iotic-Labs/py-IoticAgent/blob/master/LICENSE</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="sd">&quot;&quot;&quot;Wrapper object for Iotic Things</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">IoticAgent.Core.Const</span> <span class="kn">import</span> <span class="p">(</span><span class="n">P_RESOURCE</span><span class="p">,</span> <span class="n">R_FEED</span><span class="p">,</span> <span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">R_SUB</span><span class="p">,</span> <span class="n">P_ID</span><span class="p">,</span> <span class="n">P_LID</span><span class="p">,</span> <span class="n">P_ENTITY_LID</span><span class="p">,</span> <span class="n">P_POINT_LID</span><span class="p">,</span>
                                   <span class="n">P_POINT_ID</span><span class="p">,</span> <span class="n">P_POINT_ENTITY_LID</span><span class="p">,</span> <span class="n">P_POINT_TYPE</span><span class="p">,</span> <span class="n">P_EPID</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">IoticAgent.Core</span> <span class="kn">import</span> <span class="n">ThreadSafeDict</span>
<span class="kn">from</span> <span class="nn">IoticAgent.Core.compat</span> <span class="kn">import</span> <span class="n">raise_from</span><span class="p">,</span> <span class="n">string_types</span><span class="p">,</span> <span class="n">Sequence</span>
<span class="kn">from</span> <span class="nn">IoticAgent.Core.Validation</span> <span class="kn">import</span> <span class="n">Validation</span>

<span class="kn">from</span> <span class="nn">.Exceptions</span> <span class="kn">import</span> <span class="n">IOTClientError</span>
<span class="kn">from</span> <span class="nn">.Resource</span> <span class="kn">import</span> <span class="n">Resource</span>
<span class="kn">from</span> <span class="nn">.RemotePoint</span> <span class="kn">import</span> <span class="n">RemoteFeed</span><span class="p">,</span> <span class="n">RemoteControl</span>
<span class="kn">from</span> <span class="nn">.Point</span> <span class="kn">import</span> <span class="n">Feed</span><span class="p">,</span> <span class="n">Control</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">foc_to_str</span><span class="p">,</span> <span class="n">uuid_to_hex</span>
<span class="kn">from</span> <span class="nn">.ThingMeta</span> <span class="kn">import</span> <span class="n">ThingMeta</span>

<span class="n">_POINT_TYPE_TO_CLASS</span> <span class="o">=</span> <span class="p">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_type</span><span class="p">:</span> <span class="bp">cls</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Feed</span><span class="p">,</span> <span class="n">Control</span><span class="p">)}</span>


<span class="k">class</span> <span class="nc">Thing</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>  <span class="c1"># pylint: disable=too-many-public-methods</span>
    <span class="sd">&quot;&quot;&quot;Thing class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">lid</span><span class="p">,</span> <span class="n">guid</span><span class="p">,</span> <span class="n">epId</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Thing</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">guid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">lid_check_convert</span><span class="p">(</span><span class="n">lid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">guid_check_convert</span><span class="p">(</span><span class="n">epId</span><span class="p">)</span>
        <span class="c1"># Keep track of newly created points &amp; subs (the requests for which originated from current agent)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (thing, </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">guid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Why not just hash guid? Because Thing is used before knowing guid in some cases</span>
        <span class="c1"># Why not hash without guid? Because in two separate containers one could have identicial things</span>
        <span class="c1"># (if not taking guid into account)</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span> <span class="o">^</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">guid</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Thing</span><span class="p">)</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">guid</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">guid</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The local id of this Thing.  This is unique to you on this container.</span>
<span class="sd">        Think of it as a nickname for the Thing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">agent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any</span>
<span class="sd">        agent. The following actions can only be performed with a Thing if operating in its associated agent:</span>

<span class="sd">        - Receive feed data from feeds the Thing is following</span>
<span class="sd">        - Share feed data for feeds this Thing owns</span>
<span class="sd">        - Receive control requests for controls the Thing owns</span>
<span class="sd">        - Perform ask/tell on a control this Thing is attached to</span>

<span class="sd">        Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or</span>
<span class="sd">        remote ([IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)) exception to be raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span>

    <span class="k">def</span> <span class="nf">__list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__list(foc=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, limit=</span><span class="si">%s</span><span class="s2">, offset=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_list</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span>

    <span class="k">def</span> <span class="nf">list_feeds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the feeds on this Thing.</span>

<span class="sd">        Returns QAPI list function payload</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return this many Point details</span>

<span class="sd">        `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;feeds&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">list_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the controls on this Thing.</span>

<span class="sd">        Returns QAPI list function payload</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return this many Point details</span>

<span class="sd">        `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;controls&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set_public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets your Thing to be public to all.  If `public=True`.</span>
<span class="sd">        This means the tags, label and description of your Thing are now searchable by anybody, along with its</span>
<span class="sd">        location and the units of any values on any Points.</span>
<span class="sd">        If `public=False` the metadata of your Thing is no longer searchable.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `public` (optional) (boolean) Whether (or not) to allow your Thing&#39;s metadata</span>
<span class="sd">        to be searched by anybody</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;set_public(public=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">public</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_setpublic</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">public</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rename the Thing.</span>

<span class="sd">        `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you</span>
<span class="sd">        create another Thing using the &quot;old_lid&quot;, the system will oblige, but it will be a completely _new_ Thing.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `new_lid` (required) (string) the new local identifier of your Thing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;rename(new_lid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">new_lid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_notify_thing_lid_change</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reassign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reassign the Thing from one agent to another.</span>

<span class="sd">        `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.</span>
<span class="sd">        They won&#39;t be able to receive control requests, feed data or to share any feeds as they won&#39;t be in this agent.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,</span>
<span class="sd">        current agent will be chosen. If False, existing agent will be unassigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;reassign(new_epid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_reassign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters</span>
<span class="sd">        and the underscore. Tags will be stored lower-cased.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.</span>
<span class="sd">        `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>

        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased</span>
<span class="sd">        will be deleted.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.</span>
<span class="sd">        `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>

        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">list_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the tags for this Thing</span>

<span class="sd">        Returns lists of tags, as below</span>

<span class="sd">            #!python</span>
<span class="sd">            [</span>
<span class="sd">                &quot;mytag1&quot;,</span>
<span class="sd">                &quot;mytag2&quot;</span>
<span class="sd">                &quot;ein_name&quot;,</span>
<span class="sd">                &quot;nochein_name&quot;</span>
<span class="sd">            ]</span>

<span class="sd">        - OR...</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return at most this many tags</span>

<span class="sd">        `offset` (optional) (integer) Return tags starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the metadata object for this Thing</span>

<span class="sd">        Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_meta_rdf</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ThingMeta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">default_lang</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the metadata for this Thing in rdf fmt</span>

<span class="sd">        Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>

<span class="sd">        Returns the RDF in the format you specify. - OR -</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `fmt` (optional) (string) The format of RDF you want returned.</span>
<span class="sd">        Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;meta&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the metadata for this Thing in RDF fmt</span>

<span class="sd">        Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `fmt` (optional) (string) The format of RDF you have sent.</span>
<span class="sd">        Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed</span>
<span class="sd">        instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_feed once, any further calls will raise a `KeyError`</span>

<span class="sd">        Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">        which corresponds to the cached entry for this local feed id</span>

<span class="sd">        `pid` (required) (string) Point id - local identifier of your feed.</span>

<span class="sd">        Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Feed </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new</span>
<span class="sd">        control instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_control once, any further calls will raise a `KeyError`</span>

<span class="sd">        Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,</span>
<span class="sd">        which corresponds to the cached entry for this local control id</span>

<span class="sd">        `pid` (required) (string) local identifier of your control.</span>

<span class="sd">        Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Control </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__create_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">control_cb</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="n">store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="k">if</span> <span class="n">foc</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">store</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">store</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">raise_from</span><span class="p">(</span><span class="n">IOTClientError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> (from </span><span class="si">%s</span><span class="s1">) not in cache (post-create)&#39;</span> <span class="o">%</span>
                                            <span class="p">(</span><span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)),</span>
                             <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__create_point_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_create</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">control_cb</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new Feed for this Thing with a local point id (pid).</span>

<span class="sd">        Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">        or the existing one, if the Feed already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local id of your Feed</span>

<span class="sd">        `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this</span>
<span class="sd">        argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum</span>
<span class="sd">        sample store amount. See also</span>
<span class="sd">        [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a control for this Thing with a local point id (pid) and a control request feedback</span>

<span class="sd">        Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object</span>
<span class="sd">        or the existing one if the Control already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local id of your Control</span>

<span class="sd">        `callback` (required) (function reference) callback function to invoke on receipt of a control request.</span>
<span class="sd">        The callback receives a single dict argument, with keys of:</span>

<span class="sd">            #!python</span>
<span class="sd">            &#39;data&#39;      # (decoded or raw bytes)</span>
<span class="sd">            &#39;mime&#39;      # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">            &#39;subId&#39;     # (the global id of the associated subscripion)</span>
<span class="sd">            &#39;entityLid&#39; # (local id of the Thing to which the control belongs)</span>
<span class="sd">            &#39;lid&#39;       # (local id of control)</span>
<span class="sd">            &#39;confirm&#39;   # (whether a confirmation is expected)</span>
<span class="sd">            &#39;requestId&#39; # (required for sending confirmation)</span>

<span class="sd">        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This</span>
<span class="sd">        is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">        if the point data could not be parsed according to its current value description.</span>

<span class="sd">        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete_point_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_delete</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a feed, identified by its local id.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local identifier of your feed you want to delete</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a control, identified by its local id.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local identifier of your control you want to delete</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__get_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="c1"># global</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">gpid</span> <span class="o">=</span> <span class="n">uuid_to_hex</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span>
        <span class="c1"># not local</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;gpid must be string or two-element tuple&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Not using ThreadSafeDict lock since pop() is atomic operation</span>
            <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">((</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Remote</span><span class="si">%s</span><span class="s1"> subscription </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">gpid</span><span class="p">)),</span> <span class="n">ex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sub</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Either subscription not complete yet or point </span><span class="si">%s</span><span class="s1"> is of opposite type. (In which case&#39;</span>
                             <span class="s1">&#39; call </span><span class="si">%s</span><span class="s1"> instead&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="s1">&#39;attach()&#39;</span> <span class="k">if</span> <span class="n">foc</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="s1">&#39;follow()&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sub</span>

    <span class="k">def</span> <span class="nf">get_remote_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the</span>
<span class="sd">        new `RemoteFeed` instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_remote_feed once, any further calls will raise a `KeyError`</span>

<span class="sd">        Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">        previous call)</span>

<span class="sd">        Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has</span>
<span class="sd">        not completed yet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_remote_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the</span>
<span class="sd">        new `RemoteControl` instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_remote_control once, any further calls will raise a `KeyError`</span>

<span class="sd">        Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">        previous call)</span>

<span class="sd">        Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has</span>
<span class="sd">        not completed yet.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">__sub_add_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used by __sub_make_request to save reference for pending sub request&quot;&quot;&quot;</span>
        <span class="n">new_subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span>
        <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
            <span class="c1"># don&#39;t allow multiple subscription requests to overwrite internal reference</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;subscription for given args pending: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
            <span class="n">new_subs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># don&#39;t preserve reference if request creation failed</span>
            <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="n">new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__sub_del_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blindly clear reference to pending subscription on failure.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;No sub ref </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make right subscription request depending on whether local or global - used by __sub*&quot;&quot;&quot;</span>
        <span class="c1"># global</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">gpid</span> <span class="o">=</span> <span class="n">uuid_to_hex</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_add_reference</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
                <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="c1"># local</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">gpid</span><span class="p">))</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_add_reference</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
                <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_create_local</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="o">*</span><span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;gpid must be string or two-element tuple&#39;</span><span class="p">)</span>

        <span class="n">req</span><span class="o">.</span><span class="n">_run_on_completion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sub_del_reference</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">req</span>

    <span class="k">def</span> <span class="nf">__sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__sub(foc=</span><span class="si">%s</span><span class="s2">, gpid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, callback=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">raise_from</span><span class="p">(</span><span class="n">IOTClientError</span><span class="p">(</span><span class="s1">&#39;Subscription for </span><span class="si">%s</span><span class="s1"> (from </span><span class="si">%s</span><span class="s1">) not in cache (post-create)&#39;</span> <span class="o">%</span>
                                            <span class="n">gpid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">),</span>
                             <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__sub(foc=</span><span class="si">%s</span><span class="s2">, gpid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, callback=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_make_request</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">follow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback</span>

<span class="sd">        Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)</span>
<span class="sd">        object or the existing one if the subscription already exists - OR -</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`</span>

<span class="sd">        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>

<span class="sd">        `callback` (optional) (function reference) callback function to invoke on receipt of feed data.</span>
<span class="sd">        The callback receives a single dict argument, with keys of:</span>

<span class="sd">            #!python</span>
<span class="sd">            &#39;data&#39; # (decoded or raw bytes)</span>
<span class="sd">            &#39;mime&#39; # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">            &#39;pid&#39;  # (the global id of the feed from which the data originates)</span>
<span class="sd">            &#39;time&#39; # (datetime representing UTC timestamp of share)</span>

<span class="sd">        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is</span>
<span class="sd">        equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">        if the point data could not be parsed according to its current value description.</span>

<span class="sd">        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">follow_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback</span>

<span class="sd">        Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)</span>
<span class="sd">        object or the existing one if the subscription already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`</span>

<span class="sd">        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">attach_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="p">(</span><span class="n">RemoteFeed</span><span class="p">,</span> <span class="n">RemoteControl</span><span class="p">)):</span>
            <span class="n">subid</span> <span class="o">=</span> <span class="n">subid</span><span class="o">.</span><span class="n">subid</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unfollow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a subscription of a Feed with a global subscription id (gpid)</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">        (object) The instance of a RemoteFeed object corresponding to the feed you want to cease</span>
<span class="sd">        following.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unattach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a subscription of a control with a global subscription id (gpid)</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">        (object) The instance of a RemoteControl object corresponding to the control you want</span>
<span class="sd">        to cease being able to actuate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">list_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List Points to which this Things is subscribed.</span>
<span class="sd">        I.e. list all the Points this Thing is following and controls it&#39;s attached to</span>

<span class="sd">        Returns subscription list e.g.</span>

<span class="sd">            #!python</span>
<span class="sd">            {</span>
<span class="sd">                &quot;&lt;Subscription GUID 1&gt;&quot;: {</span>
<span class="sd">                    &quot;id&quot;: &quot;&lt;Control GUID&gt;&quot;,</span>
<span class="sd">                    &quot;entityId&quot;:  &quot;&lt;Control&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                    &quot;type&quot;: 3  # R_CONTROL from IoticAgent.Core.Const</span>
<span class="sd">                },</span>
<span class="sd">                &quot;&lt;Subscription GUID 2&gt;&quot;: {</span>
<span class="sd">                    &quot;id&quot;: &quot;&lt;Feed GUID&gt;&quot;,</span>
<span class="sd">                    &quot;entityId&quot;:  &quot;&lt;Feed&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                    &quot;type&quot;: 2  # R_FEED from IoticAgent.Core.Const</span>
<span class="sd">            }</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        Note: For Things following a Point see</span>
<span class="sd">        [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;subs&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_cb_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">duplicated</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Indirect callback (via Client) for point &amp; subscription creation responses&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="ow">in</span> <span class="n">_POINT_TYPE_TO_CLASS</span><span class="p">:</span>
            <span class="n">store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">_POINT_TYPE_TO_CLASS</span><span class="p">[</span><span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]]</span>
            <span class="k">with</span> <span class="n">store</span><span class="p">:</span>
                <span class="n">store</span><span class="p">[</span><span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ID</span><span class="p">])</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Added </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1"> (for </span><span class="si">%s</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]),</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">],</span>
                         <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_SUB</span><span class="p">:</span>
            <span class="c1"># local</span>
            <span class="k">if</span> <span class="n">P_POINT_ENTITY_LID</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">],</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ENTITY_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_LID</span><span class="p">]))</span>
            <span class="c1"># global</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ID</span><span class="p">])</span>

            <span class="n">new_subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span>
            <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_subs</span><span class="p">:</span>
                    <span class="bp">cls</span> <span class="o">=</span> <span class="n">RemoteFeed</span> <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="n">RemoteControl</span>
                    <span class="n">new_subs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Ignoring subscription creation for unexpected </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                                   <span class="n">foc_to_str</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">]),</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Resource creation of type </span><span class="si">%d</span><span class="s1"> unhandled&#39;</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_cb_reassigned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_EPID</span><span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Thing </span><span class="si">%s</span><span class="s1"> reassigned to agent </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_ENTITY_LID" class="name">var <span class="ident">P_ENTITY_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_EPID" class="name">var <span class="ident">P_EPID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_ID" class="name">var <span class="ident">P_ID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_LID" class="name">var <span class="ident">P_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_ENTITY_LID" class="name">var <span class="ident">P_POINT_ENTITY_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_ID" class="name">var <span class="ident">P_POINT_ID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_LID" class="name">var <span class="ident">P_POINT_LID</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_POINT_TYPE" class="name">var <span class="ident">P_POINT_TYPE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.P_RESOURCE" class="name">var <span class="ident">P_RESOURCE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_CONTROL" class="name">var <span class="ident">R_CONTROL</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_FEED" class="name">var <span class="ident">R_FEED</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.R_SUB" class="name">var <span class="ident">R_SUB</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="IoticAgent.IOT.Thing.logger" class="name">var <span class="ident">logger</span></p>
      
  
  <div class="source_cont">
</div>

      </div>


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="IoticAgent.IOT.Thing.Thing" class="name">class <span class="ident">Thing</span></p>
      
  
    <div class="desc"><p>Thing class</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Thing</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>  <span class="c1"># pylint: disable=too-many-public-methods</span>
    <span class="sd">&quot;&quot;&quot;Thing class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">lid</span><span class="p">,</span> <span class="n">guid</span><span class="p">,</span> <span class="n">epId</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Thing</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">guid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">lid_check_convert</span><span class="p">(</span><span class="n">lid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">guid_check_convert</span><span class="p">(</span><span class="n">epId</span><span class="p">)</span>
        <span class="c1"># Keep track of newly created points &amp; subs (the requests for which originated from current agent)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (thing, </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">guid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Why not just hash guid? Because Thing is used before knowing guid in some cases</span>
        <span class="c1"># Why not hash without guid? Because in two separate containers one could have identicial things</span>
        <span class="c1"># (if not taking guid into account)</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span> <span class="o">^</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">guid</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Thing</span><span class="p">)</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">guid</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">guid</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The local id of this Thing.  This is unique to you on this container.</span>
<span class="sd">        Think of it as a nickname for the Thing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">agent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any</span>
<span class="sd">        agent. The following actions can only be performed with a Thing if operating in its associated agent:</span>

<span class="sd">        - Receive feed data from feeds the Thing is following</span>
<span class="sd">        - Share feed data for feeds this Thing owns</span>
<span class="sd">        - Receive control requests for controls the Thing owns</span>
<span class="sd">        - Perform ask/tell on a control this Thing is attached to</span>

<span class="sd">        Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or</span>
<span class="sd">        remote ([IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)) exception to be raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span>

    <span class="k">def</span> <span class="nf">__list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__list(foc=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, limit=</span><span class="si">%s</span><span class="s2">, offset=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_list</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span>

    <span class="k">def</span> <span class="nf">list_feeds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the feeds on this Thing.</span>

<span class="sd">        Returns QAPI list function payload</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return this many Point details</span>

<span class="sd">        `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;feeds&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">list_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the controls on this Thing.</span>

<span class="sd">        Returns QAPI list function payload</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return this many Point details</span>

<span class="sd">        `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;controls&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set_public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets your Thing to be public to all.  If `public=True`.</span>
<span class="sd">        This means the tags, label and description of your Thing are now searchable by anybody, along with its</span>
<span class="sd">        location and the units of any values on any Points.</span>
<span class="sd">        If `public=False` the metadata of your Thing is no longer searchable.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `public` (optional) (boolean) Whether (or not) to allow your Thing&#39;s metadata</span>
<span class="sd">        to be searched by anybody</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;set_public(public=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">public</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_setpublic</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">public</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rename the Thing.</span>

<span class="sd">        `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you</span>
<span class="sd">        create another Thing using the &quot;old_lid&quot;, the system will oblige, but it will be a completely _new_ Thing.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `new_lid` (required) (string) the new local identifier of your Thing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;rename(new_lid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">new_lid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_notify_thing_lid_change</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reassign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reassign the Thing from one agent to another.</span>

<span class="sd">        `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.</span>
<span class="sd">        They won&#39;t be able to receive control requests, feed data or to share any feeds as they won&#39;t be in this agent.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,</span>
<span class="sd">        current agent will be chosen. If False, existing agent will be unassigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;reassign(new_epid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_reassign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters</span>
<span class="sd">        and the underscore. Tags will be stored lower-cased.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.</span>
<span class="sd">        `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>

        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased</span>
<span class="sd">        will be deleted.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.</span>
<span class="sd">        `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>

        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">list_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List `all` the tags for this Thing</span>

<span class="sd">        Returns lists of tags, as below</span>

<span class="sd">            #!python</span>
<span class="sd">            [</span>
<span class="sd">                &quot;mytag1&quot;,</span>
<span class="sd">                &quot;mytag2&quot;</span>
<span class="sd">                &quot;ein_name&quot;,</span>
<span class="sd">                &quot;nochein_name&quot;</span>
<span class="sd">            ]</span>

<span class="sd">        - OR...</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `limit` (optional) (integer) Return at most this many tags</span>

<span class="sd">        `offset` (optional) (integer) Return tags starting at this offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the metadata object for this Thing</span>

<span class="sd">        Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_meta_rdf</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ThingMeta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">default_lang</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the metadata for this Thing in rdf fmt</span>

<span class="sd">        Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>

<span class="sd">        Returns the RDF in the format you specify. - OR -</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `fmt` (optional) (string) The format of RDF you want returned.</span>
<span class="sd">        Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;meta&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the metadata for this Thing in RDF fmt</span>

<span class="sd">        Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">        [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `fmt` (optional) (string) The format of RDF you have sent.</span>
<span class="sd">        Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed</span>
<span class="sd">        instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_feed once, any further calls will raise a `KeyError`</span>

<span class="sd">        Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">        which corresponds to the cached entry for this local feed id</span>

<span class="sd">        `pid` (required) (string) Point id - local identifier of your feed.</span>

<span class="sd">        Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Feed </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new</span>
<span class="sd">        control instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_control once, any further calls will raise a `KeyError`</span>

<span class="sd">        Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,</span>
<span class="sd">        which corresponds to the cached entry for this local control id</span>

<span class="sd">        `pid` (required) (string) local identifier of your control.</span>

<span class="sd">        Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Control </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__create_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">control_cb</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="n">store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="k">if</span> <span class="n">foc</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">store</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">store</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">raise_from</span><span class="p">(</span><span class="n">IOTClientError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> (from </span><span class="si">%s</span><span class="s1">) not in cache (post-create)&#39;</span> <span class="o">%</span>
                                            <span class="p">(</span><span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)),</span>
                             <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__create_point_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_create</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">control_cb</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new Feed for this Thing with a local point id (pid).</span>

<span class="sd">        Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">        or the existing one, if the Feed already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local id of your Feed</span>

<span class="sd">        `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this</span>
<span class="sd">        argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum</span>
<span class="sd">        sample store amount. See also</span>
<span class="sd">        [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a control for this Thing with a local point id (pid) and a control request feedback</span>

<span class="sd">        Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object</span>
<span class="sd">        or the existing one if the Control already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local id of your Control</span>

<span class="sd">        `callback` (required) (function reference) callback function to invoke on receipt of a control request.</span>
<span class="sd">        The callback receives a single dict argument, with keys of:</span>

<span class="sd">            #!python</span>
<span class="sd">            &#39;data&#39;      # (decoded or raw bytes)</span>
<span class="sd">            &#39;mime&#39;      # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">            &#39;subId&#39;     # (the global id of the associated subscripion)</span>
<span class="sd">            &#39;entityLid&#39; # (local id of the Thing to which the control belongs)</span>
<span class="sd">            &#39;lid&#39;       # (local id of control)</span>
<span class="sd">            &#39;confirm&#39;   # (whether a confirmation is expected)</span>
<span class="sd">            &#39;requestId&#39; # (required for sending confirmation)</span>

<span class="sd">        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This</span>
<span class="sd">        is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">        if the point data could not be parsed according to its current value description.</span>

<span class="sd">        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete_point_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_point_delete</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a feed, identified by its local id.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local identifier of your feed you want to delete</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a control, identified by its local id.</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `pid` (required) (string) local identifier of your control you want to delete</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__get_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="c1"># global</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">gpid</span> <span class="o">=</span> <span class="n">uuid_to_hex</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span>
        <span class="c1"># not local</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;gpid must be string or two-element tuple&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Not using ThreadSafeDict lock since pop() is atomic operation</span>
            <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">((</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Remote</span><span class="si">%s</span><span class="s1"> subscription </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">gpid</span><span class="p">)),</span> <span class="n">ex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sub</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Either subscription not complete yet or point </span><span class="si">%s</span><span class="s1"> is of opposite type. (In which case&#39;</span>
                             <span class="s1">&#39; call </span><span class="si">%s</span><span class="s1"> instead&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="s1">&#39;attach()&#39;</span> <span class="k">if</span> <span class="n">foc</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="s1">&#39;follow()&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sub</span>

    <span class="k">def</span> <span class="nf">get_remote_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the</span>
<span class="sd">        new `RemoteFeed` instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_remote_feed once, any further calls will raise a `KeyError`</span>

<span class="sd">        Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">        previous call)</span>

<span class="sd">        Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has</span>
<span class="sd">        not completed yet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_remote_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the</span>
<span class="sd">        new `RemoteControl` instance can only be retrieved once.</span>

<span class="sd">        `NOTE` - Destructive Read. Once you&#39;ve called get_remote_control once, any further calls will raise a `KeyError`</span>

<span class="sd">        Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">        previous call)</span>

<span class="sd">        Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has</span>
<span class="sd">        not completed yet.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">__sub_add_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used by __sub_make_request to save reference for pending sub request&quot;&quot;&quot;</span>
        <span class="n">new_subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span>
        <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
            <span class="c1"># don&#39;t allow multiple subscription requests to overwrite internal reference</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;subscription for given args pending: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
            <span class="n">new_subs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># don&#39;t preserve reference if request creation failed</span>
            <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="n">new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__sub_del_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Blindly clear reference to pending subscription on failure.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;No sub ref </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make right subscription request depending on whether local or global - used by __sub*&quot;&quot;&quot;</span>
        <span class="c1"># global</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">gpid</span> <span class="o">=</span> <span class="n">uuid_to_hex</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_add_reference</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
                <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="c1"># local</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gpid</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gpid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">gpid</span><span class="p">))</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_add_reference</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
                <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_create_local</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="o">*</span><span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;gpid must be string or two-element tuple&#39;</span><span class="p">)</span>

        <span class="n">req</span><span class="o">.</span><span class="n">_run_on_completion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sub_del_reference</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">req</span>

    <span class="k">def</span> <span class="nf">__sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__sub(foc=</span><span class="si">%s</span><span class="s2">, gpid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, callback=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">raise_from</span><span class="p">(</span><span class="n">IOTClientError</span><span class="p">(</span><span class="s1">&#39;Subscription for </span><span class="si">%s</span><span class="s1"> (from </span><span class="si">%s</span><span class="s1">) not in cache (post-create)&#39;</span> <span class="o">%</span>
                                            <span class="n">gpid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">),</span>
                             <span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;__sub(foc=</span><span class="si">%s</span><span class="s2">, gpid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, callback=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">foc</span><span class="p">),</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_make_request</span><span class="p">(</span><span class="n">foc</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">follow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback</span>

<span class="sd">        Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)</span>
<span class="sd">        object or the existing one if the subscription already exists - OR -</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`</span>

<span class="sd">        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>

<span class="sd">        `callback` (optional) (function reference) callback function to invoke on receipt of feed data.</span>
<span class="sd">        The callback receives a single dict argument, with keys of:</span>

<span class="sd">            #!python</span>
<span class="sd">            &#39;data&#39; # (decoded or raw bytes)</span>
<span class="sd">            &#39;mime&#39; # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">            &#39;pid&#39;  # (the global id of the feed from which the data originates)</span>
<span class="sd">            &#39;time&#39; # (datetime representing UTC timestamp of share)</span>

<span class="sd">        `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is</span>
<span class="sd">        equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">        [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">        `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">        if the point data could not be parsed according to its current value description.</span>

<span class="sd">        `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">follow_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback</span>

<span class="sd">        Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)</span>
<span class="sd">        object or the existing one if the subscription already exists</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`</span>

<span class="sd">        `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">attach_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subid</span><span class="p">,</span> <span class="p">(</span><span class="n">RemoteFeed</span><span class="p">,</span> <span class="n">RemoteControl</span><span class="p">)):</span>
            <span class="n">subid</span> <span class="o">=</span> <span class="n">subid</span><span class="o">.</span><span class="n">subid</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unfollow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a subscription of a Feed with a global subscription id (gpid)</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">        (object) The instance of a RemoteFeed object corresponding to the feed you want to cease</span>
<span class="sd">        following.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unattach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a subscription of a control with a global subscription id (gpid)</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">        (object) The instance of a RemoteControl object corresponding to the control you want</span>
<span class="sd">        to cease being able to actuate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">list_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List Points to which this Things is subscribed.</span>
<span class="sd">        I.e. list all the Points this Thing is following and controls it&#39;s attached to</span>

<span class="sd">        Returns subscription list e.g.</span>

<span class="sd">            #!python</span>
<span class="sd">            {</span>
<span class="sd">                &quot;&lt;Subscription GUID 1&gt;&quot;: {</span>
<span class="sd">                    &quot;id&quot;: &quot;&lt;Control GUID&gt;&quot;,</span>
<span class="sd">                    &quot;entityId&quot;:  &quot;&lt;Control&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                    &quot;type&quot;: 3  # R_CONTROL from IoticAgent.Core.Const</span>
<span class="sd">                },</span>
<span class="sd">                &quot;&lt;Subscription GUID 2&gt;&quot;: {</span>
<span class="sd">                    &quot;id&quot;: &quot;&lt;Feed GUID&gt;&quot;,</span>
<span class="sd">                    &quot;entityId&quot;:  &quot;&lt;Feed&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                    &quot;type&quot;: 2  # R_FEED from IoticAgent.Core.Const</span>
<span class="sd">            }</span>

<span class="sd">        Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">        containing the error if the infrastructure detects a problem</span>

<span class="sd">        Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">        if there is a communications problem between you and the infrastructure</span>

<span class="sd">        Note: For Things following a Point see</span>
<span class="sd">        [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;subs&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_cb_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">duplicated</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Indirect callback (via Client) for point &amp; subscription creation responses&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="ow">in</span> <span class="n">_POINT_TYPE_TO_CLASS</span><span class="p">:</span>
            <span class="n">store</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">_POINT_TYPE_TO_CLASS</span><span class="p">[</span><span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]]</span>
            <span class="k">with</span> <span class="n">store</span><span class="p">:</span>
                <span class="n">store</span><span class="p">[</span><span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ID</span><span class="p">])</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Added </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1"> (for </span><span class="si">%s</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">foc_to_str</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]),</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_LID</span><span class="p">],</span>
                         <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_SUB</span><span class="p">:</span>
            <span class="c1"># local</span>
            <span class="k">if</span> <span class="n">P_POINT_ENTITY_LID</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">],</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ENTITY_LID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_LID</span><span class="p">]))</span>
            <span class="c1"># global</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ID</span><span class="p">])</span>

            <span class="n">new_subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span>
            <span class="k">with</span> <span class="n">new_subs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_subs</span><span class="p">:</span>
                    <span class="bp">cls</span> <span class="o">=</span> <span class="n">RemoteFeed</span> <span class="k">if</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">]</span> <span class="o">==</span> <span class="n">R_FEED</span> <span class="k">else</span> <span class="n">RemoteControl</span>
                    <span class="n">new_subs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_ID</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_ENTITY_LID</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Ignoring subscription creation for unexpected </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                                   <span class="n">foc_to_str</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">P_POINT_TYPE</span><span class="p">]),</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Resource creation of type </span><span class="si">%d</span><span class="s1"> unhandled&#39;</span><span class="p">,</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_RESOURCE</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_cb_reassigned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="n">P_EPID</span><span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Thing </span><span class="si">%s</span><span class="s1"> reassigned to agent </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#IoticAgent.IOT.Thing.Thing">Thing</a></li>
          <li>IoticAgent.IOT.Resource.Resource</li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, client, lid, guid, epId)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.__init__', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">lid</span><span class="p">,</span> <span class="n">guid</span><span class="p">,</span> <span class="n">epId</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Thing</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">guid</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">lid_check_convert</span><span class="p">(</span><span class="n">lid</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__epId</span> <span class="o">=</span> <span class="n">Validation</span><span class="o">.</span><span class="n">guid_check_convert</span><span class="p">(</span><span class="n">epId</span><span class="p">)</span>
    <span class="c1"># Keep track of newly created points &amp; subs (the requests for which originated from current agent)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__new_subs</span> <span class="o">=</span> <span class="n">ThreadSafeDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.attach">
    <p>def <span class="ident">attach</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback</p>
<p>Returns a new <a href="RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl">RemoteControl</a>
object or the existing one if the subscription already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>gpid</code> (required) (uuid) global id of the Point to which you want to attach <code>-OR-</code></p>
<p><code>gpid</code> (required) (lid,pid) tuple of <code>(thing_localid, point_localid)</code> for local subscription</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.attach', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.attach" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. attach) to a Control-Point with a global point id (gpid) and a feed data callback</span>
<span class="sd">    Returns a new [RemoteControl](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteControl)</span>
<span class="sd">    object or the existing one if the subscription already exists</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `gpid` (required) (uuid) global id of the Point to which you want to attach `-OR-`</span>
<span class="sd">    `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.attach_async">
    <p>def <span class="ident">attach_async</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.attach_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.attach_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">attach_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_control">
    <p>def <span class="ident">create_control</span>(</p><p>self, pid, callback, callback_parsed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a control for this Thing with a local point id (pid) and a control request feedback</p>
<p>Returns a new <a href="Point.m.html#IoticAgent.IOT.Point.Control">Control</a> object
or the existing one if the Control already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local id of your Control</p>
<p><code>callback</code> (required) (function reference) callback function to invoke on receipt of a control request.
The callback receives a single dict argument, with keys of:</p>
<div class="codehilite"><pre><span></span><span class="s1">&#39;data&#39;</span>      <span class="c1"># (decoded or raw bytes)</span>
<span class="s1">&#39;mime&#39;</span>      <span class="c1"># (None, unless payload was not decoded and has a mime type)</span>
<span class="s1">&#39;subId&#39;</span>     <span class="c1"># (the global id of the associated subscripion)</span>
<span class="s1">&#39;entityLid&#39;</span> <span class="c1"># (local id of the Thing to which the control belongs)</span>
<span class="s1">&#39;lid&#39;</span>       <span class="c1"># (local id of control)</span>
<span class="s1">&#39;confirm&#39;</span>   <span class="c1"># (whether a confirmation is expected)</span>
<span class="s1">&#39;requestId&#39;</span> <span class="c1"># (required for sending confirmation)</span>
</pre></div>


<p><code>callback_parsed</code> (optional) (function reference) callback function to invoke on receipt of control data. This
is equivalent to <code>callback</code> except the dict includes the <code>parsed</code> key which holds the set of values in a
<a href="./Point.m.html#IoticAgent.IOT.Point.PointDataObject">PointDataObject</a> instance. If both
<code>callback_parsed</code> and <code>callback</code> have been specified, the former takes precedence and <code>callback</code> is only called
if the point data could not be parsed according to its current value description.</p>
<p><code>NOTE</code>: <code>callback_parsed</code> can only be used if <code>auto_encode_decode</code> is enabled for the client instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_control" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a control for this Thing with a local point id (pid) and a control request feedback</span>
<span class="sd">    Returns a new [Control](Point.m.html#IoticAgent.IOT.Point.Control) object</span>
<span class="sd">    or the existing one if the Control already exists</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `pid` (required) (string) local id of your Control</span>
<span class="sd">    `callback` (required) (function reference) callback function to invoke on receipt of a control request.</span>
<span class="sd">    The callback receives a single dict argument, with keys of:</span>
<span class="sd">        #!python</span>
<span class="sd">        &#39;data&#39;      # (decoded or raw bytes)</span>
<span class="sd">        &#39;mime&#39;      # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">        &#39;subId&#39;     # (the global id of the associated subscripion)</span>
<span class="sd">        &#39;entityLid&#39; # (local id of the Thing to which the control belongs)</span>
<span class="sd">        &#39;lid&#39;       # (local id of control)</span>
<span class="sd">        &#39;confirm&#39;   # (whether a confirmation is expected)</span>
<span class="sd">        &#39;requestId&#39; # (required for sending confirmation)</span>
<span class="sd">    `callback_parsed` (optional) (function reference) callback function to invoke on receipt of control data. This</span>
<span class="sd">    is equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">    [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">    `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">    if the point data could not be parsed according to its current value description.</span>
<span class="sd">    `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_control_async">
    <p>def <span class="ident">create_control_async</span>(</p><p>self, pid, callback, callback_parsed=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_control_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_control_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">, control_cb=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_control_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">control_cb</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_feed">
    <p>def <span class="ident">create_feed</span>(</p><p>self, pid, save_recent=0)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a new Feed for this Thing with a local point id (pid).</p>
<p>Returns a new <a href="Point.m.html#IoticAgent.IOT.Point.Feed">Feed</a> object,
or the existing one, if the Feed already exists</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local id of your Feed</p>
<p><code>save_recent</code> (optional) (int) how many shares to store for later retrieval. If not supported by container, this
argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum
sample store amount. See also
<a href="./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config">Feed.set_recent_config</a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_feed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new Feed for this Thing with a local point id (pid).</span>
<span class="sd">    Returns a new [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">    or the existing one, if the Feed already exists</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `pid` (required) (string) local id of your Feed</span>
<span class="sd">    `save_recent` (optional) (int) how many shares to store for later retrieval. If not supported by container, this</span>
<span class="sd">    argument will be ignored. A value of zero disables this feature whilst a negative value requests the maximum</span>
<span class="sd">    sample store amount. See also</span>
<span class="sd">    [Feed.set_recent_config](./Point.m.html#IoticAgent.IOT.Point.Feed.set_recent_config).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_feed_async">
    <p>def <span class="ident">create_feed_async</span>(</p><p>self, pid, save_recent=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_feed_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_feed_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;create_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__create_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">save_recent</span><span class="o">=</span><span class="n">save_recent</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.create_tag">
    <p>def <span class="ident">create_tag</span>(</p><p>self, tags)</p>
    </div>
    

    
  
    <div class="desc"><p>Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters
and the underscore. Tags will be stored lower-cased.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>tags</code> (mandatory) (list) - the list of tags you want to add to your Thing, e.g.
<code>["garden", "soil"]</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.create_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.create_tag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create tags for a Thing in the language you specify. Tags can only contain alphanumeric (unicode) characters</span>
<span class="sd">    and the underscore. Tags will be stored lower-cased.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `tags` (mandatory) (list) - the list of tags you want to add to your Thing, e.g.</span>
<span class="sd">    `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_control">
    <p>def <span class="ident">delete_control</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete a control, identified by its local id.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local identifier of your control you want to delete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_control" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete a control, identified by its local id.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `pid` (required) (string) local identifier of your control you want to delete</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_control_async">
    <p>def <span class="ident">delete_control_async</span>(</p><p>self, pid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_control_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_control_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_control_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_control_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_feed">
    <p>def <span class="ident">delete_feed</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete a feed, identified by its local id.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>pid</code> (required) (string) local identifier of your feed you want to delete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_feed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete a feed, identified by its local id.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `pid` (required) (string) local identifier of your feed you want to delete</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_feed_async">
    <p>def <span class="ident">delete_feed_async</span>(</p><p>self, pid)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_feed_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_feed_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_feed_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;delete_feed_async(pid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delete_point_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.delete_tag">
    <p>def <span class="ident">delete_tag</span>(</p><p>self, tags)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased
will be deleted.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>tags</code> (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.
<code>["garden", "soil"]</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.delete_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.delete_tag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete tags for a Thing in the language you specify. Case will be ignored and any tags matching lower-cased</span>
<span class="sd">    will be deleted.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `tags` (mandatory) (list) - the list of tags you want to delete from your Thing, e.g.</span>
<span class="sd">    `[&quot;garden&quot;, &quot;soil&quot;]`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tags</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags</span><span class="p">]</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.follow">
    <p>def <span class="ident">follow</span>(</p><p>self, gpid, callback=None, callback_parsed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback</p>
<p>Returns a new <a href="RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed">RemoteFeed</a>
object or the existing one if the subscription already exists - OR -</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>gpid</code> (required) (uuid) global id of the Point you want to follow <code>-OR-</code></p>
<p><code>gpid</code> (required) (lid,pid) tuple of <code>(thing_localid, point_localid)</code> for local subscription</p>
<p><code>callback</code> (optional) (function reference) callback function to invoke on receipt of feed data.
The callback receives a single dict argument, with keys of:</p>
<div class="codehilite"><pre><span></span><span class="s1">&#39;data&#39;</span> <span class="c1"># (decoded or raw bytes)</span>
<span class="s1">&#39;mime&#39;</span> <span class="c1"># (None, unless payload was not decoded and has a mime type)</span>
<span class="s1">&#39;pid&#39;</span>  <span class="c1"># (the global id of the feed from which the data originates)</span>
<span class="s1">&#39;time&#39;</span> <span class="c1"># (datetime representing UTC timestamp of share)</span>
</pre></div>


<p><code>callback_parsed</code> (optional) (function reference) callback function to invoke on receipt of feed data. This is
equivalent to <code>callback</code> except the dict includes the <code>parsed</code> key which holds the set of values in a
<a href="./Point.m.html#IoticAgent.IOT.Point.PointDataObject">PointDataObject</a> instance. If both
<code>callback_parsed</code> and <code>callback</code> have been specified, the former takes precedence and <code>callback</code> is only called
if the point data could not be parsed according to its current value description.</p>
<p><code>NOTE</code>: <code>callback_parsed</code> can only be used if <code>auto_encode_decode</code> is enabled for the client instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.follow', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.follow" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">follow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a subscription (i.e. follow) a Feed/Point with a global point id (gpid) and a feed data callback</span>
<span class="sd">    Returns a new [RemoteFeed](RemotePoint.m.html#IoticAgent.IOT.RemotePoint.RemoteFeed)</span>
<span class="sd">    object or the existing one if the subscription already exists - OR -</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `gpid` (required) (uuid) global id of the Point you want to follow `-OR-`</span>
<span class="sd">    `gpid` (required) (lid,pid) tuple of `(thing_localid, point_localid)` for local subscription</span>
<span class="sd">    `callback` (optional) (function reference) callback function to invoke on receipt of feed data.</span>
<span class="sd">    The callback receives a single dict argument, with keys of:</span>
<span class="sd">        #!python</span>
<span class="sd">        &#39;data&#39; # (decoded or raw bytes)</span>
<span class="sd">        &#39;mime&#39; # (None, unless payload was not decoded and has a mime type)</span>
<span class="sd">        &#39;pid&#39;  # (the global id of the feed from which the data originates)</span>
<span class="sd">        &#39;time&#39; # (datetime representing UTC timestamp of share)</span>
<span class="sd">    `callback_parsed` (optional) (function reference) callback function to invoke on receipt of feed data. This is</span>
<span class="sd">    equivalent to `callback` except the dict includes the `parsed` key which holds the set of values in a</span>
<span class="sd">    [PointDataObject](./Point.m.html#IoticAgent.IOT.Point.PointDataObject) instance. If both</span>
<span class="sd">    `callback_parsed` and `callback` have been specified, the former takes precedence and `callback` is only called</span>
<span class="sd">    if the point data could not be parsed according to its current value description.</span>
<span class="sd">    `NOTE`: `callback_parsed` can only be used if `auto_encode_decode` is enabled for the client instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.follow_async">
    <p>def <span class="ident">follow_async</span>(</p><p>self, gpid, callback=None, callback_parsed=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.follow_async', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.follow_async" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">follow_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback_parsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">callback_parsed</span><span class="p">:</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_parsed_feed_callback</span><span class="p">(</span><span class="n">callback_parsed</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_async</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_control">
    <p>def <span class="ident">get_control</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new
control instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_control once, any further calls will raise a <code>KeyError</code></p>
<p>Returns a <a href="Point.m.html#IoticAgent.IOT.Point.Control">Control</a> object,
which corresponds to the cached entry for this local control id</p>
<p><code>pid</code> (required) (string) local identifier of your control.</p>
<p>Raises <code>KeyError</code> if the control has not been newly created (or has already been retrieved by a previous call)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_control" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the details of a newly created control. This only applies to asynchronous creation of feeds and the new</span>
<span class="sd">    control instance can only be retrieved once.</span>
<span class="sd">    `NOTE` - Destructive Read. Once you&#39;ve called get_control once, any further calls will raise a `KeyError`</span>
<span class="sd">    Returns a [Control](Point.m.html#IoticAgent.IOT.Point.Control) object,</span>
<span class="sd">    which corresponds to the cached entry for this local control id</span>
<span class="sd">    `pid` (required) (string) local identifier of your control.</span>
<span class="sd">    Raises `KeyError` if the control has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_controls</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Control </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_feed">
    <p>def <span class="ident">get_feed</span>(</p><p>self, pid)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed
instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_feed once, any further calls will raise a <code>KeyError</code></p>
<p>Returns a <a href="Point.m.html#IoticAgent.IOT.Point.Feed">Feed</a> object,
which corresponds to the cached entry for this local feed id</p>
<p><code>pid</code> (required) (string) Point id - local identifier of your feed.</p>
<p>Raises <code>KeyError</code> if the feed has not been newly created (or has already been retrieved by a previous call)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_feed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the details of a newly created feed. This only applies to asynchronous creation of feeds and the new feed</span>
<span class="sd">    instance can only be retrieved once.</span>
<span class="sd">    `NOTE` - Destructive Read. Once you&#39;ve called get_feed once, any further calls will raise a `KeyError`</span>
<span class="sd">    Returns a [Feed](Point.m.html#IoticAgent.IOT.Point.Feed) object,</span>
<span class="sd">    which corresponds to the cached entry for this local feed id</span>
<span class="sd">    `pid` (required) (string) Point id - local identifier of your feed.</span>
<span class="sd">    Raises `KeyError` if the feed has not been newly created (or has already been retrieved by a previous call)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__new_feeds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">raise_from</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Feed </span><span class="si">%s</span><span class="s1"> not know as new&#39;</span> <span class="o">%</span> <span class="n">pid</span><span class="p">),</span> <span class="n">ex</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_meta">
    <p>def <span class="ident">get_meta</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the metadata object for this Thing</p>
<p>Returns a <a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_meta', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_meta" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the metadata object for this Thing</span>
<span class="sd">    Returns a [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_meta_rdf</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ThingMeta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">default_lang</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_meta_rdf">
    <p>def <span class="ident">get_meta_rdf</span>(</p><p>self, fmt=&#39;n3&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the metadata for this Thing in rdf fmt</p>
<p>Advanced users who want to manipulate the RDF for this Thing directly without the
<a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> helper object</p>
<p>Returns the RDF in the format you specify. - OR -</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>fmt</code> (optional) (string) The format of RDF you want returned.
Valid formats are: "xml", "n3", "turtle"</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_meta_rdf', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_meta_rdf" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the metadata for this Thing in rdf fmt</span>
<span class="sd">    Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">    [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>
<span class="sd">    Returns the RDF in the format you specify. - OR -</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `fmt` (optional) (string) The format of RDF you want returned.</span>
<span class="sd">    Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;meta&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_remote_control">
    <p>def <span class="ident">get_remote_control</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Retrieve <code>RemoteControl</code> instance for an attach. This only applies to asynchronous attach requests and the
new <code>RemoteControl</code> instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_remote_control once, any further calls will raise a <code>KeyError</code></p>
<p>Raises <code>KeyError</code> if the attach-subscription has not been newly created (or has already been retrieved by a
previous call)</p>
<p>Raises <code>ValueError</code> if the followed Point is actually a feed instead of a control, or if the subscription has
not completed yet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_remote_control', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_remote_control" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_remote_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve `RemoteControl` instance for an attach. This only applies to asynchronous attach requests and the</span>
<span class="sd">    new `RemoteControl` instance can only be retrieved once.</span>
<span class="sd">    `NOTE` - Destructive Read. Once you&#39;ve called get_remote_control once, any further calls will raise a `KeyError`</span>
<span class="sd">    Raises `KeyError` if the attach-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">    previous call)</span>
<span class="sd">    Raises `ValueError` if the followed Point is actually a feed instead of a control, or if the subscription has</span>
<span class="sd">    not completed yet.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.get_remote_feed">
    <p>def <span class="ident">get_remote_feed</span>(</p><p>self, gpid)</p>
    </div>
    

    
  
    <div class="desc"><p>Retrieve <code>RemoteFeed</code> instance for a follow. This only applies to asynchronous follow requests and the
new <code>RemoteFeed</code> instance can only be retrieved once.</p>
<p><code>NOTE</code> - Destructive Read. Once you've called get_remote_feed once, any further calls will raise a <code>KeyError</code></p>
<p>Raises <code>KeyError</code> if the follow-subscription has not been newly created (or has already been retrieved by a
previous call)</p>
<p>Raises <code>ValueError</code> if the followed Point is actually a control instead of a feed, or if the subscription has
not completed yet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.get_remote_feed', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.get_remote_feed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_remote_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gpid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve `RemoteFeed` instance for a follow. This only applies to asynchronous follow requests and the</span>
<span class="sd">    new `RemoteFeed` instance can only be retrieved once.</span>
<span class="sd">    `NOTE` - Destructive Read. Once you&#39;ve called get_remote_feed once, any further calls will raise a `KeyError`</span>
<span class="sd">    Raises `KeyError` if the follow-subscription has not been newly created (or has already been retrieved by a</span>
<span class="sd">    previous call)</span>
<span class="sd">    Raises `ValueError` if the followed Point is actually a control instead of a feed, or if the subscription has</span>
<span class="sd">    not completed yet.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_sub</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">gpid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_connections">
    <p>def <span class="ident">list_connections</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List Points to which this Things is subscribed.
I.e. list all the Points this Thing is following and controls it's attached to</p>
<p>Returns subscription list e.g.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;&lt;Subscription GUID 1&gt;&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;Control GUID&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entityId&quot;</span><span class="p">:</span>  <span class="s2">&quot;&lt;Control&#39;s Thing GUID&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">3</span>  <span class="c1"># R_CONTROL from IoticAgent.Core.Const</span>
    <span class="p">},</span>
    <span class="s2">&quot;&lt;Subscription GUID 2&gt;&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;Feed GUID&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entityId&quot;</span><span class="p">:</span>  <span class="s2">&quot;&lt;Feed&#39;s Thing GUID&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">2</span>  <span class="c1"># R_FEED from IoticAgent.Core.Const</span>
<span class="p">}</span>
</pre></div>


<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p>Note: For Things following a Point see
<a href="./Point.m.html#IoticAgent.IOT.Point.Point.list_followers">list_followers</a></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_connections', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_connections" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">list_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;List Points to which this Things is subscribed.</span>
<span class="sd">    I.e. list all the Points this Thing is following and controls it&#39;s attached to</span>
<span class="sd">    Returns subscription list e.g.</span>
<span class="sd">        #!python</span>
<span class="sd">        {</span>
<span class="sd">            &quot;&lt;Subscription GUID 1&gt;&quot;: {</span>
<span class="sd">                &quot;id&quot;: &quot;&lt;Control GUID&gt;&quot;,</span>
<span class="sd">                &quot;entityId&quot;:  &quot;&lt;Control&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                &quot;type&quot;: 3  # R_CONTROL from IoticAgent.Core.Const</span>
<span class="sd">            },</span>
<span class="sd">            &quot;&lt;Subscription GUID 2&gt;&quot;: {</span>
<span class="sd">                &quot;id&quot;: &quot;&lt;Feed GUID&gt;&quot;,</span>
<span class="sd">                &quot;entityId&quot;:  &quot;&lt;Feed&#39;s Thing GUID&gt;&quot;,</span>
<span class="sd">                &quot;type&quot;: 2  # R_FEED from IoticAgent.Core.Const</span>
<span class="sd">        }</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    Note: For Things following a Point see</span>
<span class="sd">    [list_followers](./Point.m.html#IoticAgent.IOT.Point.Point.list_followers)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_sub_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;subs&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_controls">
    <p>def <span class="ident">list_controls</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the controls on this Thing.</p>
<p>Returns QAPI list function payload</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return this many Point details</p>
<p><code>offset</code> (optional) (integer) Return Point details starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_controls', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_controls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">list_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;List `all` the controls on this Thing.</span>
<span class="sd">    Returns QAPI list function payload</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `limit` (optional) (integer) Return this many Point details</span>
<span class="sd">    `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_CONTROL</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;controls&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_feeds">
    <p>def <span class="ident">list_feeds</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the feeds on this Thing.</p>
<p>Returns QAPI list function payload</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return this many Point details</p>
<p><code>offset</code> (optional) (integer) Return Point details starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_feeds', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_feeds" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">list_feeds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;List `all` the feeds on this Thing.</span>
<span class="sd">    Returns QAPI list function payload</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `limit` (optional) (integer) Return this many Point details</span>
<span class="sd">    `offset` (optional) (integer) Return Point details starting at this offset</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">(</span><span class="n">R_FEED</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)[</span><span class="s1">&#39;feeds&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.list_tag">
    <p>def <span class="ident">list_tag</span>(</p><p>self, limit=500, offset=0)</p>
    </div>
    

    
  
    <div class="desc"><p>List <code>all</code> the tags for this Thing</p>
<p>Returns lists of tags, as below</p>
<div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;mytag1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mytag2&quot;</span>
    <span class="s2">&quot;ein_name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nochein_name&quot;</span>
<span class="p">]</span>
</pre></div>


<ul>
<li>OR...</li>
</ul>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>limit</code> (optional) (integer) Return at most this many tags</p>
<p><code>offset</code> (optional) (integer) Return tags starting at this offset</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.list_tag', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.list_tag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">list_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;List `all` the tags for this Thing</span>
<span class="sd">    Returns lists of tags, as below</span>
<span class="sd">        #!python</span>
<span class="sd">        [</span>
<span class="sd">            &quot;mytag1&quot;,</span>
<span class="sd">            &quot;mytag2&quot;</span>
<span class="sd">            &quot;ein_name&quot;,</span>
<span class="sd">            &quot;nochein_name&quot;</span>
<span class="sd">        ]</span>
<span class="sd">    - OR...</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `limit` (optional) (integer) Return at most this many tags</span>
<span class="sd">    `offset` (optional) (integer) Return tags starting at this offset</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_tag_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.reassign">
    <p>def <span class="ident">reassign</span>(</p><p>self, new_epid)</p>
    </div>
    

    
  
    <div class="desc"><p>Reassign the Thing from one agent to another.</p>
<p><code>ADVANCED USERS ONLY</code>  This will lead to any local instances of a Thing being rendered useless.
They won't be able to receive control requests, feed data or to share any feeds as they won't be in this agent.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>new_epid</code> (required) (string) the new agent id to which your Thing should be assigned. If None,
current agent will be chosen. If False, existing agent will be unassigned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.reassign', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.reassign" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">reassign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reassign the Thing from one agent to another.</span>
<span class="sd">    `ADVANCED USERS ONLY`  This will lead to any local instances of a Thing being rendered useless.</span>
<span class="sd">    They won&#39;t be able to receive control requests, feed data or to share any feeds as they won&#39;t be in this agent.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `new_epid` (required) (string) the new agent id to which your Thing should be assigned. If None,</span>
<span class="sd">    current agent will be chosen. If False, existing agent will be unassigned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;reassign(new_epid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_reassign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_epid</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.rename">
    <p>def <span class="ident">rename</span>(</p><p>self, new_lid)</p>
    </div>
    

    
  
    <div class="desc"><p>Rename the Thing.</p>
<p><code>ADVANCED USERS ONLY</code>  This can be confusing.  You are changing the local id of a Thing to <code>new_lid</code>.  If you
create another Thing using the "old_lid", the system will oblige, but it will be a completely <em>new</em> Thing.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>new_lid</code> (required) (string) the new local identifier of your Thing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.rename', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.rename" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rename the Thing.</span>
<span class="sd">    `ADVANCED USERS ONLY`  This can be confusing.  You are changing the local id of a Thing to `new_lid`.  If you</span>
<span class="sd">    create another Thing using the &quot;old_lid&quot;, the system will oblige, but it will be a completely _new_ Thing.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `new_lid` (required) (string) the new local identifier of your Thing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;rename(new_lid=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span> <span class="o">=</span> <span class="n">new_lid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_notify_thing_lid_change</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">new_lid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.set_meta_rdf">
    <p>def <span class="ident">set_meta_rdf</span>(</p><p>self, rdf, fmt=&#39;n3&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the metadata for this Thing in RDF fmt</p>
<p>Advanced users who want to manipulate the RDF for this Thing directly without the
<a href="ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta">ThingMeta</a> helper object</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>fmt</code> (optional) (string) The format of RDF you have sent.
Valid formats are: "xml", "n3", "turtle"</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.set_meta_rdf', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.set_meta_rdf" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_meta_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the metadata for this Thing in RDF fmt</span>
<span class="sd">    Advanced users who want to manipulate the RDF for this Thing directly without the</span>
<span class="sd">    [ThingMeta](ThingMeta.m.html#IoticAgent.IOT.ThingMeta.ThingMeta) helper object</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `fmt` (optional) (string) The format of RDF you have sent.</span>
<span class="sd">    Valid formats are: &quot;xml&quot;, &quot;n3&quot;, &quot;turtle&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">rdf</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.set_public">
    <p>def <span class="ident">set_public</span>(</p><p>self, public=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets your Thing to be public to all.  If <code>public=True</code>.
This means the tags, label and description of your Thing are now searchable by anybody, along with its
location and the units of any values on any Points.
If <code>public=False</code> the metadata of your Thing is no longer searchable.</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>public</code> (optional) (boolean) Whether (or not) to allow your Thing's metadata
to be searched by anybody</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.set_public', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.set_public" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets your Thing to be public to all.  If `public=True`.</span>
<span class="sd">    This means the tags, label and description of your Thing are now searchable by anybody, along with its</span>
<span class="sd">    location and the units of any values on any Points.</span>
<span class="sd">    If `public=False` the metadata of your Thing is no longer searchable.</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `public` (optional) (boolean) Whether (or not) to allow your Thing&#39;s metadata</span>
<span class="sd">    to be searched by anybody</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;set_public(public=</span><span class="si">%s</span><span class="s2">) [lid=</span><span class="si">%s</span><span class="s2">]&quot;</span><span class="p">,</span> <span class="n">public</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">)</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_request_entity_meta_setpublic</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lid</span><span class="p">,</span> <span class="n">public</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_wait_and_except_if_failed</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.unattach">
    <p>def <span class="ident">unattach</span>(</p><p>self, subid)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove a subscription of a control with a global subscription id (gpid)</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>subid</code> (required) ( <code>Either</code> (uuid) global id of the subscription you want to delete <code>or</code>
(object) The instance of a RemoteControl object corresponding to the control you want
to cease being able to actuate.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.unattach', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.unattach" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unattach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove a subscription of a control with a global subscription id (gpid)</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `subid` (required) ( `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">    (object) The instance of a RemoteControl object corresponding to the control you want</span>
<span class="sd">    to cease being able to actuate.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="IoticAgent.IOT.Thing.Thing.unfollow">
    <p>def <span class="ident">unfollow</span>(</p><p>self, subid)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove a subscription of a Feed with a global subscription id (gpid)</p>
<p>Raises <a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>
containing the error if the infrastructure detects a problem</p>
<p>Raises <a href="../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException">LinkException</a>
if there is a communications problem between you and the infrastructure</p>
<p><code>subid</code> (required) <code>Either</code> (uuid) global id of the subscription you want to delete <code>or</code>
(object) The instance of a RemoteFeed object corresponding to the feed you want to cease
following.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-IoticAgent.IOT.Thing.Thing.unfollow', this);">Show source &equiv;</a></p>
  <div id="source-IoticAgent.IOT.Thing.Thing.unfollow" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unfollow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove a subscription of a Feed with a global subscription id (gpid)</span>
<span class="sd">    Raises [IOTException](./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException)</span>
<span class="sd">    containing the error if the infrastructure detects a problem</span>
<span class="sd">    Raises [LinkException](../Core/AmqpLink.m.html#IoticAgent.Core.AmqpLink.LinkException)</span>
<span class="sd">    if there is a communications problem between you and the infrastructure</span>
<span class="sd">    `subid` (required) `Either` (uuid) global id of the subscription you want to delete `or`</span>
<span class="sd">    (object) The instance of a RemoteFeed object corresponding to the feed you want to cease</span>
<span class="sd">    following.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sub_delete</span><span class="p">(</span><span class="n">subid</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.agent_id" class="name">var <span class="ident">agent_id</span></p>
            

            
  
    <div class="desc"><p>Agent id (aka epId) with which this Thing is associated. None indicates this Thing is not assigned to any
agent. The following actions can only be performed with a Thing if operating in its associated agent:</p>
<ul>
<li>Receive feed data from feeds the Thing is following</li>
<li>Share feed data for feeds this Thing owns</li>
<li>Receive control requests for controls the Thing owns</li>
<li>Perform ask/tell on a control this Thing is attached to</li>
</ul>
<p>Attempting to perform the above actions from another agent will result in either a local (e.g. ValueError) or
remote (<a href="./Exceptions.m.html#IoticAgent.IOT.Exceptions.IOTException">IOTException</a>) exception to be raised.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.guid" class="name">var <span class="ident">guid</span></p>
            

            
  
    <div class="desc"><p>The Globally Unique ID of this resource in hex form (undashed).</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="IoticAgent.IOT.Thing.Thing.lid" class="name">var <span class="ident">lid</span></p>
            

            
  
    <div class="desc"><p>The local id of this Thing.  This is unique to you on this container.
Think of it as a nickname for the Thing</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
